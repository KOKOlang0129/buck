var Be=Object.defineProperty;var qe=(l,t,a)=>t in l?Be(l,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):l[t]=a;var fe=(l,t,a)=>qe(l,typeof t!="symbol"?t+"":t,a);import{r as x,a as Je,b as u}from"./vendor-Gm9i_4Ku.js";import{O as We,L as k,u as Ve,a as he,R as Xe,b as K,B as Ye}from"./router-C-DkBzJ2.js";import{B as xe,S as re,U as Qe,a as Ze,C as es,D as ss,b as ts,P as we,X as I,A as Se,c as rs,L as as,d as te,M as B,e as ls,I as ns,f as is,g as os,h as cs,E as je,i as Ne}from"./ui-CmHUyQgr.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function a(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=a(n);fetch(n.href,i)}})();var Ce={exports:{}},ae={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ds=x,xs=Symbol.for("react.element"),ms=Symbol.for("react.fragment"),hs=Object.prototype.hasOwnProperty,gs=ds.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,us={key:!0,ref:!0,__self:!0,__source:!0};function ke(l,t,a){var r,n={},i=null,c=null;a!==void 0&&(i=""+a),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(c=t.ref);for(r in t)hs.call(t,r)&&!us.hasOwnProperty(r)&&(n[r]=t[r]);if(l&&l.defaultProps)for(r in t=l.defaultProps,t)n[r]===void 0&&(n[r]=t[r]);return{$$typeof:xs,type:l,key:i,ref:c,props:n,_owner:gs.current}}ae.Fragment=ms;ae.jsx=ke;ae.jsxs=ke;Ce.exports=ae;var e=Ce.exports,me={},ve=Je;me.createRoot=ve.createRoot,me.hydrateRoot=ve.hydrateRoot;const Ie=x.createContext(void 0),le=()=>{const l=x.useContext(Ie);if(l===void 0)throw new Error("useAuth must be used within an AuthProvider");return l},ps=({children:l})=>{const[t,a]=x.useState(null),[r,n]=x.useState(!0);x.useEffect(()=>{const g=localStorage.getItem("mockUser");g&&a(JSON.parse(g)),n(!1)},[]);const h={user:t,loading:r,signIn:async(g,b)=>{const j={uid:"mock-user-id",email:g,displayName:g.split("@")[0],photoURL:null};a(j),localStorage.setItem("mockUser",JSON.stringify(j))},signUp:async(g,b,j)=>{const C={uid:"mock-user-id",email:g,displayName:j,photoURL:null};a(C),localStorage.setItem("mockUser",JSON.stringify(C))},signOut:async()=>{a(null),localStorage.removeItem("mockUser")},signInWithGoogle:async()=>{const g={uid:"mock-google-user-id",email:"user@gmail.com",displayName:"Google User",photoURL:"https://via.placeholder.com/40"};a(g),localStorage.setItem("mockUser",JSON.stringify(g))}};return e.jsx(Ie.Provider,{value:h,children:l})},bs=()=>e.jsx("div",{className:"min-h-screen",children:e.jsx(We,{})});function Ae(l){var t,a,r="";if(typeof l=="string"||typeof l=="number")r+=l;else if(typeof l=="object")if(Array.isArray(l)){var n=l.length;for(t=0;t<n;t++)l[t]&&(a=Ae(l[t]))&&(r&&(r+=" "),r+=a)}else for(a in l)l[a]&&(r&&(r+=" "),r+=a);return r}function ge(){for(var l,t,a=0,r="",n=arguments.length;a<n;a++)(l=arguments[a])&&(t=Ae(l))&&(r&&(r+=" "),r+=t);return r}const y=({variant:l="primary",size:t="md",children:a,className:r,...n})=>{const i="inline-flex items-center justify-center rounded-lg font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none",c={primary:"bg-primary-600 text-white hover:bg-primary-700 focus:ring-primary-500",secondary:"bg-gray-600 text-white hover:bg-gray-700 focus:ring-gray-500",outline:"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 focus:ring-primary-500",ghost:"text-gray-700 hover:bg-gray-100 focus:ring-primary-500"},m={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"};return e.jsx("button",{className:ge(i,c[l],m[t],r),...n,children:a})},ys=()=>e.jsxs("div",{className:"min-h-screen",children:[e.jsx("header",{className:"bg-white/80 backdrop-blur-sm border-b border-gray-200 sticky top-0 z-50",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xe,{className:"h-8 w-8 text-primary-600"}),e.jsx("span",{className:"text-xl font-bold text-gray-900",children:"Arcana Editor"})]}),e.jsxs("nav",{className:"hidden md:flex space-x-8",children:[e.jsx(k,{to:"/editor",className:"text-gray-600 hover:text-primary-600 transition-colors",children:"エディター"}),e.jsx(k,{to:"/dashboard",className:"text-gray-600 hover:text-primary-600 transition-colors",children:"ダッシュボード"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(k,{to:"/login",children:e.jsx(y,{variant:"outline",size:"sm",children:"ログイン"})}),e.jsx(k,{to:"/register",children:e.jsx(y,{size:"sm",children:"新規登録"})})]})]})})}),e.jsx("section",{className:"pt-20 pb-16 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto text-center",children:[e.jsxs("h1",{className:"text-4xl md:text-6xl font-bold text-gray-900 mb-6",children:["AIが支援する",e.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-primary-600 to-purple-600",children:"シナリオエディター"})]}),e.jsx("p",{className:"text-xl text-gray-600 mb-8 max-w-3xl mx-auto",children:"クリエイティブな物語をAIの力でより豊かに。直感的なエディターで、あなたの想像力を現実に。"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx(k,{to:"/editor",children:e.jsxs(y,{size:"lg",className:"w-full sm:w-auto",children:[e.jsx(re,{className:"mr-2 h-5 w-5"}),"エディターを始める"]})}),e.jsx("a",{href:"#features",children:e.jsx(y,{variant:"outline",size:"lg",className:"w-full sm:w-auto",children:"機能を見る"})})]})]})}),e.jsx("section",{id:"features",className:"py-16 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"主な機能"}),e.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"AIの力を借りて、より良いシナリオを作成しましょう"})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"bg-white rounded-xl p-8 shadow-lg hover:shadow-xl transition-shadow",children:[e.jsx("div",{className:"bg-primary-100 w-16 h-16 rounded-lg flex items-center justify-center mb-6",children:e.jsx(re,{className:"h-8 w-8 text-primary-600"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"AI補完機能"}),e.jsx("p",{className:"text-gray-600",children:"物語の続きをAIが提案。創作の手が止まった時も、AIがあなたの創作活動をサポートします。"})]}),e.jsxs("div",{className:"bg-white rounded-xl p-8 shadow-lg hover:shadow-xl transition-shadow",children:[e.jsx("div",{className:"bg-primary-100 w-16 h-16 rounded-lg flex items-center justify-center mb-6",children:e.jsx(Qe,{className:"h-8 w-8 text-primary-600"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"コラボレーション"}),e.jsx("p",{className:"text-gray-600",children:"チームでの共同編集が可能。リアルタイムで複数人でのシナリオ作成をサポートします。"})]}),e.jsxs("div",{className:"bg-white rounded-xl p-8 shadow-lg hover:shadow-xl transition-shadow",children:[e.jsx("div",{className:"bg-primary-100 w-16 h-16 rounded-lg flex items-center justify-center mb-6",children:e.jsx(Ze,{className:"h-8 w-8 text-primary-600"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"セキュアな保存"}),e.jsx("p",{className:"text-gray-600",children:"Firebaseの強力なセキュリティで、あなたの作品を安全に保存・管理します。"})]})]})]})}),e.jsx("footer",{className:"bg-gray-900 text-white py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto text-center",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[e.jsx(xe,{className:"h-6 w-6"}),e.jsx("span",{className:"text-lg font-semibold",children:"Arcana Editor"})]}),e.jsx("p",{className:"text-gray-400",children:"© 2025 Arcana Editor. All rights reserved."})]})})]}),ue=u.forwardRef(({label:l,error:t,helperText:a,className:r,id:n,...i},c)=>{const m=n||`textarea-${Math.random().toString(36).substr(2,9)}`;return e.jsxs("div",{className:"w-full",children:[l&&e.jsx("label",{htmlFor:m,className:"block text-sm font-medium text-gray-700 mb-2",children:l}),e.jsx("textarea",{ref:c,id:m,className:ge("w-full px-3 py-2 border rounded-lg shadow-sm transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 resize-vertical",t?"border-red-300 focus:ring-red-500":"border-gray-300 focus:ring-primary-500",r),...i}),t&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t}),a&&!t&&e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:a})]})}),P=({label:l,error:t,helperText:a,className:r,id:n,...i})=>{const c=n||`input-${Math.random().toString(36).substr(2,9)}`;return e.jsxs("div",{className:"w-full",children:[l&&e.jsx("label",{htmlFor:c,className:"block text-sm font-medium text-gray-700 mb-2",children:l}),e.jsx("input",{id:c,className:ge("w-full px-3 py-2 border rounded-lg shadow-sm transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2",t?"border-red-300 focus:ring-red-500":"border-gray-300 focus:ring-primary-500",r),...i}),t&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t}),a&&!t&&e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:a})]})},Pe=({size:l="md",className:t=""})=>{const a={sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"};return e.jsx("div",{className:`flex items-center justify-center ${t}`,children:e.jsx("div",{className:`${a[l]} animate-spin rounded-full border-b-2 border-primary-600`})})},fs=["主人公は立ち上がり、決意を込めて言った。","その時、不思議な光が現れて、状況を一変させた。","彼女の心に新しい希望が芽生え始めていた。","謎めいた影が近づいてくる。","突然、雷鳴が轟き、空が暗くなった。","古い城の扉がきしみながら開いた。","魔法の剣が光り始めた。","風が物語を運んでくる。","星が瞬いて、新しい冒険を予感させる。","時間が止まったような静寂が訪れた。"],js=[{id:"1",title:"冒険の始まり",content:`主人公のアレックスは小さな村で平凡な生活を送っていた。毎日同じような日々が続き、何か変化を求めていた。

ある朝、村の外れで不思議な光を発する石を発見した。その石に触れた瞬間、世界が一変した。

「これは...魔法の石？」アレックスは呟いた。

その時、石から声が聞こえてきた。「選ばれし者よ、君の冒険が今始まる...」`,createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-20"),tags:["冒険","ファンタジー","魔法"],isPublic:!0,authorId:"mock-user-id"},{id:"2",title:"謎の遺跡",content:`考古学者のサラは古代の遺跡で不思議な発見をした。壁に刻まれた文字は、これまで見たことのない言語だった。

「この文字...古代エジプトとも、マヤ文明とも違う」サラは顕微鏡で文字を詳しく調べた。

突然、遺跡の奥から光が差し込んだ。それは自然光ではない。人工的な光だった。

「誰かいるのか？」サラは懐中電灯を手に取り、光の方向へ歩き始めた。`,createdAt:new Date("2024-01-10"),updatedAt:new Date("2024-01-18"),tags:["ミステリー","古代","考古学"],isPublic:!1,authorId:"mock-user-id"},{id:"3",title:"宇宙の旅人",content:`宇宙船パイオニア号は未知の惑星に向かっていた。船長のケンは地球を離れてから3年が経過していた。

「地球からの最後の通信から6ヶ月が経った」ケンは航海日誌に記録した。

その時、船の警報システムが作動した。「未知の物体が接近中」という警告音が響いた。

ケンはスクリーンを見つめた。そこには、これまで見たことのない巨大な宇宙船が映し出されていた。`,createdAt:new Date("2024-01-05"),updatedAt:new Date("2024-01-12"),tags:["SF","宇宙","冒険"],isPublic:!0,authorId:"mock-user-id"}];class Ns{constructor(){fe(this,"scenarios",[...js]);this.loadFromLocalStorage()}getUserScenarios(t){return this.scenarios.filter(a=>a.authorId===t)}getScenario(t){return this.scenarios.find(a=>a.id===t)||null}createScenario(t){const a={...t,id:Date.now().toString(),createdAt:new Date,updatedAt:new Date};return this.scenarios.push(a),this.saveToLocalStorage(),a.id}updateScenario(t,a){const r=this.scenarios.findIndex(n=>n.id===t);r!==-1&&(this.scenarios[r]={...this.scenarios[r],...a,updatedAt:new Date},this.saveToLocalStorage())}deleteScenario(t){this.scenarios=this.scenarios.filter(a=>a.id!==t),this.saveToLocalStorage()}getPublicScenarios(){return this.scenarios.filter(t=>t.isPublic)}generateAISuggestions(){return[...fs].sort(()=>.5-Math.random()).slice(0,5)}loadFromLocalStorage(){const t=localStorage.getItem("mockScenarios");if(t)try{const a=JSON.parse(t);this.scenarios=a.map(r=>({...r,createdAt:new Date(r.createdAt),updatedAt:new Date(r.updatedAt)}))}catch(a){console.error("Error loading scenarios from localStorage:",a)}}saveToLocalStorage(){localStorage.setItem("mockScenarios",JSON.stringify(this.scenarios))}}const A=new Ns,vs=({initialContent:l="",onSave:t})=>{const{user:a}=le(),[r,n]=x.useState(l),[i,c]=x.useState(""),[m,p]=x.useState([]),[h,g]=x.useState(""),[b,j]=x.useState(!1),[C,$]=x.useState([]),[N,E]=x.useState(!1),[T,O]=x.useState(0),[v,R]=x.useState(null),D=x.useRef(null),q=async()=>{E(!0);try{await new Promise(w=>setTimeout(w,1500));const d=A.generateAISuggestions();$(d)}catch(d){console.error("AI completion error:",d)}finally{E(!1)}},ne=d=>{n(d.target.value),O(d.target.selectionStart)},G=()=>{D.current&&O(D.current.selectionStart)},J=d=>{const w=r.substring(0,T),z=r.substring(T),L=w+d+z;n(L),$([]),setTimeout(()=>{if(D.current){const _=T+d.length;D.current.focus(),D.current.setSelectionRange(_,_)}},100)},U=()=>{h.trim()&&!m.includes(h.trim())&&(p([...m,h.trim()]),g(""))},W=d=>{p(m.filter(w=>w!==d))},H=()=>{if(!a){alert("ログインが必要です");return}try{if(v)A.updateScenario(v,{title:i,content:r,tags:m,isPublic:b});else{const d=A.createScenario({title:i||"無題のシナリオ",content:r,tags:m,isPublic:b,authorId:a.uid});R(d)}t&&t({title:i,content:r,tags:m,isPublic:b}),alert("シナリオが保存されました！")}catch(d){console.error("Save error:",d),alert("保存に失敗しました")}},ie=async()=>{try{await navigator.clipboard.writeText(r),alert("クリップボードにコピーしました")}catch(d){console.error("Copy failed:",d)}},V=()=>{const d=JSON.stringify({title:i,content:r,tags:m,isPublic:b,timestamp:new Date().toISOString()},null,2),w=new Blob([d],{type:"application/json"}),z=URL.createObjectURL(w),L=document.createElement("a");L.href=z,L.download=`${i||"scenario"}.json`,L.click(),URL.revokeObjectURL(z)};return e.jsxs("div",{className:"max-w-5xl mx-auto p-4 sm:p-6 lg:p-8 space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"シナリオエディター"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(y,{variant:"outline",size:"sm",onClick:ie,className:"flex-1 sm:flex-none",children:[e.jsx(es,{className:"h-4 w-4 mr-2"}),"コピー"]}),e.jsxs(y,{variant:"outline",size:"sm",onClick:V,className:"flex-1 sm:flex-none",children:[e.jsx(ss,{className:"h-4 w-4 mr-2"}),"エクスポート"]}),e.jsxs(y,{size:"sm",onClick:H,className:"flex-1 sm:flex-none",children:[e.jsx(ts,{className:"h-4 w-4 mr-2"}),"保存"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(P,{label:"タイトル",value:i,onChange:d=>c(d.target.value),placeholder:"シナリオのタイトルを入力"}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:b,onChange:d=>j(d.target.checked),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"公開"})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"タグ"}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:m.map((d,w)=>e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-primary-100 text-primary-800",children:[d,e.jsx("button",{onClick:()=>W(d),className:"ml-2 text-primary-600 hover:text-primary-800",children:"×"})]},w))}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(P,{value:h,onChange:d=>g(d.target.value),placeholder:"新しいタグを入力",onKeyPress:d=>d.key==="Enter"&&U()}),e.jsx(y,{variant:"outline",onClick:U,children:e.jsx(we,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 via-blue-50 to-indigo-50 p-6 rounded-xl border border-purple-100 shadow-sm",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4 gap-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(re,{className:"h-5 w-5 mr-2 text-purple-600 animate-pulse"}),"AI補完"]}),e.jsx(y,{variant:"outline",size:"sm",onClick:()=>q(),disabled:N,className:"w-full sm:w-auto",children:N?e.jsxs(e.Fragment,{children:[e.jsx(Pe,{size:"sm",className:"mr-2"}),"生成中..."]}):e.jsxs(e.Fragment,{children:[e.jsx(re,{className:"h-4 w-4 mr-2"}),"続きを生成"]})})]}),C.length>0&&e.jsxs("div",{className:"space-y-3 mt-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"以下の提案から選択してください："}),e.jsx("div",{className:"grid gap-3",children:C.map((d,w)=>e.jsx("div",{className:"bg-white p-4 rounded-lg border-2 border-purple-200 hover:border-purple-400 cursor-pointer transition-all shadow-sm hover:shadow-md",onClick:()=>J(d),children:e.jsx("p",{className:"text-gray-800 leading-relaxed",children:d})},w))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"シナリオ内容"}),e.jsx(ue,{ref:D,value:r,onChange:ne,onSelect:G,onFocus:G,placeholder:"シナリオの内容を入力してください...",className:"min-h-96 font-mono text-base leading-relaxed"}),e.jsxs("div",{className:"mt-2 text-sm text-gray-500",children:["文字数: ",r.length," | カーソル位置: ",T]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"統計情報"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"文字数:"}),e.jsx("span",{className:"ml-2 font-medium",children:r.length})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"単語数:"}),e.jsx("span",{className:"ml-2 font-medium",children:r.split(/\s+/).filter(d=>d.length>0).length})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"行数:"}),e.jsx("span",{className:"ml-2 font-medium",children:r.split(`
`).length})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"段落数:"}),e.jsx("span",{className:"ml-2 font-medium",children:r.split(`

`).filter(d=>d.trim().length>0).length})]})]})]})]})},ws=()=>{const[l]=Ve(),[t,a]=x.useState(""),r=l.get("id");x.useEffect(()=>{if(r){const i=A.getScenario(r);i&&a(i.content)}},[r]);const n=i=>{console.log("Saving scenario:",i)};return e.jsx("div",{className:"min-h-screen",children:e.jsx(vs,{initialContent:t,onSave:n})})},Ss=({isOpen:l,onClose:t,onSave:a})=>{const[r,n]=x.useState(""),[i,c]=x.useState(!1),[m,p]=x.useState(!1);x.useEffect(()=>{if(l){const g=localStorage.getItem("apiKey")||"",b=localStorage.getItem("useShortcutKeys")==="true",j=localStorage.getItem("dontSaveAIHistory")==="true";n(g),c(b),p(j)}},[l]);const h=()=>{const g={apiKey:r,useShortcutKeys:i,dontSaveAIHistory:m};localStorage.setItem("apiKey",r),localStorage.setItem("useShortcutKeys",i.toString()),localStorage.setItem("dontSaveAIHistory",m.toString()),a(g),t()};return l?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-blue-50 border-2 border-gray-300 rounded-lg shadow-xl w-full max-w-lg mx-4 p-8 relative",children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700 transition-colors","aria-label":"閉じる",children:e.jsx(I,{className:"h-5 w-5"})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"APIキーの入力"}),e.jsx("div",{className:"mb-6",children:e.jsx(P,{type:"password",value:r,onChange:g=>n(g.target.value),placeholder:"APIキーを入力してください",className:"w-full h-12 text-base"})}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("label",{className:"flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:i,onChange:g=>c(g.target.checked),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"ショートカットキーを使用する"})]}),e.jsxs("label",{className:"flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:m,onChange:g=>p(g.target.checked),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"AIの履歴を保存しない"})]})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx(y,{onClick:h,className:"px-8",children:"設定を保存"})})]})}):null},Cs=({isOpen:l,onClose:t,onSave:a,onNext:r})=>{const[n,i]=x.useState(""),c=()=>{n.trim()&&(a(n),i(""),t())},m=()=>{n.trim()&&(r?(r(n),i(""),t()):c())},p=()=>{i(""),t()};return l?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-blue-50 border-2 border-gray-300 rounded-lg shadow-xl w-full max-w-2xl mx-4 p-6 relative",children:[e.jsx("button",{onClick:p,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700 transition-colors","aria-label":"閉じる",children:e.jsx(I,{className:"h-5 w-5"})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"プロンプト入力"}),e.jsx("div",{className:"mb-6",children:e.jsx(ue,{value:n,onChange:h=>i(h.target.value),placeholder:"プロンプトを入力してください...",className:"w-full min-h-[300px] text-base resize-none"})}),e.jsxs("div",{className:"flex justify-between gap-4",children:[e.jsx(y,{onClick:c,variant:"outline",className:"flex-1 border border-gray-300 hover:border-gray-400",disabled:!n.trim(),children:"テキストを保存"}),e.jsxs(y,{onClick:m,className:"flex-1",disabled:!n.trim(),children:[e.jsx(Se,{className:"h-4 w-4 mr-2"}),"次へ"]})]})]})}):null},ks=({isOpen:l,onClose:t,onSave:a,onNext:r})=>{const[n,i]=x.useState(""),c=()=>{n.trim()&&(a(n),i(""),t())},m=()=>{n.trim()&&(r?(r(n),i(""),t()):c())},p=()=>{i(""),t()};return l?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-blue-50 border-2 border-red-500 rounded-lg shadow-xl w-full max-w-2xl mx-4 p-6 relative",children:[e.jsx("button",{onClick:p,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700 transition-colors","aria-label":"閉じる",children:e.jsx(I,{className:"h-5 w-5"})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Note"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"プロンプト入力・自由テキスト入力"}),e.jsx(ue,{value:n,onChange:h=>i(h.target.value),placeholder:"プロンプトまたは自由テキストを入力してください...",className:"w-full min-h-[300px] text-base resize-none bg-blue-50"})]}),e.jsxs("div",{className:"flex justify-between gap-4",children:[e.jsx(y,{onClick:c,variant:"outline",className:"flex-1 border border-gray-300 hover:border-gray-400",disabled:!n.trim(),children:"テキストを保存"}),e.jsx(y,{onClick:m,className:"flex-1 border-2 border-red-500 hover:border-red-600",disabled:!n.trim(),children:e.jsx(Se,{className:"h-4 w-4 mr-2"})})]})]})}):null},Is=["outline","plain","preview","markdown"],As=`
### 一章　冷たい朝
窓の外では、灰色の空が静かに澱んでいる。  
雨粒がガラスを伝い、ひとつひとつの呼吸のように流れていく。  
目を覚ましても、世界はまだ眠っているようだった。

### 二章　傘の下の世界
通りには、人の影がぽつぽつと揺れている。  
傘の布地を叩く音が、唯一のリズム。  
すれ違う誰かの温度が、雨に溶けて消えていった。

### 三章　湯気の向こう
喫茶店の扉を開けると、温かな香りが迎えてくれる。  
コーヒーの湯気が曇った眼鏡を曇らせ、世界を少し柔らかくした。
`,Ps=`# 雨の日の幸

## 一章　冷たい朝
窓の外では、灰色の空が静かに澱んでいる。
雨粒がガラスを伝い、ひとつひとつの呼吸のように流れていく。
目を覚ましても、世界はまだ眠っているようだった。

## 二章　傘の下の世界
通りには、人の影がぽつぽつと揺れている。
傘の布地を叩く音が、唯一のリズム。
すれ違う誰かの温度が、雨に溶けて消えていった。

## 三章　湯気の向こう
喫茶店の扉を開けると、温かな香りが迎えてくれる。
コーヒーの湯気が曇った眼鏡を曇らせ、世界を少し柔らかくした。
`,$s=()=>{const{user:l,signOut:t}=le(),a=he(),[r,n]=u.useState([]),[i,c]=u.useState(!0),[m,p]=u.useState(null),[h,g]=u.useState("plain"),[b,j]=u.useState(!1),[C,$]=u.useState(!1),[N,E]=u.useState(Ps),[T,O]=u.useState(""),[v,R]=u.useState(""),[D,q]=u.useState(!1),[ne,G]=u.useState(!1),[J,U]=u.useState(""),[W,H]=u.useState(!1),[ie,V]=u.useState(!1),[d,w]=u.useState([]),[z,L]=u.useState(!1),[_,oe]=u.useState([{id:"summary",title:"あらすじ",content:""},{id:"note",title:"Note",content:""},{id:"vocabulary",title:"単語帳",content:""},{id:"memo",title:"メモ",content:""}]),[$e,Ee]=u.useState(new Set);u.useEffect(()=>{l||a("/login")},[l,a]),u.useEffect(()=>{l&&X()},[l]),u.useEffect(()=>{r.length>0&&!m&&p(r[0].id)},[r,m]);const S=r.find(s=>s.id===m)||null;u.useEffect(()=>{S?(E(S.content),O(S.title)):(E(""),O(""))},[S]);const Te=s=>{O(s),S&&l&&(A.updateScenario(S.id,{title:s}),X())},X=async()=>{try{if(l){const s=A.getUserScenarios(l.uid);n(s)}}catch(s){console.error("Error loading scenarios:",s)}finally{c(!1)}},Oe=async()=>{try{await t(),a("/login")}catch(s){console.error("Sign out error:",s)}},De=()=>{if(!l)return;const s=A.createScenario({title:"新しいプロジェクト",content:"ここに新しいシナリオを作成してください。",tags:[],isPublic:!1,authorId:l.uid});X(),p(s)},Le=s=>{console.log("Settings saved:",s)},pe=s=>{E(s),S&&l&&A.updateScenario(S.id,{content:s})},Y=()=>{$(!0)},Re=s=>{R(s)},_e=async s=>{q(!0);try{await new Promise(f=>setTimeout(f,1500));const o=`【生成されたテキスト】

${s}に基づいて生成されたテキストがここに表示されます。

実際の実装では、AI API（ChatGPTまたはClaude）から取得したテキストが表示されます。`;R(o)}catch(o){console.error("Text generation error:",o),R("テキストの生成中にエラーが発生しました。")}finally{q(!1)}},ce=()=>{if(G(!0),S){const s=S.tags||[],o=s.length>0?s.map(f=>`# ${f}`).join(`

`):"# main";U(o||"# main")}else U("# main")},be=()=>{G(!1)},Me=()=>{const s=prompt("タグ名を入力してください:");if(s&&S){const o=S.tags||[];if(!o.includes(s)){A.updateScenario(S.id,{tags:[...o,s]}),X();const se=[...o,s].map(F=>`# ${F}`).join(`

`);U(se)}}},Q=()=>{W?V(!0):H(!0)},Ue=s=>{console.log("Dictionary text saved:",s)},ze=s=>{const o={id:`dict-${Date.now()}`,name:"Main",description:s||"メインの文章について書かれている"};w([...d,o]),H(!0)},M=()=>{H(!1)},Fe=()=>{alert("資料の検索機能は今後実装予定です")},Z=()=>{L(!0)},ye=(s,o)=>{oe(_.map(f=>f.id===s?{...f,title:o}:f))},Ke=s=>{oe(_.filter(o=>o.id!==s))},ee=u.useMemo(()=>{if(!N)return[];const s=N.split(`
`),o=[];return s.forEach((f,se)=>{const F=f.trim();if(F.startsWith("#")){const de=F.match(/^(#+)\s+(.+)$/);de&&o.push({level:de[1].length,text:de[2],id:`header-${se}`})}else F.length>0&&o.length<50&&(o.length===0||o[o.length-1].level===0)&&o.push({level:0,text:F.substring(0,50),id:`line-${se}`})}),o},[N]),Ge=s=>{const o=new Set($e);o.has(s)?o.delete(s):o.add(s),Ee(o)},He=s=>{let o=s.replace(/^### (.*$)/gim,"<h3>$1</h3>").replace(/^## (.*$)/gim,"<h2>$1</h2>").replace(/^# (.*$)/gim,"<h1>$1</h1>").replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/__(.*?)__/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/_(.*?)_/g,"<em>$1</em>").replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2" class="text-blue-600 hover:underline">$1</a>').replace(/^\* (.*$)/gim,"<li>$1</li>").replace(/^- (.*$)/gim,"<li>$1</li>").replace(/^\+ (.*$)/gim,"<li>$1</li>").replace(/```([^`]+)```/g,'<pre class="bg-gray-100 p-2 rounded"><code>$1</code></pre>').replace(/`([^`]+)`/g,'<code class="bg-gray-100 px-1 rounded">$1</code>').replace(/\n/g,"<br />");return o=o.replace(/(<li>.*<\/li>)/g,f=>f.includes("<ul>")?f:'<ul class="list-disc list-inside my-2">'+f+"</ul>"),o};return i?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 text-gray-700",children:e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-gray-400"})}):l?e.jsxs("div",{className:"min-h-screen bg-gray-100 text-gray-900",children:[e.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-10",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 max-w-md",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"プロジェクトの名前"}),e.jsx("input",{type:"text",value:T,onChange:s=>Te(s.target.value),placeholder:"プロジェクト名を入力",className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(y,{variant:"outline",className:"px-6",onClick:()=>j(!0),children:[e.jsx(rs,{className:"h-4 w-4 mr-2"}),"設定"]}),e.jsxs(y,{variant:"outline",className:"px-6",onClick:Oe,children:[e.jsx(as,{className:"h-4 w-4 mr-2"}),"ログアウト"]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[240px_minmax(0,1fr)_220px] gap-6",children:[e.jsxs("aside",{className:"border border-gray-300 bg-white rounded-lg p-4 flex flex-col h-[794px]",children:[e.jsx("h2",{className:"text-sm font-semibold text-gray-700 mb-4",children:"プロジェクト一覧"}),e.jsx("div",{className:"space-y-2 flex-1 overflow-auto pr-1",children:r.length===0?e.jsx("p",{className:"text-sm text-gray-500",children:"まだプロジェクトがありません。"}):r.map(s=>e.jsx("button",{onClick:()=>p(s.id),className:`w-full text-left px-3 py-2 rounded-md border ${m===s.id?"border-gray-900 bg-gray-900 text-white":"border-gray-300 bg-white hover:bg-gray-50"} transition`,children:e.jsx("p",{className:"text-sm font-medium truncate",children:s.title})},s.id))}),e.jsxs(y,{variant:"outline",onClick:De,className:"mt-4 w-full justify-center",children:[e.jsx(we,{className:"h-4 w-4 mr-2"}),"新規作成"]})]}),e.jsxs("section",{className:"border border-gray-300 bg-white rounded-lg p-6 h-[794px] flex flex-col",children:[e.jsxs("div",{className:"flex items-center flex-wrap gap-3 mb-6",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"ViewMode"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Is.map(s=>e.jsx("button",{onClick:()=>g(s),className:`px-4 py-1.5 rounded-md border text-sm capitalize ${h===s?s==="plain"||s==="outline"||s==="preview"||s==="markdown"?"border-green-500 bg-green-500 text-white":"border-gray-900 bg-gray-900 text-white":"border-gray-300 bg-white hover:bg-gray-50"} transition`,children:s},s))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-[220px_minmax(0,1fr)] gap-6 flex-1",children:[(h==="outline"||h==="plain"||h==="preview"||h==="markdown"||h===null)&&e.jsxs("div",{className:"border border-gray-200 rounded-md p-4 bg-gray-50 overflow-auto",style:{maxHeight:"calc(794px - 120px)"},children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Outline"}),e.jsx("div",{className:"space-y-1 text-sm text-gray-600",children:ee.length>0?ee.map((s,o)=>e.jsxs("div",{className:`truncate cursor-pointer hover:bg-gray-100 px-2 py-1 rounded ${s.level===0||s.level===1?"pl-0":s.level===2?"pl-4":"pl-8"}`,onClick:()=>Ge(s.id),children:[s.level>0?`header${s.level}: `:"",s.text]},`${s.id}-${o}`)):e.jsx("p",{className:"text-gray-400",children:"アウトラインはまだありません。"})})]}),e.jsx("div",{className:`border border-gray-200 rounded-md p-4 overflow-auto bg-white ${h==="outline"||h==="plain"||h==="preview"||h==="markdown"||h===null?"":"md:col-span-2"}`,style:{maxHeight:"calc(794px - 120px)"},children:S?h===null?e.jsxs("div",{className:"relative h-full min-h-[400px] flex items-center justify-center bg-white",children:[e.jsx("div",{className:"absolute left-6 bottom-16 w-2/3 border-t border-dashed border-gray-300 rotate-[-12deg]"}),e.jsx("span",{className:"text-lg font-semibold text-gray-600 bg-white px-3 py-1 shadow-sm rounded",children:"Main Editor"})]}):h==="outline"?e.jsxs("div",{className:"h-full min-h-[400px] flex flex-col",children:[ee.length>0?e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:"space-y-2 text-sm text-gray-700",children:ee.map((s,o)=>e.jsxs("div",{className:"flex gap-4 items-start border border-transparent hover:border-gray-200 rounded px-3 py-1 transition-colors",children:[e.jsxs("span",{className:"text-gray-500 min-w-[3rem]",children:[o+1,"章"]}),e.jsx("span",{className:"font-medium",children:s.text})]},`outline-main-${s.id}-${o}`))})}):e.jsx("div",{className:"flex-1 flex items-center justify-center text-sm text-gray-400",children:"アウトラインはまだありません。"}),e.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-200 text-xs text-gray-500 space-y-1",children:[e.jsx("p",{children:"いわゆるアウトラインエディタモード"}),e.jsx("p",{children:"本文は折りたたまれている"}),e.jsx("p",{children:"header要素をドラッグ・アンド・ドロップできる"})]})]}):h==="plain"?e.jsxs("div",{className:"h-full flex flex-col min-h-[400px]",children:[e.jsx("textarea",{value:N,onChange:s=>pe(s.target.value),className:"w-full flex-1 text-sm leading-relaxed text-gray-700 resize-none border-none outline-none font-sans",placeholder:"ここにプレーンテキストで内容を入力してください...",style:{fontFamily:"inherit",minHeight:"320px"}}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 text-xs text-gray-500 space-y-1",children:[e.jsx("p",{children:"プレーンテキストモード"}),e.jsx("p",{children:"markdownのレンダリングが使用されない"}),e.jsx("p",{children:"読み・書き下ろしのためのモード"})]})]}):h==="preview"?e.jsxs("div",{className:"h-full min-h-[400px]",children:[e.jsx("div",{className:"text-sm leading-relaxed text-gray-700 prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:He(N||As)}}),e.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-200 text-xs text-gray-500 space-y-1",children:[e.jsx("p",{children:"このツールでは表現できないが、強調表示やリストなど"}),e.jsx("p",{children:"markdownのレンダリング表示モード"}),e.jsx("p",{children:"リンクや辞書などをハイライト表示"})]})]}):h==="markdown"?e.jsxs("div",{className:"h-full flex flex-col min-h-[400px]",children:[e.jsx("textarea",{value:N,onChange:s=>pe(s.target.value),className:"w-full flex-1 text-sm leading-relaxed text-gray-700 font-mono resize-none border-none outline-none",placeholder:"ここにMarkdown形式で内容を入力してください...",style:{minHeight:"400px"}}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 text-xs text-center text-gray-500",children:e.jsx("p",{children:"markdown 編集モード"})})]}):e.jsx("div",{className:"text-sm leading-relaxed whitespace-pre-wrap text-gray-700 font-mono",children:N}):e.jsx("p",{className:"text-sm text-gray-500",children:"プロジェクトを選択すると内容が表示されます。"})})]})]}),z?e.jsxs("aside",{className:"border border-gray-300 bg-white rounded-lg p-4 flex flex-col h-[794px] space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 pb-2",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"校正モード"}),e.jsx("button",{onClick:()=>L(!1),className:"text-gray-400 hover:text-gray-600 transition-colors","aria-label":"校正モードを閉じる",children:e.jsx(I,{className:"h-4 w-4"})})]}),_.map(s=>e.jsxs("div",{className:"border border-gray-300 rounded-md bg-white",children:[e.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b border-gray-200",children:[e.jsx("input",{type:"text",value:s.title,onChange:o=>ye(s.id,o.target.value),className:"text-sm font-semibold text-gray-700 bg-transparent border-none outline-none focus:bg-gray-50 px-1 rounded",onBlur:o=>{o.target.value.trim()||ye(s.id,"新しいパネル")}}),e.jsx("button",{onClick:()=>Ke(s.id),className:"text-gray-400 hover:text-gray-600 transition-colors","aria-label":"閉じる",children:e.jsx(I,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"px-3 py-2 min-h-[80px]",children:e.jsx("textarea",{value:s.content,onChange:o=>{oe(_.map(f=>f.id===s.id?{...f,content:o.target.value}:f))},className:"w-full text-sm text-gray-700 border-none outline-none resize-none",placeholder:"内容を入力...",rows:3})})]},s.id)),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-auto",children:[e.jsx("button",{onClick:Y,className:"border border-gray-300 rounded-md px-3 py-2 text-sm text-left hover:bg-gray-50 transition",children:"＋ 文章の追加"}),e.jsx("button",{onClick:Q,className:"border border-gray-300 rounded-md px-3 py-2 text-sm text-left hover:bg-gray-50 transition",children:"＋ 辞書の追加"}),e.jsx("button",{onClick:ce,className:"border border-gray-300 rounded-md px-3 py-2 text-sm text-left hover:bg-gray-50 transition",children:"＋ タグの追加"}),e.jsxs("button",{onClick:Z,className:"border border-gray-300 rounded-md px-3 py-2 text-sm text-left hover:bg-gray-50 transition flex items-center justify-between",children:[e.jsx("span",{children:"範囲を校正"}),e.jsx(te,{className:"h-4 w-4"})]})]})]}):W?e.jsxs("aside",{className:"border border-gray-300 bg-white rounded-lg p-4 flex flex-col h-[794px] space-y-3",children:[e.jsxs("div",{className:"border border-gray-300 rounded-md bg-white",children:[e.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b border-gray-200",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"あらすじ"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:M,className:"text-gray-400 hover:text-gray-600 transition-colors","aria-label":"最小化",children:e.jsx(B,{className:"h-4 w-4"})}),e.jsx("button",{onClick:M,className:"text-gray-400 hover:text-gray-600 transition-colors","aria-label":"閉じる",children:e.jsx(I,{className:"h-4 w-4"})})]})]}),e.jsx("div",{className:"px-3 py-2 min-h-[80px]",children:e.jsx("textarea",{className:"w-full text-sm text-gray-700 border-none outline-none resize-none",placeholder:"あらすじを入力...",rows:3})})]}),e.jsxs("div",{className:"border border-gray-300 rounded-md bg-white",children:[e.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b border-gray-200",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"Note"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:M,className:"text-gray-400 hover:text-gray-600 transition-colors","aria-label":"最小化",children:e.jsx(B,{className:"h-4 w-4"})}),e.jsx("button",{onClick:M,className:"text-gray-400 hover:text-gray-600 transition-colors","aria-label":"閉じる",children:e.jsx(I,{className:"h-4 w-4"})})]})]}),e.jsx("div",{className:"px-3 py-2 min-h-[80px]",children:e.jsx("textarea",{className:"w-full text-sm text-gray-700 border-none outline-none resize-none",placeholder:"ノートを入力...",rows:3})})]}),e.jsxs("div",{className:"border border-gray-300 rounded-md bg-white",children:[e.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b border-gray-200",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"タグ"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:M,className:"text-gray-400 hover:text-gray-600 transition-colors","aria-label":"最小化",children:e.jsx(B,{className:"h-4 w-4"})}),e.jsx("button",{onClick:M,className:"text-gray-400 hover:text-gray-600 transition-colors","aria-label":"閉じる",children:e.jsx(I,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"px-3 py-2 flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"タグ"}),e.jsx("button",{className:"px-3 py-1 bg-yellow-200 hover:bg-yellow-300 rounded-md text-sm text-gray-700 transition-colors",children:"Main"}),e.jsx("button",{className:"px-3 py-1 border border-gray-300 hover:bg-gray-50 rounded-md text-sm text-gray-700 transition-colors",children:"+説明を追加"})]})]}),d.map(s=>e.jsxs("div",{className:"border border-gray-300 rounded-md bg-white",children:[e.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b border-gray-200",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"辞書"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:M,className:"text-gray-400 hover:text-gray-600 transition-colors","aria-label":"最小化",children:e.jsx(B,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>{w(d.filter(o=>o.id!==s.id))},className:"text-gray-400 hover:text-gray-600 transition-colors","aria-label":"閉じる",children:e.jsx(I,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"px-3 py-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:s.name}),e.jsx("p",{className:"text-sm text-gray-600",children:s.description})]})]},s.id)),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-auto",children:[e.jsx("button",{onClick:Y,className:"border border-gray-300 rounded-md px-3 py-2 text-sm text-left hover:bg-gray-50 transition",children:"＋ 文章の追加"}),e.jsx("button",{onClick:Q,className:"border border-gray-300 rounded-md px-3 py-2 text-sm text-left hover:bg-gray-50 transition",children:"＋ 辞書の追加"}),e.jsx("button",{onClick:ce,className:"border border-gray-300 rounded-md px-3 py-2 text-sm text-left hover:bg-gray-50 transition",children:"＋ タグの追加"}),e.jsxs("button",{onClick:Z,className:"border border-gray-300 rounded-md px-3 py-2 text-sm text-left hover:bg-gray-50 transition flex items-center justify-between",children:[e.jsx("span",{children:"範囲を校正"}),e.jsx(te,{className:"h-4 w-4"})]})]})]}):ne?e.jsxs("aside",{className:"border border-gray-300 bg-white rounded-lg p-4 flex flex-col min-h-[794px]",children:[e.jsxs("div",{className:"border border-gray-300 rounded-md bg-white mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b border-gray-200",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"タグ"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:be,className:"text-gray-400 hover:text-gray-600 transition-colors","aria-label":"最小化",children:e.jsx(B,{className:"h-4 w-4"})}),e.jsx("button",{onClick:be,className:"text-gray-400 hover:text-gray-600 transition-colors","aria-label":"閉じる",children:e.jsx(I,{className:"h-4 w-4"})})]})]}),e.jsx("div",{className:"px-3 py-2",children:e.jsx("p",{className:"text-sm text-gray-700",children:"main"})})]}),e.jsxs("div",{className:"flex-1 border border-gray-200 rounded-md bg-white p-4 mb-4 overflow-auto",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"追加されたファイルのプレビューが出る"}),e.jsx("div",{className:"min-h-[200px]",children:J?e.jsx("pre",{className:"text-sm text-gray-700 whitespace-pre-wrap font-mono",children:J}):e.jsx("p",{className:"text-sm text-gray-400",children:"プレビューがここに表示されます"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("button",{onClick:Y,className:"border border-gray-300 rounded-md px-3 py-2 text-sm text-left hover:bg-gray-50 transition",children:"＋ 文章の追加"}),e.jsx("button",{onClick:Q,className:"border border-gray-300 rounded-md px-3 py-2 text-sm text-left hover:bg-gray-50 transition",children:"＋ 辞書の追加"}),e.jsx("button",{onClick:Me,className:"border border-gray-300 rounded-md px-3 py-2 text-sm text-left hover:bg-gray-50 transition",children:"＋ タグの追加"}),e.jsxs("button",{onClick:Z,className:"border border-gray-300 rounded-md px-3 py-2 text-sm text-left hover:bg-gray-50 transition flex items-center justify-between",children:[e.jsx("span",{children:"範囲を校正"}),e.jsx(te,{className:"h-4 w-4"})]})]})]}):e.jsxs("aside",{className:"border border-gray-300 bg-white rounded-lg p-4 flex flex-col space-y-3 h-[794px]",children:[e.jsxs("div",{className:"border border-gray-300 rounded-md p-4 bg-white mb-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:"生成テキスト"}),e.jsx("div",{className:"min-h-[120px] max-h-[200px] overflow-auto",children:D?e.jsxs("div",{className:"flex items-center justify-center h-full",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-gray-400"}),e.jsx("span",{className:"ml-2 text-sm text-gray-500",children:"生成中..."})]}):v?e.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:v}):e.jsx("p",{className:"text-sm text-gray-400",children:"生成されたテキストがここに表示されることになります"})})]}),e.jsx("button",{onClick:Y,className:"w-full border border-gray-300 rounded-md px-4 py-3 text-sm text-left hover:bg-gray-50 transition",children:"＋ 文章の追加"}),e.jsx("button",{onClick:ce,className:"w-full border border-gray-300 rounded-md px-4 py-3 text-sm text-left hover:bg-gray-50 transition",children:"＋ タグの追加"}),e.jsx("button",{onClick:Q,className:"w-full border border-gray-300 rounded-md px-4 py-3 text-sm text-left hover:bg-gray-50 transition",children:"＋ 辞書の追加"}),e.jsxs("button",{onClick:Fe,className:"w-full border border-gray-300 rounded-md px-4 py-3 text-sm text-left hover:bg-gray-50 transition flex items-center",children:[e.jsx(ls,{className:"h-4 w-4 mr-2"})," 資料の検索"]}),e.jsxs("button",{onClick:Z,className:"w-full border border-gray-300 rounded-md px-4 py-3 text-sm text-left hover:bg-gray-50 transition flex items-center justify-between",children:[e.jsx("span",{children:"範囲を校正"}),e.jsx(te,{className:"h-4 w-4"})]})]})]})]}),e.jsx(Ss,{isOpen:b,onClose:()=>j(!1),onSave:Le}),e.jsx(Cs,{isOpen:C,onClose:()=>$(!1),onSave:Re,onNext:_e}),e.jsx(ks,{isOpen:ie,onClose:()=>V(!1),onSave:Ue,onNext:ze})]}):null},Es=({variant:l="info",title:t,message:a,onClose:r,className:n=""})=>{const c={success:{bg:"bg-green-50",border:"border-green-200",text:"text-green-800",icon:cs,iconColor:"text-green-600"},error:{bg:"bg-red-50",border:"border-red-200",text:"text-red-800",icon:os,iconColor:"text-red-600"},warning:{bg:"bg-yellow-50",border:"border-yellow-200",text:"text-yellow-800",icon:is,iconColor:"text-yellow-600"},info:{bg:"bg-blue-50",border:"border-blue-200",text:"text-blue-800",icon:ns,iconColor:"text-blue-600"}}[l],m=c.icon;return e.jsx("div",{className:`${c.bg} ${c.border} border rounded-lg p-4 ${n}`,role:"alert",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(m,{className:`${c.iconColor} h-5 w-5 mt-0.5 mr-3 flex-shrink-0`}),e.jsxs("div",{className:"flex-1",children:[t&&e.jsx("h3",{className:`${c.text} font-semibold mb-1`,children:t}),e.jsx("p",{className:`${c.text} text-sm`,children:a})]}),r&&e.jsx("button",{onClick:r,className:`${c.text} ml-4 flex-shrink-0 hover:opacity-75`,"aria-label":"Close",children:e.jsx(I,{className:"h-5 w-5"})})]})})},Ts=()=>{const[l,t]=x.useState(""),[a,r]=x.useState(""),[n,i]=x.useState(!1),[c,m]=x.useState(""),{signIn:p}=le(),h=he(),g=async b=>{b.preventDefault(),i(!0),m("");try{await p(l,a),h("/dashboard")}catch(j){m(j.message||"ログインに失敗しました")}finally{i(!1)}};return e.jsx("div",{className:"min-h-screen bg-white text-gray-900 flex items-center justify-center",children:e.jsx("div",{className:"w-full max-w-md px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"border border-gray-300 rounded-lg bg-white px-6 py-10 sm:px-12 sm:py-14 shadow-sm",children:[e.jsx("h1",{className:"text-lg font-semibold text-gray-800 mb-12 text-center",children:"あるかなライター"}),e.jsxs("div",{className:"w-full",children:[c&&e.jsx(Es,{variant:"error",message:c,onClose:()=>m(""),className:"mb-6"}),e.jsxs("form",{className:"space-y-6",onSubmit:g,children:[e.jsx(P,{label:"メールアドレス",type:"email",value:l,onChange:b=>t(b.target.value),placeholder:"pxr@example.com",required:!0}),e.jsx(P,{label:"パスワード",type:"password",value:a,onChange:b=>r(b.target.value),placeholder:"パスワードを入力",required:!0}),e.jsx(y,{type:"submit",className:"w-full",disabled:n,children:n?e.jsxs(e.Fragment,{children:[e.jsx(Pe,{size:"sm",className:"mr-2"}),"ログイン中..."]}):"ログイン"})]}),e.jsx("div",{className:"mt-4 text-sm text-center",children:e.jsx("a",{href:"#",className:"text-gray-700 underline hover:text-gray-900",children:"パスワード忘れた方はこちら"})})]}),e.jsxs("div",{className:"mt-24 sm:mt-28 flex flex-col items-center space-y-2 text-sm text-gray-600",children:[e.jsx(k,{to:"#",className:"underline hover:text-gray-800",children:"アルカナライター テスター希望はこちら"}),e.jsx(k,{to:"#",className:"underline hover:text-gray-800",children:"利用規約"}),e.jsx("p",{className:"text-xs uppercase tracking-wide",children:"PxR LLC."})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx(k,{to:"#",className:"text-xs text-gray-500 underline hover:text-gray-700",children:"フォームへリンク"})})]})})})},Os=()=>{const[l,t]=x.useState(""),[a,r]=x.useState(""),[n,i]=x.useState(""),[c,m]=x.useState(""),[p,h]=x.useState(!1),[g,b]=x.useState(!1),[j,C]=x.useState(!1),[$,N]=x.useState(""),{signUp:E}=le(),T=he(),O=async v=>{if(v.preventDefault(),C(!0),N(""),a!==n){N("パスワードが一致しません"),C(!1);return}if(a.length<6){N("パスワードは6文字以上で入力してください"),C(!1);return}try{await E(l,a,c),T("/dashboard")}catch(R){N(R.message||"アカウント作成に失敗しました")}finally{C(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx(xe,{className:"h-12 w-12 text-primary-600"})}),e.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:"新規アカウント作成"}),e.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["または"," ",e.jsx(k,{to:"/login",className:"font-medium text-primary-600 hover:text-primary-500",children:"既存のアカウントでログイン"})]})]}),e.jsxs("form",{className:"mt-8 space-y-6",onSubmit:O,children:[$&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-md text-sm",children:$}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(P,{label:"表示名",type:"text",value:c,onChange:v=>m(v.target.value),placeholder:"あなたの名前",required:!0}),e.jsx(P,{label:"メールアドレス",type:"email",value:l,onChange:v=>t(v.target.value),placeholder:"your@email.com",required:!0}),e.jsxs("div",{className:"relative",children:[e.jsx(P,{label:"パスワード",type:p?"text":"password",value:a,onChange:v=>r(v.target.value),placeholder:"パスワードを入力（6文字以上）",required:!0}),e.jsx("button",{type:"button",className:"absolute right-3 top-8 text-gray-400 hover:text-gray-600",onClick:()=>h(!p),children:p?e.jsx(je,{className:"h-5 w-5"}):e.jsx(Ne,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"relative",children:[e.jsx(P,{label:"パスワード確認",type:g?"text":"password",value:n,onChange:v=>i(v.target.value),placeholder:"パスワードを再入力",required:!0}),e.jsx("button",{type:"button",className:"absolute right-3 top-8 text-gray-400 hover:text-gray-600",onClick:()=>b(!g),children:g?e.jsx(je,{className:"h-5 w-5"}):e.jsx(Ne,{className:"h-5 w-5"})})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"terms",name:"terms",type:"checkbox",required:!0,className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),e.jsxs("label",{htmlFor:"terms",className:"ml-2 block text-sm text-gray-900",children:[e.jsx(k,{to:"#",className:"text-primary-600 hover:text-primary-500",children:"利用規約"}),"と",e.jsx(k,{to:"#",className:"text-primary-600 hover:text-primary-500",children:"プライバシーポリシー"}),"に同意します"]})]}),e.jsx("div",{children:e.jsx(y,{type:"submit",className:"w-full",disabled:j,children:j?"アカウント作成中...":"アカウントを作成"})}),e.jsx("div",{className:"text-center",children:e.jsx(k,{to:"/",className:"text-sm text-gray-600 hover:text-gray-500",children:"ホームに戻る"})})]})]})})};function Ds(){return e.jsx(ps,{children:e.jsx("div",{className:"min-h-screen bg-white",children:e.jsx(Xe,{children:e.jsxs(K,{path:"/",element:e.jsx(bs,{}),children:[e.jsx(K,{index:!0,element:e.jsx(ys,{})}),e.jsx(K,{path:"login",element:e.jsx(Ts,{})}),e.jsx(K,{path:"register",element:e.jsx(Os,{})}),e.jsx(K,{path:"editor",element:e.jsx(ws,{})}),e.jsx(K,{path:"dashboard",element:e.jsx($s,{})})]})})})})}me.createRoot(document.getElementById("root")).render(e.jsx(u.StrictMode,{children:e.jsx(Ye,{children:e.jsx(Ds,{})})}));
//# sourceMappingURL=index-ICrMyV-L.js.map
