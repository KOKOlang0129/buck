var _n=Object.defineProperty;var Ar=j=>{throw TypeError(j)};var vn=(j,r,e)=>r in j?_n(j,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):j[r]=e;var ye=(j,r,e)=>vn(j,typeof r!="symbol"?r+"":r,e),kn=(j,r,e)=>r.has(j)||Ar("Cannot "+e);var Cr=(j,r,e)=>r.has(j)?Ar("Cannot add the same private member more than once"):r instanceof WeakSet?r.add(j):r.set(j,e);var Rt=(j,r,e)=>(kn(j,r,"access private method"),e);import{r as pe,a as Sn,b as ge,c as Ot,g as jn}from"./vendor-Q3K9tvtn.js";import{O as Nn,L as Ge,u as En,a as dr,R as Tn,b as wt,B as An}from"./router-CLPH4LyO.js";import{B as nr,S as $t,U as Cn,a as In,C as Rn,D as Yr,b as On,P as Kr,X as Ve,A as Xr,c as zn,L as Dn,d as zt,M as Dt,e as Ln,I as Pn,f as Mn,g as Bn,h as Un,E as Ir,i as Rr}from"./ui-C82DYxJ2.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))t(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const n of s.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&t(n)}).observe(document,{childList:!0,subtree:!0});function e(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function t(i){if(i.ep)return;i.ep=!0;const s=e(i);fetch(i.href,s)}})();var Vr={exports:{}},Gt={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fn=pe,$n=Symbol.for("react.element"),Wn=Symbol.for("react.fragment"),Hn=Object.prototype.hasOwnProperty,Zn=Fn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Gn={key:!0,ref:!0,__self:!0,__source:!0};function Jr(j,r,e){var t,i={},s=null,n=null;e!==void 0&&(s=""+e),r.key!==void 0&&(s=""+r.key),r.ref!==void 0&&(n=r.ref);for(t in r)Hn.call(r,t)&&!Gn.hasOwnProperty(t)&&(i[t]=r[t]);if(j&&j.defaultProps)for(t in r=j.defaultProps,r)i[t]===void 0&&(i[t]=r[t]);return{$$typeof:$n,type:j,key:s,ref:n,props:i,_owner:Zn.current}}Gt.Fragment=Wn;Gt.jsx=Jr;Gt.jsxs=Jr;Vr.exports=Gt;var a=Vr.exports,sr={},Or=Sn;sr.createRoot=Or.createRoot,sr.hydrateRoot=Or.hydrateRoot;const Qr=pe.createContext(void 0),qt=()=>{const j=pe.useContext(Qr);if(j===void 0)throw new Error("useAuth must be used within an AuthProvider");return j},qn=({children:j})=>{const[r,e]=pe.useState(null),[t,i]=pe.useState(!0);pe.useEffect(()=>{const m=localStorage.getItem("mockUser");m&&e(JSON.parse(m)),i(!1)},[]);const f={user:r,loading:t,signIn:async(m,g)=>{const b={uid:"mock-user-id",email:m,displayName:m.split("@")[0],photoURL:null};e(b),localStorage.setItem("mockUser",JSON.stringify(b))},signUp:async(m,g,b)=>{const h={uid:"mock-user-id",email:m,displayName:b,photoURL:null};e(h),localStorage.setItem("mockUser",JSON.stringify(h))},signOut:async()=>{e(null),localStorage.removeItem("mockUser")},signInWithGoogle:async()=>{const m={uid:"mock-google-user-id",email:"user@gmail.com",displayName:"Google User",photoURL:"https://via.placeholder.com/40"};e(m),localStorage.setItem("mockUser",JSON.stringify(m))}};return a.jsx(Qr.Provider,{value:f,children:j})},Yn=()=>a.jsx("div",{className:"min-h-screen",children:a.jsx(Nn,{})});function en(j){var r,e,t="";if(typeof j=="string"||typeof j=="number")t+=j;else if(typeof j=="object")if(Array.isArray(j)){var i=j.length;for(r=0;r<i;r++)j[r]&&(e=en(j[r]))&&(t&&(t+=" "),t+=e)}else for(e in j)j[e]&&(t&&(t+=" "),t+=e);return t}function hr(){for(var j,r,e=0,t="",i=arguments.length;e<i;e++)(j=arguments[e])&&(r=en(j))&&(t&&(t+=" "),t+=r);return t}const Re=({variant:j="primary",size:r="md",children:e,className:t,...i})=>{const s="inline-flex items-center justify-center rounded-lg font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none",n={primary:"bg-primary-600 text-white hover:bg-primary-700 focus:ring-primary-500",secondary:"bg-gray-600 text-white hover:bg-gray-700 focus:ring-gray-500",outline:"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 focus:ring-primary-500",ghost:"text-gray-700 hover:bg-gray-100 focus:ring-primary-500"},o={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"};return a.jsx("button",{className:hr(s,n[j],o[r],t),...i,children:e})},Kn=()=>a.jsxs("div",{className:"min-h-screen",children:[a.jsx("header",{className:"bg-white/80 backdrop-blur-sm border-b border-gray-200 sticky top-0 z-50",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex justify-between items-center h-16",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(nr,{className:"h-8 w-8 text-primary-600"}),a.jsx("span",{className:"text-xl font-bold text-gray-900",children:"Arcana Editor"})]}),a.jsxs("nav",{className:"hidden md:flex space-x-8",children:[a.jsx(Ge,{to:"/editor",className:"text-gray-600 hover:text-primary-600 transition-colors",children:"エディター"}),a.jsx(Ge,{to:"/dashboard",className:"text-gray-600 hover:text-primary-600 transition-colors",children:"ダッシュボード"})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx(Ge,{to:"/login",children:a.jsx(Re,{variant:"outline",size:"sm",children:"ログイン"})}),a.jsx(Ge,{to:"/register",children:a.jsx(Re,{size:"sm",children:"新規登録"})})]})]})})}),a.jsx("section",{className:"pt-20 pb-16 px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"max-w-7xl mx-auto text-center",children:[a.jsxs("h1",{className:"text-4xl md:text-6xl font-bold text-gray-900 mb-6",children:["AIが支援する",a.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-primary-600 to-purple-600",children:"シナリオエディター"})]}),a.jsx("p",{className:"text-xl text-gray-600 mb-8 max-w-3xl mx-auto",children:"クリエイティブな物語をAIの力でより豊かに。直感的なエディターで、あなたの想像力を現実に。"}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[a.jsx(Ge,{to:"/editor",children:a.jsxs(Re,{size:"lg",className:"w-full sm:w-auto",children:[a.jsx($t,{className:"mr-2 h-5 w-5"}),"エディターを始める"]})}),a.jsx("a",{href:"#features",children:a.jsx(Re,{variant:"outline",size:"lg",className:"w-full sm:w-auto",children:"機能を見る"})})]})]})}),a.jsx("section",{id:"features",className:"py-16 px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"text-center mb-16",children:[a.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"主な機能"}),a.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"AIの力を借りて、より良いシナリオを作成しましょう"})]}),a.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[a.jsxs("div",{className:"bg-white rounded-xl p-8 shadow-lg hover:shadow-xl transition-shadow",children:[a.jsx("div",{className:"bg-primary-100 w-16 h-16 rounded-lg flex items-center justify-center mb-6",children:a.jsx($t,{className:"h-8 w-8 text-primary-600"})}),a.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"AI補完機能"}),a.jsx("p",{className:"text-gray-600",children:"物語の続きをAIが提案。創作の手が止まった時も、AIがあなたの創作活動をサポートします。"})]}),a.jsxs("div",{className:"bg-white rounded-xl p-8 shadow-lg hover:shadow-xl transition-shadow",children:[a.jsx("div",{className:"bg-primary-100 w-16 h-16 rounded-lg flex items-center justify-center mb-6",children:a.jsx(Cn,{className:"h-8 w-8 text-primary-600"})}),a.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"コラボレーション"}),a.jsx("p",{className:"text-gray-600",children:"チームでの共同編集が可能。リアルタイムで複数人でのシナリオ作成をサポートします。"})]}),a.jsxs("div",{className:"bg-white rounded-xl p-8 shadow-lg hover:shadow-xl transition-shadow",children:[a.jsx("div",{className:"bg-primary-100 w-16 h-16 rounded-lg flex items-center justify-center mb-6",children:a.jsx(In,{className:"h-8 w-8 text-primary-600"})}),a.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"セキュアな保存"}),a.jsx("p",{className:"text-gray-600",children:"Firebaseの強力なセキュリティで、あなたの作品を安全に保存・管理します。"})]})]})]})}),a.jsx("footer",{className:"bg-gray-900 text-white py-12 px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"max-w-7xl mx-auto text-center",children:[a.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[a.jsx(nr,{className:"h-6 w-6"}),a.jsx("span",{className:"text-lg font-semibold",children:"Arcana Editor"})]}),a.jsx("p",{className:"text-gray-400",children:"© 2025 Arcana Editor. All rights reserved."})]})})]}),ur=ge.forwardRef(({label:j,error:r,helperText:e,className:t,id:i,...s},n)=>{const o=i||`textarea-${Math.random().toString(36).substr(2,9)}`;return a.jsxs("div",{className:"w-full",children:[j&&a.jsx("label",{htmlFor:o,className:"block text-sm font-medium text-gray-700 mb-2",children:j}),a.jsx("textarea",{ref:n,id:o,className:hr("w-full px-3 py-2 border rounded-lg shadow-sm transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 resize-vertical",r?"border-red-300 focus:ring-red-500":"border-gray-300 focus:ring-primary-500",t),...s}),r&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:r}),e&&!r&&a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:e})]})}),tt=({label:j,error:r,helperText:e,className:t,id:i,...s})=>{const n=i||`input-${Math.random().toString(36).substr(2,9)}`;return a.jsxs("div",{className:"w-full",children:[j&&a.jsx("label",{htmlFor:n,className:"block text-sm font-medium text-gray-700 mb-2",children:j}),a.jsx("input",{id:n,className:hr("w-full px-3 py-2 border rounded-lg shadow-sm transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2",r?"border-red-300 focus:ring-red-500":"border-gray-300 focus:ring-primary-500",t),...s}),r&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:r}),e&&!r&&a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:e})]})},tn=({size:j="md",className:r=""})=>{const e={sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"};return a.jsx("div",{className:`flex items-center justify-center ${r}`,children:a.jsx("div",{className:`${e[j]} animate-spin rounded-full border-b-2 border-primary-600`})})},Xn=["主人公は立ち上がり、決意を込めて言った。","その時、不思議な光が現れて、状況を一変させた。","彼女の心に新しい希望が芽生え始めていた。","謎めいた影が近づいてくる。","突然、雷鳴が轟き、空が暗くなった。","古い城の扉がきしみながら開いた。","魔法の剣が光り始めた。","風が物語を運んでくる。","星が瞬いて、新しい冒険を予感させる。","時間が止まったような静寂が訪れた。"],Tt=new Map,zr=[{id:"proj-001",name:"冒険の始まり",main:"冒険の始まり.md",ai_policy:{read:"allow",quote:"internal",write:"deny",scope:["local"],until:null},texts:[{id:"t-main",path:"texts/冒険の始まり.md",tags:["overview"]}],tags:["冒険","ファンタジー","魔法"],tag_docs:{},libraly:["辞書"],lib_docs:{辞書:{path:"tags/辞書.md"}}},{id:"proj-002",name:"謎の遺跡",main:"謎の遺跡.md",ai_policy:{read:"allow",quote:"internal",write:"deny",scope:["local"],until:null},texts:[{id:"t-main",path:"texts/謎の遺跡.md",tags:["mystery"]}],tags:["ミステリー","古代","考古学"],tag_docs:{},libraly:["辞書"],lib_docs:{辞書:{path:"tags/辞書.md"}}},{id:"proj-003",name:"宇宙の旅人",main:"宇宙の旅人.md",ai_policy:{read:"allow",quote:"internal",write:"deny",scope:["local"],until:null},texts:[{id:"t-main",path:"texts/宇宙の旅人.md",tags:["sf"]}],tags:["SF","宇宙","冒険"],tag_docs:{},libraly:["辞書"],lib_docs:{辞書:{path:"tags/辞書.md"}}}];Tt.set("proj-001",new Map([["t-main",`主人公のアレックスは小さな村で平凡な生活を送っていた。毎日同じような日々が続き、何か変化を求めていた。

ある朝、村の外れで不思議な光を発する石を発見した。その石に触れた瞬間、世界が一変した。

「これは...魔法の石？」アレックスは呟いた。

その時、石から声が聞こえてきた。「選ばれし者よ、君の冒険が今始まる...」`]]));Tt.set("proj-002",new Map([["t-main",`考古学者のサラは古代の遺跡で不思議な発見をした。壁に刻まれた文字は、これまで見たことのない言語だった。

「この文字...古代エジプトとも、マヤ文明とも違う」サラは顕微鏡で文字を詳しく調べた。

突然、遺跡の奥から光が差し込んだ。それは自然光ではない。人工的な光だった。

「誰かいるのか？」サラは懐中電灯を手に取り、光の方向へ歩き始めた。`]]));Tt.set("proj-003",new Map([["t-main",`宇宙船パイオニア号は未知の惑星に向かっていた。船長のケンは地球を離れてから3年が経過していた。

「地球からの最後の通信から6ヶ月が経った」ケンは航海日誌に記録した。

その時、船の警報システムが作動した。「未知の物体が接近中」という警告音が響いた。

ケンはスクリーンを見つめた。そこには、これまで見たことのない巨大な宇宙船が映し出されていた。`]]));class Vn{constructor(){ye(this,"projects",[...zr]);ye(this,"projectTextContents",new Map(Tt));ye(this,"projectDictionaries",new Map);ye(this,"scenarios",[]);this.projects=[...zr],this.projectTextContents=new Map(Tt),this.loadFromLocalStorage()}projectToScenario(r,e){var n;const t=((n=r.texts[0])==null?void 0:n.id)||"t-main",i=this.getProjectTextContent(r.id,t)||"",s=this.getProjectDictionary(r.id);return{id:r.id,title:r.name,content:i,createdAt:new Date,updatedAt:new Date,tags:r.tags||[],isPublic:!0,authorId:e,dictionaryEntries:s}}getProjectTextContent(r,e){const t=this.projectTextContents.get(r);return(t==null?void 0:t.get(e))||null}setProjectTextContent(r,e,t){this.projectTextContents.has(r)||this.projectTextContents.set(r,new Map),this.projectTextContents.get(r).set(e,t)}getProject(r){return this.projects.find(e=>e.id===r)||null}getUserProjects(r){return this.projects}getUserScenarios(r){return this.getUserProjects(r).map(t=>this.projectToScenario(t,r))}getScenario(r){const e=this.getProject(r);return e?this.projectToScenario(e,"mock-user-id"):null}createScenario(r){const e=`proj-${Date.now()}`,t="t-main",i={id:e,name:r.title,main:`${r.title}.md`,ai_policy:{read:"allow",quote:"internal",write:"deny",scope:["local"],until:null},texts:[{id:t,path:`texts/${r.title}.md`,tags:[]}],tags:r.tags||[],tag_docs:{},libraly:r.dictionaryEntries&&r.dictionaryEntries.length>0?["辞書"]:void 0,lib_docs:r.dictionaryEntries&&r.dictionaryEntries.length>0?{辞書:{path:"tags/辞書.md"}}:void 0};return this.projects.push(i),this.setProjectTextContent(e,t,r.content),r.dictionaryEntries&&r.dictionaryEntries.length>0&&this.projectDictionaries.set(e,r.dictionaryEntries),this.saveToLocalStorage(),e}updateScenario(r,e){var i;const t=this.getProject(r);if(t){if(e.title&&(t.name=e.title,t.main=`${e.title}.md`),e.tags&&(t.tags=e.tags),e.content!==void 0){const s=((i=t.texts[0])==null?void 0:i.id)||"t-main";this.setProjectTextContent(r,s,e.content)}e.dictionaryEntries&&(this.projectDictionaries.set(r,e.dictionaryEntries),e.dictionaryEntries.length>0?(t.libraly=["辞書"],t.lib_docs={辞書:{path:"tags/辞書.md"}}):(t.libraly=void 0,t.lib_docs=void 0)),this.saveToLocalStorage()}}addDictionaryEntry(r,e){if(!this.getProject(r))return null;const i={id:Date.now().toString(),...e,createdAt:new Date},s=this.projectDictionaries.get(r)||[];return this.projectDictionaries.set(r,[...s,i]),this.saveToLocalStorage(),i}removeDictionaryEntry(r,e){const t=this.projectDictionaries.get(r)||[];this.projectDictionaries.set(r,t.filter(i=>i.id!==e)),this.saveToLocalStorage()}updateDictionaryEntry(r,e,t){const s=(this.projectDictionaries.get(r)||[]).map(n=>n.id===e?{...n,term:t.term,description:t.description}:n);return this.projectDictionaries.set(r,s),this.saveToLocalStorage(),s.find(n=>n.id===e)??null}getProjectDictionary(r){return this.projectDictionaries.get(r)||[]}deleteScenario(r){this.scenarios=this.scenarios.filter(e=>e.id!==r),this.saveToLocalStorage()}getPublicScenarios(){return this.scenarios.filter(r=>r.isPublic)}generateAISuggestions(){return[...Xn].sort(()=>.5-Math.random()).slice(0,5)}loadFromLocalStorage(){const r=localStorage.getItem("mockProjects");if(r)try{this.projects=JSON.parse(r)}catch(i){console.error("Error loading projects from localStorage:",i)}const e=localStorage.getItem("mockProjectTextContents");if(e)try{const i=JSON.parse(e);this.projectTextContents=new Map(Object.entries(i).map(([s,n])=>[s,new Map(Object.entries(n))]))}catch(i){console.error("Error loading project text contents from localStorage:",i)}const t=localStorage.getItem("mockProjectDictionaries");if(t)try{const i=JSON.parse(t);this.projectDictionaries=new Map(Object.entries(i).map(([s,n])=>[s,n.map(o=>({...o,createdAt:new Date(o.createdAt)}))]))}catch(i){console.error("Error loading project dictionaries from localStorage:",i)}}saveToLocalStorage(){localStorage.setItem("mockProjects",JSON.stringify(this.projects));const r={};this.projectTextContents.forEach((t,i)=>{r[i]=Object.fromEntries(t)}),localStorage.setItem("mockProjectTextContents",JSON.stringify(r));const e={};this.projectDictionaries.forEach((t,i)=>{e[i]=t}),localStorage.setItem("mockProjectDictionaries",JSON.stringify(e))}}const Be=new Vn,Jn=({initialContent:j="",onSave:r})=>{const{user:e}=qt(),[t,i]=pe.useState(j),[s,n]=pe.useState(""),[o,c]=pe.useState([]),[f,m]=pe.useState(""),[g,b]=pe.useState(!1),[h,y]=pe.useState([]),[u,w]=pe.useState(!1),[p,v]=pe.useState(0),[S,A]=pe.useState(null),T=pe.useRef(null),U=async()=>{w(!0);try{await new Promise(se=>setTimeout(se,1500));const R=Be.generateAISuggestions();y(R)}catch(R){console.error("AI completion error:",R)}finally{w(!1)}},M=R=>{i(R.target.value),v(R.target.selectionStart)},G=()=>{T.current&&v(T.current.selectionStart)},L=R=>{const se=t.substring(0,p),W=t.substring(p),ce=se+R+W;i(ce),y([]),setTimeout(()=>{if(T.current){const Z=p+R.length;T.current.focus(),T.current.setSelectionRange(Z,Z)}},100)},K=()=>{f.trim()&&!o.includes(f.trim())&&(c([...o,f.trim()]),m(""))},ee=R=>{c(o.filter(se=>se!==R))},k=()=>{if(!e){alert("ログインが必要です");return}try{if(S)Be.updateScenario(S,{title:s,content:t,tags:o,isPublic:g});else{const R=Be.createScenario({title:s||"無題のシナリオ",content:t,tags:o,isPublic:g,authorId:e.uid});A(R)}r&&r({title:s,content:t,tags:o,isPublic:g}),alert("シナリオが保存されました！")}catch(R){console.error("Save error:",R),alert("保存に失敗しました")}},P=async()=>{try{await navigator.clipboard.writeText(t),alert("クリップボードにコピーしました")}catch(R){console.error("Copy failed:",R)}},d=()=>{const R=JSON.stringify({title:s,content:t,tags:o,isPublic:g,timestamp:new Date().toISOString()},null,2),se=new Blob([R],{type:"application/json"}),W=URL.createObjectURL(se),ce=document.createElement("a");ce.href=W,ce.download=`${s||"scenario"}.json`,ce.click(),URL.revokeObjectURL(W)};return a.jsxs("div",{className:"max-w-5xl mx-auto p-4 sm:p-6 lg:p-8 space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[a.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"シナリオエディター"}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsxs(Re,{variant:"outline",size:"sm",onClick:P,className:"flex-1 sm:flex-none",children:[a.jsx(Rn,{className:"h-4 w-4 mr-2"}),"コピー"]}),a.jsxs(Re,{variant:"outline",size:"sm",onClick:d,className:"flex-1 sm:flex-none",children:[a.jsx(Yr,{className:"h-4 w-4 mr-2"}),"エクスポート"]}),a.jsxs(Re,{size:"sm",onClick:k,className:"flex-1 sm:flex-none",children:[a.jsx(On,{className:"h-4 w-4 mr-2"}),"保存"]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(tt,{label:"タイトル",value:s,onChange:R=>n(R.target.value),placeholder:"シナリオのタイトルを入力"}),a.jsx("div",{className:"flex items-center space-x-4",children:a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:g,onChange:R=>b(R.target.checked),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),a.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"公開"})]})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"タグ"}),a.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:o.map((R,se)=>a.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-primary-100 text-primary-800",children:[R,a.jsx("button",{onClick:()=>ee(R),className:"ml-2 text-primary-600 hover:text-primary-800",children:"×"})]},se))}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx(tt,{value:f,onChange:R=>m(R.target.value),placeholder:"新しいタグを入力",onKeyPress:R=>R.key==="Enter"&&K()}),a.jsx(Re,{variant:"outline",onClick:K,children:a.jsx(Kr,{className:"h-4 w-4"})})]})]}),a.jsxs("div",{className:"bg-gradient-to-r from-purple-50 via-blue-50 to-indigo-50 p-6 rounded-xl border border-purple-100 shadow-sm",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4 gap-4",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[a.jsx($t,{className:"h-5 w-5 mr-2 text-purple-600 animate-pulse"}),"AI補完"]}),a.jsx(Re,{variant:"outline",size:"sm",onClick:()=>U(),disabled:u,className:"w-full sm:w-auto",children:u?a.jsxs(a.Fragment,{children:[a.jsx(tn,{size:"sm",className:"mr-2"}),"生成中..."]}):a.jsxs(a.Fragment,{children:[a.jsx($t,{className:"h-4 w-4 mr-2"}),"続きを生成"]})})]}),h.length>0&&a.jsxs("div",{className:"space-y-3 mt-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-700",children:"以下の提案から選択してください："}),a.jsx("div",{className:"grid gap-3",children:h.map((R,se)=>a.jsx("div",{className:"bg-white p-4 rounded-lg border-2 border-purple-200 hover:border-purple-400 cursor-pointer transition-all shadow-sm hover:shadow-md",onClick:()=>L(R),children:a.jsx("p",{className:"text-gray-800 leading-relaxed",children:R})},se))})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"シナリオ内容"}),a.jsx(ur,{ref:T,value:t,onChange:M,onSelect:G,onFocus:G,placeholder:"シナリオの内容を入力してください...",className:"min-h-96 font-mono text-base leading-relaxed"}),a.jsxs("div",{className:"mt-2 text-sm text-gray-500",children:["文字数: ",t.length," | カーソル位置: ",p]})]}),a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"統計情報"}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"文字数:"}),a.jsx("span",{className:"ml-2 font-medium",children:t.length})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"単語数:"}),a.jsx("span",{className:"ml-2 font-medium",children:t.split(/\s+/).filter(R=>R.length>0).length})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"行数:"}),a.jsx("span",{className:"ml-2 font-medium",children:t.split(`
`).length})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"段落数:"}),a.jsx("span",{className:"ml-2 font-medium",children:t.split(`

`).filter(R=>R.trim().length>0).length})]})]})]})]})},Qn=()=>{const[j]=En(),[r,e]=pe.useState(""),t=j.get("id");pe.useEffect(()=>{if(t){const s=Be.getScenario(t);s&&e(s.content)}},[t]);const i=s=>{console.log("Saving scenario:",s)};return a.jsx("div",{className:"min-h-screen",children:a.jsx(Jn,{initialContent:r,onSave:i})})},es=({isOpen:j,onClose:r,onSave:e})=>{const[t,i]=pe.useState(""),[s,n]=pe.useState(!1),[o,c]=pe.useState(!1);pe.useEffect(()=>{if(j){const m=localStorage.getItem("apiKey")||"",g=localStorage.getItem("useShortcutKeys")==="true",b=localStorage.getItem("dontSaveAIHistory")==="true";i(m),n(g),c(b)}},[j]);const f=()=>{const m={apiKey:t,useShortcutKeys:s,dontSaveAIHistory:o};localStorage.setItem("apiKey",t),localStorage.setItem("useShortcutKeys",s.toString()),localStorage.setItem("dontSaveAIHistory",o.toString()),e(m),r()};return j?a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:a.jsxs("div",{className:"bg-blue-50 border-2 border-gray-300 rounded-lg shadow-xl w-full max-w-lg mx-4 p-8 relative",children:[a.jsx("button",{onClick:r,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700 transition-colors","aria-label":"閉じる",children:a.jsx(Ve,{className:"h-5 w-5"})}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"APIキーの入力"}),a.jsx("div",{className:"mb-6",children:a.jsx(tt,{type:"password",value:t,onChange:m=>i(m.target.value),placeholder:"APIキーを入力してください",className:"w-full h-12 text-base"})}),a.jsxs("div",{className:"space-y-4 mb-6",children:[a.jsxs("label",{className:"flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:s,onChange:m=>n(m.target.checked),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),a.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"ショートカットキーを使用する"})]}),a.jsxs("label",{className:"flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:o,onChange:m=>c(m.target.checked),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),a.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"AIの履歴を保存しない"})]})]}),a.jsx("div",{className:"flex justify-center",children:a.jsx(Re,{onClick:f,className:"px-8",children:"設定を保存"})})]})}):null},ts=({isOpen:j,onClose:r,onSave:e,onNext:t})=>{const[i,s]=pe.useState(""),n=()=>{i.trim()&&(e(i),s(""),r())},o=()=>{i.trim()&&(t?(t(i),s(""),r()):n())},c=()=>{s(""),r()};return j?a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:a.jsxs("div",{className:"bg-blue-50 border-2 border-gray-300 rounded-lg shadow-xl w-full max-w-2xl mx-4 p-6 relative",children:[a.jsx("button",{onClick:c,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700 transition-colors","aria-label":"閉じる",children:a.jsx(Ve,{className:"h-5 w-5"})}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"プロンプト入力"}),a.jsx("div",{className:"mb-6",children:a.jsx(ur,{value:i,onChange:f=>s(f.target.value),placeholder:"プロンプトを入力してください...",className:"w-full min-h-[300px] text-base resize-none"})}),a.jsxs("div",{className:"flex justify-between gap-4",children:[a.jsx(Re,{onClick:n,variant:"outline",className:"flex-1 border border-gray-300 hover:border-gray-400",disabled:!i.trim(),children:"テキストを保存"}),a.jsxs(Re,{onClick:o,className:"flex-1",disabled:!i.trim(),children:[a.jsx(Xr,{className:"h-4 w-4 mr-2"}),"次へ"]})]})]})}):null},rs=({isOpen:j,onClose:r,onSave:e,onNext:t,mode:i="create",initialEntry:s})=>{const[n,o]=pe.useState(""),[c,f]=pe.useState("");ge.useEffect(()=>{j&&(o((s==null?void 0:s.term)??""),f((s==null?void 0:s.description)??""))},[j,s]);const m=()=>{n.trim()&&c.trim()&&(e({term:n,description:c}),o(""),f(""),r())},g=()=>{if(i==="edit"||!t){m();return}n.trim()&&c.trim()&&(t({term:n,description:c}),o(""),f(""),r())},b=()=>{o(""),f(""),r()};return j?a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:a.jsxs("div",{className:"bg-blue-50 rounded-lg shadow-xl w-full max-w-2xl mx-4 p-6 relative",children:[a.jsx("button",{onClick:b,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700 transition-colors","aria-label":"閉じる",children:a.jsx(Ve,{className:"h-5 w-5"})}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:i==="edit"?"辞書エントリの編集":"辞書エントリの追加"}),a.jsxs("div",{className:"space-y-4 mb-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"用語"}),a.jsx(tt,{value:n,onChange:h=>o(h.target.value),placeholder:"例: 魔法石"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"詳細"}),a.jsx(ur,{value:c,onChange:h=>f(h.target.value),placeholder:"用語の説明や背景を入力してください...",className:"w-full min-h-[220px] text-base resize-none bg-blue-50"})]})]}),a.jsxs("div",{className:"flex justify-between gap-4",children:[a.jsx(Re,{onClick:m,variant:"outline",className:"flex-1 border border-gray-300 hover:border-gray-400",disabled:!n.trim()||!c.trim(),children:i==="edit"?"更新する":"テキストを保存"}),i==="create"&&t&&a.jsx(Re,{onClick:g,className:"flex-1",disabled:!n.trim()||!c.trim(),children:a.jsx(Xr,{className:"h-4 w-4 mr-2"})})]})]})}):null};function fr(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let gt=fr();function rn(j){gt=j}const nn=/[&<>"']/,ns=new RegExp(nn.source,"g"),sn=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,ss=new RegExp(sn.source,"g"),is={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Dr=j=>is[j];function Ze(j,r){if(r){if(nn.test(j))return j.replace(ns,Dr)}else if(sn.test(j))return j.replace(ss,Dr);return j}const as=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function os(j){return j.replace(as,(r,e)=>(e=e.toLowerCase(),e==="colon"?":":e.charAt(0)==="#"?e.charAt(1)==="x"?String.fromCharCode(parseInt(e.substring(2),16)):String.fromCharCode(+e.substring(1)):""))}const ls=/(^|[^\[])\^/g;function ke(j,r){let e=typeof j=="string"?j:j.source;r=r||"";const t={replace:(i,s)=>{let n=typeof s=="string"?s:s.source;return n=n.replace(ls,"$1"),e=e.replace(i,n),t},getRegex:()=>new RegExp(e,r)};return t}function Lr(j){try{j=encodeURI(j).replace(/%25/g,"%")}catch{return null}return j}const Nt={exec:()=>null};function Pr(j,r){const e=j.replace(/\|/g,(s,n,o)=>{let c=!1,f=n;for(;--f>=0&&o[f]==="\\";)c=!c;return c?"|":" |"}),t=e.split(/ \|/);let i=0;if(t[0].trim()||t.shift(),t.length>0&&!t[t.length-1].trim()&&t.pop(),r)if(t.length>r)t.splice(r);else for(;t.length<r;)t.push("");for(;i<t.length;i++)t[i]=t[i].trim().replace(/\\\|/g,"|");return t}function Lt(j,r,e){const t=j.length;if(t===0)return"";let i=0;for(;i<t&&j.charAt(t-i-1)===r;)i++;return j.slice(0,t-i)}function cs(j,r){if(j.indexOf(r[1])===-1)return-1;let e=0;for(let t=0;t<j.length;t++)if(j[t]==="\\")t++;else if(j[t]===r[0])e++;else if(j[t]===r[1]&&(e--,e<0))return t;return-1}function Mr(j,r,e,t){const i=r.href,s=r.title?Ze(r.title):null,n=j[1].replace(/\\([\[\]])/g,"$1");if(j[0].charAt(0)!=="!"){t.state.inLink=!0;const o={type:"link",raw:e,href:i,title:s,text:n,tokens:t.inlineTokens(n)};return t.state.inLink=!1,o}return{type:"image",raw:e,href:i,title:s,text:Ze(n)}}function ds(j,r){const e=j.match(/^(\s+)(?:```)/);if(e===null)return r;const t=e[1];return r.split(`
`).map(i=>{const s=i.match(/^\s+/);if(s===null)return i;const[n]=s;return n.length>=t.length?i.slice(t.length):i}).join(`
`)}class Wt{constructor(r){ye(this,"options");ye(this,"rules");ye(this,"lexer");this.options=r||gt}space(r){const e=this.rules.block.newline.exec(r);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(r){const e=this.rules.block.code.exec(r);if(e){const t=e[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?t:Lt(t,`
`)}}}fences(r){const e=this.rules.block.fences.exec(r);if(e){const t=e[0],i=ds(t,e[3]||"");return{type:"code",raw:t,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:i}}}heading(r){const e=this.rules.block.heading.exec(r);if(e){let t=e[2].trim();if(/#$/.test(t)){const i=Lt(t,"#");(this.options.pedantic||!i||/ $/.test(i))&&(t=i.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:t,tokens:this.lexer.inline(t)}}}hr(r){const e=this.rules.block.hr.exec(r);if(e)return{type:"hr",raw:e[0]}}blockquote(r){const e=this.rules.block.blockquote.exec(r);if(e){let t=e[0].replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`);t=Lt(t.replace(/^ *>[ \t]?/gm,""),`
`);const i=this.lexer.state.top;this.lexer.state.top=!0;const s=this.lexer.blockTokens(t);return this.lexer.state.top=i,{type:"blockquote",raw:e[0],tokens:s,text:t}}}list(r){let e=this.rules.block.list.exec(r);if(e){let t=e[1].trim();const i=t.length>1,s={type:"list",raw:"",ordered:i,start:i?+t.slice(0,-1):"",loose:!1,items:[]};t=i?`\\d{1,9}\\${t.slice(-1)}`:`\\${t}`,this.options.pedantic&&(t=i?t:"[*+-]");const n=new RegExp(`^( {0,3}${t})((?:[	 ][^\\n]*)?(?:\\n|$))`);let o="",c="",f=!1;for(;r;){let m=!1;if(!(e=n.exec(r))||this.rules.block.hr.test(r))break;o=e[0],r=r.substring(o.length);let g=e[2].split(`
`,1)[0].replace(/^\t+/,p=>" ".repeat(3*p.length)),b=r.split(`
`,1)[0],h=0;this.options.pedantic?(h=2,c=g.trimStart()):(h=e[2].search(/[^ ]/),h=h>4?1:h,c=g.slice(h),h+=e[1].length);let y=!1;if(!g&&/^ *$/.test(b)&&(o+=b+`
`,r=r.substring(b.length+1),m=!0),!m){const p=new RegExp(`^ {0,${Math.min(3,h-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),v=new RegExp(`^ {0,${Math.min(3,h-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),S=new RegExp(`^ {0,${Math.min(3,h-1)}}(?:\`\`\`|~~~)`),A=new RegExp(`^ {0,${Math.min(3,h-1)}}#`);for(;r;){const T=r.split(`
`,1)[0];if(b=T,this.options.pedantic&&(b=b.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),S.test(b)||A.test(b)||p.test(b)||v.test(r))break;if(b.search(/[^ ]/)>=h||!b.trim())c+=`
`+b.slice(h);else{if(y||g.search(/[^ ]/)>=4||S.test(g)||A.test(g)||v.test(g))break;c+=`
`+b}!y&&!b.trim()&&(y=!0),o+=T+`
`,r=r.substring(T.length+1),g=b.slice(h)}}s.loose||(f?s.loose=!0:/\n *\n *$/.test(o)&&(f=!0));let u=null,w;this.options.gfm&&(u=/^\[[ xX]\] /.exec(c),u&&(w=u[0]!=="[ ] ",c=c.replace(/^\[[ xX]\] +/,""))),s.items.push({type:"list_item",raw:o,task:!!u,checked:w,loose:!1,text:c,tokens:[]}),s.raw+=o}s.items[s.items.length-1].raw=o.trimEnd(),s.items[s.items.length-1].text=c.trimEnd(),s.raw=s.raw.trimEnd();for(let m=0;m<s.items.length;m++)if(this.lexer.state.top=!1,s.items[m].tokens=this.lexer.blockTokens(s.items[m].text,[]),!s.loose){const g=s.items[m].tokens.filter(h=>h.type==="space"),b=g.length>0&&g.some(h=>/\n.*\n/.test(h.raw));s.loose=b}if(s.loose)for(let m=0;m<s.items.length;m++)s.items[m].loose=!0;return s}}html(r){const e=this.rules.block.html.exec(r);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(r){const e=this.rules.block.def.exec(r);if(e){const t=e[1].toLowerCase().replace(/\s+/g," "),i=e[2]?e[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",s=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:t,raw:e[0],href:i,title:s}}}table(r){const e=this.rules.block.table.exec(r);if(!e||!/[:|]/.test(e[2]))return;const t=Pr(e[1]),i=e[2].replace(/^\||\| *$/g,"").split("|"),s=e[3]&&e[3].trim()?e[3].replace(/\n[ \t]*$/,"").split(`
`):[],n={type:"table",raw:e[0],header:[],align:[],rows:[]};if(t.length===i.length){for(const o of i)/^ *-+: *$/.test(o)?n.align.push("right"):/^ *:-+: *$/.test(o)?n.align.push("center"):/^ *:-+ *$/.test(o)?n.align.push("left"):n.align.push(null);for(const o of t)n.header.push({text:o,tokens:this.lexer.inline(o)});for(const o of s)n.rows.push(Pr(o,n.header.length).map(c=>({text:c,tokens:this.lexer.inline(c)})));return n}}lheading(r){const e=this.rules.block.lheading.exec(r);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(r){const e=this.rules.block.paragraph.exec(r);if(e){const t=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:t,tokens:this.lexer.inline(t)}}}text(r){const e=this.rules.block.text.exec(r);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(r){const e=this.rules.inline.escape.exec(r);if(e)return{type:"escape",raw:e[0],text:Ze(e[1])}}tag(r){const e=this.rules.inline.tag.exec(r);if(e)return!this.lexer.state.inLink&&/^<a /i.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(r){const e=this.rules.inline.link.exec(r);if(e){const t=e[2].trim();if(!this.options.pedantic&&/^</.test(t)){if(!/>$/.test(t))return;const n=Lt(t.slice(0,-1),"\\");if((t.length-n.length)%2===0)return}else{const n=cs(e[2],"()");if(n>-1){const c=(e[0].indexOf("!")===0?5:4)+e[1].length+n;e[2]=e[2].substring(0,n),e[0]=e[0].substring(0,c).trim(),e[3]=""}}let i=e[2],s="";if(this.options.pedantic){const n=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(i);n&&(i=n[1],s=n[3])}else s=e[3]?e[3].slice(1,-1):"";return i=i.trim(),/^</.test(i)&&(this.options.pedantic&&!/>$/.test(t)?i=i.slice(1):i=i.slice(1,-1)),Mr(e,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:s&&s.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer)}}reflink(r,e){let t;if((t=this.rules.inline.reflink.exec(r))||(t=this.rules.inline.nolink.exec(r))){const i=(t[2]||t[1]).replace(/\s+/g," "),s=e[i.toLowerCase()];if(!s){const n=t[0].charAt(0);return{type:"text",raw:n,text:n}}return Mr(t,s,t[0],this.lexer)}}emStrong(r,e,t=""){let i=this.rules.inline.emStrongLDelim.exec(r);if(!i||i[3]&&t.match(/[\p{L}\p{N}]/u))return;if(!(i[1]||i[2]||"")||!t||this.rules.inline.punctuation.exec(t)){const n=[...i[0]].length-1;let o,c,f=n,m=0;const g=i[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(g.lastIndex=0,e=e.slice(-1*r.length+n);(i=g.exec(e))!=null;){if(o=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!o)continue;if(c=[...o].length,i[3]||i[4]){f+=c;continue}else if((i[5]||i[6])&&n%3&&!((n+c)%3)){m+=c;continue}if(f-=c,f>0)continue;c=Math.min(c,c+f+m);const b=[...i[0]][0].length,h=r.slice(0,n+i.index+b+c);if(Math.min(n,c)%2){const u=h.slice(1,-1);return{type:"em",raw:h,text:u,tokens:this.lexer.inlineTokens(u)}}const y=h.slice(2,-2);return{type:"strong",raw:h,text:y,tokens:this.lexer.inlineTokens(y)}}}}codespan(r){const e=this.rules.inline.code.exec(r);if(e){let t=e[2].replace(/\n/g," ");const i=/[^ ]/.test(t),s=/^ /.test(t)&&/ $/.test(t);return i&&s&&(t=t.substring(1,t.length-1)),t=Ze(t,!0),{type:"codespan",raw:e[0],text:t}}}br(r){const e=this.rules.inline.br.exec(r);if(e)return{type:"br",raw:e[0]}}del(r){const e=this.rules.inline.del.exec(r);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(r){const e=this.rules.inline.autolink.exec(r);if(e){let t,i;return e[2]==="@"?(t=Ze(e[1]),i="mailto:"+t):(t=Ze(e[1]),i=t),{type:"link",raw:e[0],text:t,href:i,tokens:[{type:"text",raw:t,text:t}]}}}url(r){var t;let e;if(e=this.rules.inline.url.exec(r)){let i,s;if(e[2]==="@")i=Ze(e[0]),s="mailto:"+i;else{let n;do n=e[0],e[0]=((t=this.rules.inline._backpedal.exec(e[0]))==null?void 0:t[0])??"";while(n!==e[0]);i=Ze(e[0]),e[1]==="www."?s="http://"+e[0]:s=e[0]}return{type:"link",raw:e[0],text:i,href:s,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(r){const e=this.rules.inline.text.exec(r);if(e){let t;return this.lexer.state.inRawBlock?t=e[0]:t=Ze(e[0]),{type:"text",raw:e[0],text:t}}}}const hs=/^(?: *(?:\n|$))+/,us=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fs=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,At=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,ps=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,an=/(?:[*+-]|\d{1,9}[.)])/,on=ke(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,an).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),pr=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,ms=/^[^\n]+/,mr=/(?!\s*\])(?:\\.|[^\[\]\\])+/,gs=ke(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",mr).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),xs=ke(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,an).getRegex(),Yt="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",gr=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,bs=ke("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",gr).replace("tag",Yt).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),ln=ke(pr).replace("hr",At).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Yt).getRegex(),ws=ke(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",ln).getRegex(),xr={blockquote:ws,code:us,def:gs,fences:fs,heading:ps,hr:At,html:bs,lheading:on,list:xs,newline:hs,paragraph:ln,table:Nt,text:ms},Br=ke("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",At).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Yt).getRegex(),ys={...xr,table:Br,paragraph:ke(pr).replace("hr",At).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Br).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Yt).getRegex()},_s={...xr,html:ke(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",gr).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Nt,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:ke(pr).replace("hr",At).replace("heading",` *#{1,6} *[^
]`).replace("lheading",on).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},cn=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,vs=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,dn=/^( {2,}|\\)\n(?!\s*$)/,ks=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Ct="\\p{P}\\p{S}",Ss=ke(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,Ct).getRegex(),js=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,Ns=ke(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,Ct).getRegex(),Es=ke("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,Ct).getRegex(),Ts=ke("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,Ct).getRegex(),As=ke(/\\([punct])/,"gu").replace(/punct/g,Ct).getRegex(),Cs=ke(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Is=ke(gr).replace("(?:-->|$)","-->").getRegex(),Rs=ke("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Is).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Ht=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Os=ke(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",Ht).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),hn=ke(/^!?\[(label)\]\[(ref)\]/).replace("label",Ht).replace("ref",mr).getRegex(),un=ke(/^!?\[(ref)\](?:\[\])?/).replace("ref",mr).getRegex(),zs=ke("reflink|nolink(?!\\()","g").replace("reflink",hn).replace("nolink",un).getRegex(),br={_backpedal:Nt,anyPunctuation:As,autolink:Cs,blockSkip:js,br:dn,code:vs,del:Nt,emStrongLDelim:Ns,emStrongRDelimAst:Es,emStrongRDelimUnd:Ts,escape:cn,link:Os,nolink:un,punctuation:Ss,reflink:hn,reflinkSearch:zs,tag:Rs,text:ks,url:Nt},Ds={...br,link:ke(/^!?\[(label)\]\((.*?)\)/).replace("label",Ht).getRegex(),reflink:ke(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Ht).getRegex()},ir={...br,escape:ke(cn).replace("])","~|])").getRegex(),url:ke(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},Ls={...ir,br:ke(dn).replace("{2,}","*").getRegex(),text:ke(ir.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Pt={normal:xr,gfm:ys,pedantic:_s},yt={normal:br,gfm:ir,breaks:Ls,pedantic:Ds};class rt{constructor(r){ye(this,"tokens");ye(this,"options");ye(this,"state");ye(this,"tokenizer");ye(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=r||gt,this.options.tokenizer=this.options.tokenizer||new Wt,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const e={block:Pt.normal,inline:yt.normal};this.options.pedantic?(e.block=Pt.pedantic,e.inline=yt.pedantic):this.options.gfm&&(e.block=Pt.gfm,this.options.breaks?e.inline=yt.breaks:e.inline=yt.gfm),this.tokenizer.rules=e}static get rules(){return{block:Pt,inline:yt}}static lex(r,e){return new rt(e).lex(r)}static lexInline(r,e){return new rt(e).inlineTokens(r)}lex(r){r=r.replace(/\r\n|\r/g,`
`),this.blockTokens(r,this.tokens);for(let e=0;e<this.inlineQueue.length;e++){const t=this.inlineQueue[e];this.inlineTokens(t.src,t.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(r,e=[]){this.options.pedantic?r=r.replace(/\t/g,"    ").replace(/^ +$/gm,""):r=r.replace(/^( *)(\t+)/gm,(o,c,f)=>c+"    ".repeat(f.length));let t,i,s,n;for(;r;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(o=>(t=o.call({lexer:this},r,e))?(r=r.substring(t.raw.length),e.push(t),!0):!1))){if(t=this.tokenizer.space(r)){r=r.substring(t.raw.length),t.raw.length===1&&e.length>0?e[e.length-1].raw+=`
`:e.push(t);continue}if(t=this.tokenizer.code(r)){r=r.substring(t.raw.length),i=e[e.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+t.raw,i.text+=`
`+t.text,this.inlineQueue[this.inlineQueue.length-1].src=i.text):e.push(t);continue}if(t=this.tokenizer.fences(r)){r=r.substring(t.raw.length),e.push(t);continue}if(t=this.tokenizer.heading(r)){r=r.substring(t.raw.length),e.push(t);continue}if(t=this.tokenizer.hr(r)){r=r.substring(t.raw.length),e.push(t);continue}if(t=this.tokenizer.blockquote(r)){r=r.substring(t.raw.length),e.push(t);continue}if(t=this.tokenizer.list(r)){r=r.substring(t.raw.length),e.push(t);continue}if(t=this.tokenizer.html(r)){r=r.substring(t.raw.length),e.push(t);continue}if(t=this.tokenizer.def(r)){r=r.substring(t.raw.length),i=e[e.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+t.raw,i.text+=`
`+t.raw,this.inlineQueue[this.inlineQueue.length-1].src=i.text):this.tokens.links[t.tag]||(this.tokens.links[t.tag]={href:t.href,title:t.title});continue}if(t=this.tokenizer.table(r)){r=r.substring(t.raw.length),e.push(t);continue}if(t=this.tokenizer.lheading(r)){r=r.substring(t.raw.length),e.push(t);continue}if(s=r,this.options.extensions&&this.options.extensions.startBlock){let o=1/0;const c=r.slice(1);let f;this.options.extensions.startBlock.forEach(m=>{f=m.call({lexer:this},c),typeof f=="number"&&f>=0&&(o=Math.min(o,f))}),o<1/0&&o>=0&&(s=r.substring(0,o+1))}if(this.state.top&&(t=this.tokenizer.paragraph(s))){i=e[e.length-1],n&&i.type==="paragraph"?(i.raw+=`
`+t.raw,i.text+=`
`+t.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):e.push(t),n=s.length!==r.length,r=r.substring(t.raw.length);continue}if(t=this.tokenizer.text(r)){r=r.substring(t.raw.length),i=e[e.length-1],i&&i.type==="text"?(i.raw+=`
`+t.raw,i.text+=`
`+t.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):e.push(t);continue}if(r){const o="Infinite loop on byte: "+r.charCodeAt(0);if(this.options.silent){console.error(o);break}else throw new Error(o)}}return this.state.top=!0,e}inline(r,e=[]){return this.inlineQueue.push({src:r,tokens:e}),e}inlineTokens(r,e=[]){let t,i,s,n=r,o,c,f;if(this.tokens.links){const m=Object.keys(this.tokens.links);if(m.length>0)for(;(o=this.tokenizer.rules.inline.reflinkSearch.exec(n))!=null;)m.includes(o[0].slice(o[0].lastIndexOf("[")+1,-1))&&(n=n.slice(0,o.index)+"["+"a".repeat(o[0].length-2)+"]"+n.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(o=this.tokenizer.rules.inline.blockSkip.exec(n))!=null;)n=n.slice(0,o.index)+"["+"a".repeat(o[0].length-2)+"]"+n.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(o=this.tokenizer.rules.inline.anyPunctuation.exec(n))!=null;)n=n.slice(0,o.index)+"++"+n.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;r;)if(c||(f=""),c=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(m=>(t=m.call({lexer:this},r,e))?(r=r.substring(t.raw.length),e.push(t),!0):!1))){if(t=this.tokenizer.escape(r)){r=r.substring(t.raw.length),e.push(t);continue}if(t=this.tokenizer.tag(r)){r=r.substring(t.raw.length),i=e[e.length-1],i&&t.type==="text"&&i.type==="text"?(i.raw+=t.raw,i.text+=t.text):e.push(t);continue}if(t=this.tokenizer.link(r)){r=r.substring(t.raw.length),e.push(t);continue}if(t=this.tokenizer.reflink(r,this.tokens.links)){r=r.substring(t.raw.length),i=e[e.length-1],i&&t.type==="text"&&i.type==="text"?(i.raw+=t.raw,i.text+=t.text):e.push(t);continue}if(t=this.tokenizer.emStrong(r,n,f)){r=r.substring(t.raw.length),e.push(t);continue}if(t=this.tokenizer.codespan(r)){r=r.substring(t.raw.length),e.push(t);continue}if(t=this.tokenizer.br(r)){r=r.substring(t.raw.length),e.push(t);continue}if(t=this.tokenizer.del(r)){r=r.substring(t.raw.length),e.push(t);continue}if(t=this.tokenizer.autolink(r)){r=r.substring(t.raw.length),e.push(t);continue}if(!this.state.inLink&&(t=this.tokenizer.url(r))){r=r.substring(t.raw.length),e.push(t);continue}if(s=r,this.options.extensions&&this.options.extensions.startInline){let m=1/0;const g=r.slice(1);let b;this.options.extensions.startInline.forEach(h=>{b=h.call({lexer:this},g),typeof b=="number"&&b>=0&&(m=Math.min(m,b))}),m<1/0&&m>=0&&(s=r.substring(0,m+1))}if(t=this.tokenizer.inlineText(s)){r=r.substring(t.raw.length),t.raw.slice(-1)!=="_"&&(f=t.raw.slice(-1)),c=!0,i=e[e.length-1],i&&i.type==="text"?(i.raw+=t.raw,i.text+=t.text):e.push(t);continue}if(r){const m="Infinite loop on byte: "+r.charCodeAt(0);if(this.options.silent){console.error(m);break}else throw new Error(m)}}return e}}class Zt{constructor(r){ye(this,"options");this.options=r||gt}code(r,e,t){var s;const i=(s=(e||"").match(/^\S*/))==null?void 0:s[0];return r=r.replace(/\n$/,"")+`
`,i?'<pre><code class="language-'+Ze(i)+'">'+(t?r:Ze(r,!0))+`</code></pre>
`:"<pre><code>"+(t?r:Ze(r,!0))+`</code></pre>
`}blockquote(r){return`<blockquote>
${r}</blockquote>
`}html(r,e){return r}heading(r,e,t){return`<h${e}>${r}</h${e}>
`}hr(){return`<hr>
`}list(r,e,t){const i=e?"ol":"ul",s=e&&t!==1?' start="'+t+'"':"";return"<"+i+s+`>
`+r+"</"+i+`>
`}listitem(r,e,t){return`<li>${r}</li>
`}checkbox(r){return"<input "+(r?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(r){return`<p>${r}</p>
`}table(r,e){return e&&(e=`<tbody>${e}</tbody>`),`<table>
<thead>
`+r+`</thead>
`+e+`</table>
`}tablerow(r){return`<tr>
${r}</tr>
`}tablecell(r,e){const t=e.header?"th":"td";return(e.align?`<${t} align="${e.align}">`:`<${t}>`)+r+`</${t}>
`}strong(r){return`<strong>${r}</strong>`}em(r){return`<em>${r}</em>`}codespan(r){return`<code>${r}</code>`}br(){return"<br>"}del(r){return`<del>${r}</del>`}link(r,e,t){const i=Lr(r);if(i===null)return t;r=i;let s='<a href="'+r+'"';return e&&(s+=' title="'+e+'"'),s+=">"+t+"</a>",s}image(r,e,t){const i=Lr(r);if(i===null)return t;r=i;let s=`<img src="${r}" alt="${t}"`;return e&&(s+=` title="${e}"`),s+=">",s}text(r){return r}}class wr{strong(r){return r}em(r){return r}codespan(r){return r}del(r){return r}html(r){return r}text(r){return r}link(r,e,t){return""+t}image(r,e,t){return""+t}br(){return""}}class nt{constructor(r){ye(this,"options");ye(this,"renderer");ye(this,"textRenderer");this.options=r||gt,this.options.renderer=this.options.renderer||new Zt,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new wr}static parse(r,e){return new nt(e).parse(r)}static parseInline(r,e){return new nt(e).parseInline(r)}parse(r,e=!0){let t="";for(let i=0;i<r.length;i++){const s=r[i];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]){const n=s,o=this.options.extensions.renderers[n.type].call({parser:this},n);if(o!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(n.type)){t+=o||"";continue}}switch(s.type){case"space":continue;case"hr":{t+=this.renderer.hr();continue}case"heading":{const n=s;t+=this.renderer.heading(this.parseInline(n.tokens),n.depth,os(this.parseInline(n.tokens,this.textRenderer)));continue}case"code":{const n=s;t+=this.renderer.code(n.text,n.lang,!!n.escaped);continue}case"table":{const n=s;let o="",c="";for(let m=0;m<n.header.length;m++)c+=this.renderer.tablecell(this.parseInline(n.header[m].tokens),{header:!0,align:n.align[m]});o+=this.renderer.tablerow(c);let f="";for(let m=0;m<n.rows.length;m++){const g=n.rows[m];c="";for(let b=0;b<g.length;b++)c+=this.renderer.tablecell(this.parseInline(g[b].tokens),{header:!1,align:n.align[b]});f+=this.renderer.tablerow(c)}t+=this.renderer.table(o,f);continue}case"blockquote":{const n=s,o=this.parse(n.tokens);t+=this.renderer.blockquote(o);continue}case"list":{const n=s,o=n.ordered,c=n.start,f=n.loose;let m="";for(let g=0;g<n.items.length;g++){const b=n.items[g],h=b.checked,y=b.task;let u="";if(b.task){const w=this.renderer.checkbox(!!h);f?b.tokens.length>0&&b.tokens[0].type==="paragraph"?(b.tokens[0].text=w+" "+b.tokens[0].text,b.tokens[0].tokens&&b.tokens[0].tokens.length>0&&b.tokens[0].tokens[0].type==="text"&&(b.tokens[0].tokens[0].text=w+" "+b.tokens[0].tokens[0].text)):b.tokens.unshift({type:"text",text:w+" "}):u+=w+" "}u+=this.parse(b.tokens,f),m+=this.renderer.listitem(u,y,!!h)}t+=this.renderer.list(m,o,c);continue}case"html":{const n=s;t+=this.renderer.html(n.text,n.block);continue}case"paragraph":{const n=s;t+=this.renderer.paragraph(this.parseInline(n.tokens));continue}case"text":{let n=s,o=n.tokens?this.parseInline(n.tokens):n.text;for(;i+1<r.length&&r[i+1].type==="text";)n=r[++i],o+=`
`+(n.tokens?this.parseInline(n.tokens):n.text);t+=e?this.renderer.paragraph(o):o;continue}default:{const n='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(n),"";throw new Error(n)}}}return t}parseInline(r,e){e=e||this.renderer;let t="";for(let i=0;i<r.length;i++){const s=r[i];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]){const n=this.options.extensions.renderers[s.type].call({parser:this},s);if(n!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type)){t+=n||"";continue}}switch(s.type){case"escape":{const n=s;t+=e.text(n.text);break}case"html":{const n=s;t+=e.html(n.text);break}case"link":{const n=s;t+=e.link(n.href,n.title,this.parseInline(n.tokens,e));break}case"image":{const n=s;t+=e.image(n.href,n.title,n.text);break}case"strong":{const n=s;t+=e.strong(this.parseInline(n.tokens,e));break}case"em":{const n=s;t+=e.em(this.parseInline(n.tokens,e));break}case"codespan":{const n=s;t+=e.codespan(n.text);break}case"br":{t+=e.br();break}case"del":{const n=s;t+=e.del(this.parseInline(n.tokens,e));break}case"text":{const n=s;t+=e.text(n.text);break}default:{const n='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(n),"";throw new Error(n)}}}return t}}class Et{constructor(r){ye(this,"options");this.options=r||gt}preprocess(r){return r}postprocess(r){return r}processAllTokens(r){return r}}ye(Et,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));var mt,ar,fn;class Ps{constructor(...r){Cr(this,mt);ye(this,"defaults",fr());ye(this,"options",this.setOptions);ye(this,"parse",Rt(this,mt,ar).call(this,rt.lex,nt.parse));ye(this,"parseInline",Rt(this,mt,ar).call(this,rt.lexInline,nt.parseInline));ye(this,"Parser",nt);ye(this,"Renderer",Zt);ye(this,"TextRenderer",wr);ye(this,"Lexer",rt);ye(this,"Tokenizer",Wt);ye(this,"Hooks",Et);this.use(...r)}walkTokens(r,e){var i,s;let t=[];for(const n of r)switch(t=t.concat(e.call(this,n)),n.type){case"table":{const o=n;for(const c of o.header)t=t.concat(this.walkTokens(c.tokens,e));for(const c of o.rows)for(const f of c)t=t.concat(this.walkTokens(f.tokens,e));break}case"list":{const o=n;t=t.concat(this.walkTokens(o.items,e));break}default:{const o=n;(s=(i=this.defaults.extensions)==null?void 0:i.childTokens)!=null&&s[o.type]?this.defaults.extensions.childTokens[o.type].forEach(c=>{const f=o[c].flat(1/0);t=t.concat(this.walkTokens(f,e))}):o.tokens&&(t=t.concat(this.walkTokens(o.tokens,e)))}}return t}use(...r){const e=this.defaults.extensions||{renderers:{},childTokens:{}};return r.forEach(t=>{const i={...t};if(i.async=this.defaults.async||i.async||!1,t.extensions&&(t.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){const n=e.renderers[s.name];n?e.renderers[s.name]=function(...o){let c=s.renderer.apply(this,o);return c===!1&&(c=n.apply(this,o)),c}:e.renderers[s.name]=s.renderer}if("tokenizer"in s){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const n=e[s.level];n?n.unshift(s.tokenizer):e[s.level]=[s.tokenizer],s.start&&(s.level==="block"?e.startBlock?e.startBlock.push(s.start):e.startBlock=[s.start]:s.level==="inline"&&(e.startInline?e.startInline.push(s.start):e.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(e.childTokens[s.name]=s.childTokens)}),i.extensions=e),t.renderer){const s=this.defaults.renderer||new Zt(this.defaults);for(const n in t.renderer){if(!(n in s))throw new Error(`renderer '${n}' does not exist`);if(n==="options")continue;const o=n,c=t.renderer[o],f=s[o];s[o]=(...m)=>{let g=c.apply(s,m);return g===!1&&(g=f.apply(s,m)),g||""}}i.renderer=s}if(t.tokenizer){const s=this.defaults.tokenizer||new Wt(this.defaults);for(const n in t.tokenizer){if(!(n in s))throw new Error(`tokenizer '${n}' does not exist`);if(["options","rules","lexer"].includes(n))continue;const o=n,c=t.tokenizer[o],f=s[o];s[o]=(...m)=>{let g=c.apply(s,m);return g===!1&&(g=f.apply(s,m)),g}}i.tokenizer=s}if(t.hooks){const s=this.defaults.hooks||new Et;for(const n in t.hooks){if(!(n in s))throw new Error(`hook '${n}' does not exist`);if(n==="options")continue;const o=n,c=t.hooks[o],f=s[o];Et.passThroughHooks.has(n)?s[o]=m=>{if(this.defaults.async)return Promise.resolve(c.call(s,m)).then(b=>f.call(s,b));const g=c.call(s,m);return f.call(s,g)}:s[o]=(...m)=>{let g=c.apply(s,m);return g===!1&&(g=f.apply(s,m)),g}}i.hooks=s}if(t.walkTokens){const s=this.defaults.walkTokens,n=t.walkTokens;i.walkTokens=function(o){let c=[];return c.push(n.call(this,o)),s&&(c=c.concat(s.call(this,o))),c}}this.defaults={...this.defaults,...i}}),this}setOptions(r){return this.defaults={...this.defaults,...r},this}lexer(r,e){return rt.lex(r,e??this.defaults)}parser(r,e){return nt.parse(r,e??this.defaults)}}mt=new WeakSet,ar=function(r,e){return(t,i)=>{const s={...i},n={...this.defaults,...s};this.defaults.async===!0&&s.async===!1&&(n.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),n.async=!0);const o=Rt(this,mt,fn).call(this,!!n.silent,!!n.async);if(typeof t>"u"||t===null)return o(new Error("marked(): input parameter is undefined or null"));if(typeof t!="string")return o(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));if(n.hooks&&(n.hooks.options=n),n.async)return Promise.resolve(n.hooks?n.hooks.preprocess(t):t).then(c=>r(c,n)).then(c=>n.hooks?n.hooks.processAllTokens(c):c).then(c=>n.walkTokens?Promise.all(this.walkTokens(c,n.walkTokens)).then(()=>c):c).then(c=>e(c,n)).then(c=>n.hooks?n.hooks.postprocess(c):c).catch(o);try{n.hooks&&(t=n.hooks.preprocess(t));let c=r(t,n);n.hooks&&(c=n.hooks.processAllTokens(c)),n.walkTokens&&this.walkTokens(c,n.walkTokens);let f=e(c,n);return n.hooks&&(f=n.hooks.postprocess(f)),f}catch(c){return o(c)}}},fn=function(r,e){return t=>{if(t.message+=`
Please report this to https://github.com/markedjs/marked.`,r){const i="<p>An error occurred:</p><pre>"+Ze(t.message+"",!0)+"</pre>";return e?Promise.resolve(i):i}if(e)return Promise.reject(t);throw t}};const pt=new Ps;function we(j,r){return pt.parse(j,r)}we.options=we.setOptions=function(j){return pt.setOptions(j),we.defaults=pt.defaults,rn(we.defaults),we};we.getDefaults=fr;we.defaults=gt;we.use=function(...j){return pt.use(...j),we.defaults=pt.defaults,rn(we.defaults),we};we.walkTokens=function(j,r){return pt.walkTokens(j,r)};we.parseInline=pt.parseInline;we.Parser=nt;we.parser=nt.parse;we.Renderer=Zt;we.TextRenderer=wr;we.Lexer=rt;we.lexer=rt.lex;we.Tokenizer=Wt;we.Hooks=Et;we.parse=we;we.options;we.setOptions;we.use;we.walkTokens;we.parseInline;nt.parse;rt.lex;/*! @license DOMPurify 3.3.0 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.0/LICENSE */const{entries:pn,setPrototypeOf:Ur,isFrozen:Ms,getPrototypeOf:Bs,getOwnPropertyDescriptor:Us}=Object;let{freeze:Ue,seal:qe,create:or}=Object,{apply:lr,construct:cr}=typeof Reflect<"u"&&Reflect;Ue||(Ue=function(r){return r});qe||(qe=function(r){return r});lr||(lr=function(r,e){for(var t=arguments.length,i=new Array(t>2?t-2:0),s=2;s<t;s++)i[s-2]=arguments[s];return r.apply(e,i)});cr||(cr=function(r){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];return new r(...t)});const Mt=Fe(Array.prototype.forEach),Fs=Fe(Array.prototype.lastIndexOf),Fr=Fe(Array.prototype.pop),_t=Fe(Array.prototype.push),$s=Fe(Array.prototype.splice),Ft=Fe(String.prototype.toLowerCase),Vt=Fe(String.prototype.toString),Jt=Fe(String.prototype.match),vt=Fe(String.prototype.replace),Ws=Fe(String.prototype.indexOf),Hs=Fe(String.prototype.trim),Xe=Fe(Object.prototype.hasOwnProperty),Me=Fe(RegExp.prototype.test),kt=Zs(TypeError);function Fe(j){return function(r){r instanceof RegExp&&(r.lastIndex=0);for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];return lr(j,r,t)}}function Zs(j){return function(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return cr(j,e)}}function fe(j,r){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ft;Ur&&Ur(j,null);let t=r.length;for(;t--;){let i=r[t];if(typeof i=="string"){const s=e(i);s!==i&&(Ms(r)||(r[t]=s),i=s)}j[i]=!0}return j}function Gs(j){for(let r=0;r<j.length;r++)Xe(j,r)||(j[r]=null);return j}function dt(j){const r=or(null);for(const[e,t]of pn(j))Xe(j,e)&&(Array.isArray(t)?r[e]=Gs(t):t&&typeof t=="object"&&t.constructor===Object?r[e]=dt(t):r[e]=t);return r}function St(j,r){for(;j!==null;){const t=Us(j,r);if(t){if(t.get)return Fe(t.get);if(typeof t.value=="function")return Fe(t.value)}j=Bs(j)}function e(){return null}return e}const $r=Ue(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Qt=Ue(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),er=Ue(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),qs=Ue(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),tr=Ue(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Ys=Ue(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Wr=Ue(["#text"]),Hr=Ue(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),rr=Ue(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Zr=Ue(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Bt=Ue(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Ks=qe(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Xs=qe(/<%[\w\W]*|[\w\W]*%>/gm),Vs=qe(/\$\{[\w\W]*/gm),Js=qe(/^data-[\-\w.\u00B7-\uFFFF]+$/),Qs=qe(/^aria-[\-\w]+$/),mn=qe(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),ei=qe(/^(?:\w+script|data):/i),ti=qe(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),gn=qe(/^html$/i),ri=qe(/^[a-z][.\w]*(-[.\w]+)+$/i);var Gr=Object.freeze({__proto__:null,ARIA_ATTR:Qs,ATTR_WHITESPACE:ti,CUSTOM_ELEMENT:ri,DATA_ATTR:Js,DOCTYPE_NAME:gn,ERB_EXPR:Xs,IS_ALLOWED_URI:mn,IS_SCRIPT_OR_DATA:ei,MUSTACHE_EXPR:Ks,TMPLIT_EXPR:Vs});const jt={element:1,text:3,progressingInstruction:7,comment:8,document:9},ni=function(){return typeof window>"u"?null:window},si=function(r,e){if(typeof r!="object"||typeof r.createPolicy!="function")return null;let t=null;const i="data-tt-policy-suffix";e&&e.hasAttribute(i)&&(t=e.getAttribute(i));const s="dompurify"+(t?"#"+t:"");try{return r.createPolicy(s,{createHTML(n){return n},createScriptURL(n){return n}})}catch{return console.warn("TrustedTypes policy "+s+" could not be created."),null}},qr=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function xn(){let j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ni();const r=oe=>xn(oe);if(r.version="3.3.0",r.removed=[],!j||!j.document||j.document.nodeType!==jt.document||!j.Element)return r.isSupported=!1,r;let{document:e}=j;const t=e,i=t.currentScript,{DocumentFragment:s,HTMLTemplateElement:n,Node:o,Element:c,NodeFilter:f,NamedNodeMap:m=j.NamedNodeMap||j.MozNamedAttrMap,HTMLFormElement:g,DOMParser:b,trustedTypes:h}=j,y=c.prototype,u=St(y,"cloneNode"),w=St(y,"remove"),p=St(y,"nextSibling"),v=St(y,"childNodes"),S=St(y,"parentNode");if(typeof n=="function"){const oe=e.createElement("template");oe.content&&oe.content.ownerDocument&&(e=oe.content.ownerDocument)}let A,T="";const{implementation:U,createNodeIterator:M,createDocumentFragment:G,getElementsByTagName:L}=e,{importNode:K}=t;let ee=qr();r.isSupported=typeof pn=="function"&&typeof S=="function"&&U&&U.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:k,ERB_EXPR:P,TMPLIT_EXPR:d,DATA_ATTR:R,ARIA_ATTR:se,IS_SCRIPT_OR_DATA:W,ATTR_WHITESPACE:ce,CUSTOM_ELEMENT:Z}=Gr;let{IS_ALLOWED_URI:ie}=Gr,C=null;const O=fe({},[...$r,...Qt,...er,...tr,...Wr]);let Q=null;const V=fe({},[...Hr,...rr,...Zr,...Bt]);let H=Object.seal(or(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),be=null,Ee=null;const le=Object.seal(or(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let de=!0,_e=!0,xe=!1,ue=!0,Ae=!1,l=!0,B=!1,D=!1,_=!1,x=!1,E=!1,F=!1,$=!0,I=!1;const q="user-content-";let J=!0,Y=!1,re={},me=null;const he=fe({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Ce=null;const Ye=fe({},["audio","video","img","source","image","track"]);let ze=null;const Je=fe({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ve="http://www.w3.org/1998/Math/MathML",De="http://www.w3.org/2000/svg",Pe="http://www.w3.org/1999/xhtml";let Te=Pe,st=!1,ut=null;const ht=fe({},[ve,De,Pe],Vt);let it=fe({},["mi","mo","mn","ms","mtext"]),Ke=fe({},["annotation-xml"]);const at=fe({},["title","style","font","a","script"]);let We=null;const z=["application/xhtml+xml","text/html"],ae="text/html";let te=null,Se=null;const je=e.createElement("form"),He=function(N){return N instanceof RegExp||N instanceof Function},ot=function(){let N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Se&&Se===N)){if((!N||typeof N!="object")&&(N={}),N=dt(N),We=z.indexOf(N.PARSER_MEDIA_TYPE)===-1?ae:N.PARSER_MEDIA_TYPE,te=We==="application/xhtml+xml"?Vt:Ft,C=Xe(N,"ALLOWED_TAGS")?fe({},N.ALLOWED_TAGS,te):O,Q=Xe(N,"ALLOWED_ATTR")?fe({},N.ALLOWED_ATTR,te):V,ut=Xe(N,"ALLOWED_NAMESPACES")?fe({},N.ALLOWED_NAMESPACES,Vt):ht,ze=Xe(N,"ADD_URI_SAFE_ATTR")?fe(dt(Je),N.ADD_URI_SAFE_ATTR,te):Je,Ce=Xe(N,"ADD_DATA_URI_TAGS")?fe(dt(Ye),N.ADD_DATA_URI_TAGS,te):Ye,me=Xe(N,"FORBID_CONTENTS")?fe({},N.FORBID_CONTENTS,te):he,be=Xe(N,"FORBID_TAGS")?fe({},N.FORBID_TAGS,te):dt({}),Ee=Xe(N,"FORBID_ATTR")?fe({},N.FORBID_ATTR,te):dt({}),re=Xe(N,"USE_PROFILES")?N.USE_PROFILES:!1,de=N.ALLOW_ARIA_ATTR!==!1,_e=N.ALLOW_DATA_ATTR!==!1,xe=N.ALLOW_UNKNOWN_PROTOCOLS||!1,ue=N.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Ae=N.SAFE_FOR_TEMPLATES||!1,l=N.SAFE_FOR_XML!==!1,B=N.WHOLE_DOCUMENT||!1,x=N.RETURN_DOM||!1,E=N.RETURN_DOM_FRAGMENT||!1,F=N.RETURN_TRUSTED_TYPE||!1,_=N.FORCE_BODY||!1,$=N.SANITIZE_DOM!==!1,I=N.SANITIZE_NAMED_PROPS||!1,J=N.KEEP_CONTENT!==!1,Y=N.IN_PLACE||!1,ie=N.ALLOWED_URI_REGEXP||mn,Te=N.NAMESPACE||Pe,it=N.MATHML_TEXT_INTEGRATION_POINTS||it,Ke=N.HTML_INTEGRATION_POINTS||Ke,H=N.CUSTOM_ELEMENT_HANDLING||{},N.CUSTOM_ELEMENT_HANDLING&&He(N.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(H.tagNameCheck=N.CUSTOM_ELEMENT_HANDLING.tagNameCheck),N.CUSTOM_ELEMENT_HANDLING&&He(N.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(H.attributeNameCheck=N.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),N.CUSTOM_ELEMENT_HANDLING&&typeof N.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(H.allowCustomizedBuiltInElements=N.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ae&&(_e=!1),E&&(x=!0),re&&(C=fe({},Wr),Q=[],re.html===!0&&(fe(C,$r),fe(Q,Hr)),re.svg===!0&&(fe(C,Qt),fe(Q,rr),fe(Q,Bt)),re.svgFilters===!0&&(fe(C,er),fe(Q,rr),fe(Q,Bt)),re.mathMl===!0&&(fe(C,tr),fe(Q,Zr),fe(Q,Bt))),N.ADD_TAGS&&(typeof N.ADD_TAGS=="function"?le.tagCheck=N.ADD_TAGS:(C===O&&(C=dt(C)),fe(C,N.ADD_TAGS,te))),N.ADD_ATTR&&(typeof N.ADD_ATTR=="function"?le.attributeCheck=N.ADD_ATTR:(Q===V&&(Q=dt(Q)),fe(Q,N.ADD_ATTR,te))),N.ADD_URI_SAFE_ATTR&&fe(ze,N.ADD_URI_SAFE_ATTR,te),N.FORBID_CONTENTS&&(me===he&&(me=dt(me)),fe(me,N.FORBID_CONTENTS,te)),J&&(C["#text"]=!0),B&&fe(C,["html","head","body"]),C.table&&(fe(C,["tbody"]),delete be.tbody),N.TRUSTED_TYPES_POLICY){if(typeof N.TRUSTED_TYPES_POLICY.createHTML!="function")throw kt('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof N.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw kt('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');A=N.TRUSTED_TYPES_POLICY,T=A.createHTML("")}else A===void 0&&(A=si(h,i)),A!==null&&typeof T=="string"&&(T=A.createHTML(""));Ue&&Ue(N),Se=N}},Qe=fe({},[...Qt,...er,...qs]),xt=fe({},[...tr,...Ys]),It=function(N){let X=S(N);(!X||!X.tagName)&&(X={namespaceURI:Te,tagName:"template"});const ne=Ft(N.tagName),Ne=Ft(X.tagName);return ut[N.namespaceURI]?N.namespaceURI===De?X.namespaceURI===Pe?ne==="svg":X.namespaceURI===ve?ne==="svg"&&(Ne==="annotation-xml"||it[Ne]):!!Qe[ne]:N.namespaceURI===ve?X.namespaceURI===Pe?ne==="math":X.namespaceURI===De?ne==="math"&&Ke[Ne]:!!xt[ne]:N.namespaceURI===Pe?X.namespaceURI===De&&!Ke[Ne]||X.namespaceURI===ve&&!it[Ne]?!1:!xt[ne]&&(at[ne]||!Qe[ne]):!!(We==="application/xhtml+xml"&&ut[N.namespaceURI]):!1},et=function(N){_t(r.removed,{element:N});try{S(N).removeChild(N)}catch{w(N)}},ft=function(N,X){try{_t(r.removed,{attribute:X.getAttributeNode(N),from:X})}catch{_t(r.removed,{attribute:null,from:X})}if(X.removeAttribute(N),N==="is")if(x||E)try{et(X)}catch{}else try{X.setAttribute(N,"")}catch{}},yr=function(N){let X=null,ne=null;if(_)N="<remove></remove>"+N;else{const Ie=Jt(N,/^[\r\n\t ]+/);ne=Ie&&Ie[0]}We==="application/xhtml+xml"&&Te===Pe&&(N='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+N+"</body></html>");const Ne=A?A.createHTML(N):N;if(Te===Pe)try{X=new b().parseFromString(Ne,We)}catch{}if(!X||!X.documentElement){X=U.createDocument(Te,"template",null);try{X.documentElement.innerHTML=st?T:Ne}catch{}}const Le=X.body||X.documentElement;return N&&ne&&Le.insertBefore(e.createTextNode(ne),Le.childNodes[0]||null),Te===Pe?L.call(X,B?"html":"body")[0]:B?X.documentElement:Le},_r=function(N){return M.call(N.ownerDocument||N,N,f.SHOW_ELEMENT|f.SHOW_COMMENT|f.SHOW_TEXT|f.SHOW_PROCESSING_INSTRUCTION|f.SHOW_CDATA_SECTION,null)},Kt=function(N){return N instanceof g&&(typeof N.nodeName!="string"||typeof N.textContent!="string"||typeof N.removeChild!="function"||!(N.attributes instanceof m)||typeof N.removeAttribute!="function"||typeof N.setAttribute!="function"||typeof N.namespaceURI!="string"||typeof N.insertBefore!="function"||typeof N.hasChildNodes!="function")},vr=function(N){return typeof o=="function"&&N instanceof o};function lt(oe,N,X){Mt(oe,ne=>{ne.call(r,N,X,Se)})}const kr=function(N){let X=null;if(lt(ee.beforeSanitizeElements,N,null),Kt(N))return et(N),!0;const ne=te(N.nodeName);if(lt(ee.uponSanitizeElement,N,{tagName:ne,allowedTags:C}),l&&N.hasChildNodes()&&!vr(N.firstElementChild)&&Me(/<[/\w!]/g,N.innerHTML)&&Me(/<[/\w!]/g,N.textContent)||N.nodeType===jt.progressingInstruction||l&&N.nodeType===jt.comment&&Me(/<[/\w]/g,N.data))return et(N),!0;if(!(le.tagCheck instanceof Function&&le.tagCheck(ne))&&(!C[ne]||be[ne])){if(!be[ne]&&jr(ne)&&(H.tagNameCheck instanceof RegExp&&Me(H.tagNameCheck,ne)||H.tagNameCheck instanceof Function&&H.tagNameCheck(ne)))return!1;if(J&&!me[ne]){const Ne=S(N)||N.parentNode,Le=v(N)||N.childNodes;if(Le&&Ne){const Ie=Le.length;for(let $e=Ie-1;$e>=0;--$e){const ct=u(Le[$e],!0);ct.__removalCount=(N.__removalCount||0)+1,Ne.insertBefore(ct,p(N))}}}return et(N),!0}return N instanceof c&&!It(N)||(ne==="noscript"||ne==="noembed"||ne==="noframes")&&Me(/<\/no(script|embed|frames)/i,N.innerHTML)?(et(N),!0):(Ae&&N.nodeType===jt.text&&(X=N.textContent,Mt([k,P,d],Ne=>{X=vt(X,Ne," ")}),N.textContent!==X&&(_t(r.removed,{element:N.cloneNode()}),N.textContent=X)),lt(ee.afterSanitizeElements,N,null),!1)},Sr=function(N,X,ne){if($&&(X==="id"||X==="name")&&(ne in e||ne in je))return!1;if(!(_e&&!Ee[X]&&Me(R,X))){if(!(de&&Me(se,X))){if(!(le.attributeCheck instanceof Function&&le.attributeCheck(X,N))){if(!Q[X]||Ee[X]){if(!(jr(N)&&(H.tagNameCheck instanceof RegExp&&Me(H.tagNameCheck,N)||H.tagNameCheck instanceof Function&&H.tagNameCheck(N))&&(H.attributeNameCheck instanceof RegExp&&Me(H.attributeNameCheck,X)||H.attributeNameCheck instanceof Function&&H.attributeNameCheck(X,N))||X==="is"&&H.allowCustomizedBuiltInElements&&(H.tagNameCheck instanceof RegExp&&Me(H.tagNameCheck,ne)||H.tagNameCheck instanceof Function&&H.tagNameCheck(ne))))return!1}else if(!ze[X]){if(!Me(ie,vt(ne,ce,""))){if(!((X==="src"||X==="xlink:href"||X==="href")&&N!=="script"&&Ws(ne,"data:")===0&&Ce[N])){if(!(xe&&!Me(W,vt(ne,ce,"")))){if(ne)return!1}}}}}}}return!0},jr=function(N){return N!=="annotation-xml"&&Jt(N,Z)},Nr=function(N){lt(ee.beforeSanitizeAttributes,N,null);const{attributes:X}=N;if(!X||Kt(N))return;const ne={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Q,forceKeepAttr:void 0};let Ne=X.length;for(;Ne--;){const Le=X[Ne],{name:Ie,namespaceURI:$e,value:ct}=Le,bt=te(Ie),Xt=ct;let Oe=Ie==="value"?Xt:Hs(Xt);if(ne.attrName=bt,ne.attrValue=Oe,ne.keepAttr=!0,ne.forceKeepAttr=void 0,lt(ee.uponSanitizeAttribute,N,ne),Oe=ne.attrValue,I&&(bt==="id"||bt==="name")&&(ft(Ie,N),Oe=q+Oe),l&&Me(/((--!?|])>)|<\/(style|title|textarea)/i,Oe)){ft(Ie,N);continue}if(bt==="attributename"&&Jt(Oe,"href")){ft(Ie,N);continue}if(ne.forceKeepAttr)continue;if(!ne.keepAttr){ft(Ie,N);continue}if(!ue&&Me(/\/>/i,Oe)){ft(Ie,N);continue}Ae&&Mt([k,P,d],Tr=>{Oe=vt(Oe,Tr," ")});const Er=te(N.nodeName);if(!Sr(Er,bt,Oe)){ft(Ie,N);continue}if(A&&typeof h=="object"&&typeof h.getAttributeType=="function"&&!$e)switch(h.getAttributeType(Er,bt)){case"TrustedHTML":{Oe=A.createHTML(Oe);break}case"TrustedScriptURL":{Oe=A.createScriptURL(Oe);break}}if(Oe!==Xt)try{$e?N.setAttributeNS($e,Ie,Oe):N.setAttribute(Ie,Oe),Kt(N)?et(N):Fr(r.removed)}catch{ft(Ie,N)}}lt(ee.afterSanitizeAttributes,N,null)},yn=function oe(N){let X=null;const ne=_r(N);for(lt(ee.beforeSanitizeShadowDOM,N,null);X=ne.nextNode();)lt(ee.uponSanitizeShadowNode,X,null),kr(X),Nr(X),X.content instanceof s&&oe(X.content);lt(ee.afterSanitizeShadowDOM,N,null)};return r.sanitize=function(oe){let N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},X=null,ne=null,Ne=null,Le=null;if(st=!oe,st&&(oe="<!-->"),typeof oe!="string"&&!vr(oe))if(typeof oe.toString=="function"){if(oe=oe.toString(),typeof oe!="string")throw kt("dirty is not a string, aborting")}else throw kt("toString is not a function");if(!r.isSupported)return oe;if(D||ot(N),r.removed=[],typeof oe=="string"&&(Y=!1),Y){if(oe.nodeName){const ct=te(oe.nodeName);if(!C[ct]||be[ct])throw kt("root node is forbidden and cannot be sanitized in-place")}}else if(oe instanceof o)X=yr("<!---->"),ne=X.ownerDocument.importNode(oe,!0),ne.nodeType===jt.element&&ne.nodeName==="BODY"||ne.nodeName==="HTML"?X=ne:X.appendChild(ne);else{if(!x&&!Ae&&!B&&oe.indexOf("<")===-1)return A&&F?A.createHTML(oe):oe;if(X=yr(oe),!X)return x?null:F?T:""}X&&_&&et(X.firstChild);const Ie=_r(Y?oe:X);for(;Ne=Ie.nextNode();)kr(Ne),Nr(Ne),Ne.content instanceof s&&yn(Ne.content);if(Y)return oe;if(x){if(E)for(Le=G.call(X.ownerDocument);X.firstChild;)Le.appendChild(X.firstChild);else Le=X;return(Q.shadowroot||Q.shadowrootmode)&&(Le=K.call(t,Le,!0)),Le}let $e=B?X.outerHTML:X.innerHTML;return B&&C["!doctype"]&&X.ownerDocument&&X.ownerDocument.doctype&&X.ownerDocument.doctype.name&&Me(gn,X.ownerDocument.doctype.name)&&($e="<!DOCTYPE "+X.ownerDocument.doctype.name+`>
`+$e),Ae&&Mt([k,P,d],ct=>{$e=vt($e,ct," ")}),A&&F?A.createHTML($e):$e},r.setConfig=function(){let oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ot(oe),D=!0},r.clearConfig=function(){Se=null,D=!1},r.isValidAttribute=function(oe,N,X){Se||ot({});const ne=te(oe),Ne=te(N);return Sr(ne,Ne,X)},r.addHook=function(oe,N){typeof N=="function"&&_t(ee[oe],N)},r.removeHook=function(oe,N){if(N!==void 0){const X=Fs(ee[oe],N);return X===-1?void 0:$s(ee[oe],X,1)[0]}return Fr(ee[oe])},r.removeHooks=function(oe){ee[oe]=[]},r.removeAllHooks=function(){ee=qr()},r}var ii=xn();we.setOptions({gfm:!0,breaks:!0});const ai=j=>j.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),oi=`# 見出しレベル1

## 見出しレベル2

### 見出しレベル3

#### 見出しレベル4

**太字テキスト** と *斜体テキスト*、そして \`インラインコード\`。

> ブロック引用: 雨上がりの匂いが、彼女の記憶を呼び起こした。

- 箇条書き1
- 箇条書き2
  - ネスト1
  - ネスト2

1. 番号付きリスト
2. 二行目

[リンク例](https://example.com) と ![画像例](https://placehold.co/100x60)。

| 列A | 列B | 列C |
| --- | --- | --- |
| 太字 | *斜体* | \`コード\` |

\`\`\`ts
function greet(name: string) {
  console.log(\`こんにちは、\${name}さん\`)
}
\`\`\`

---
`,li=j=>{const r=we.parse(j,{async:!1});return ii.sanitize(r)},ci=j=>`<mark class="bg-yellow-100 text-gray-800 font-semibold px-1 rounded-sm" data-dictionary-term="${j}">$1</mark>`,di=j=>{if(!j)return"";let r=j;return r=r.replace(/```[\s\S]*?```/g,""),r=r.replace(/`([^`]+)`/g,"$1"),r=r.replace(/^#{1,6}\s+/gm,""),r=r.replace(/\*\*([^*]+)\*\*/g,"$1"),r=r.replace(/__([^_]+)__/g,"$1"),r=r.replace(/\*([^*]+)\*/g,"$1"),r=r.replace(/_([^_]+)_/g,"$1"),r=r.replace(/^>\s+/gm,""),r=r.replace(/^[\s]*[-*+]\s+/gm,""),r=r.replace(/^\s*\d+\.\s+/gm,""),r=r.replace(/\[([^\]]+)\]\([^\)]+\)/g,"$1"),r=r.replace(/!\[([^\]]*)\]\([^\)]+\)/g,"$1"),r=r.replace(/^\|.+\|$/gm,e=>e.split("|").map(t=>t.trim()).filter(t=>t&&!t.match(/^[-:]+$/)).join(" ")),r=r.replace(/^[-*]{3,}$/gm,""),r=r.replace(/\n{3,}/g,`

`),r=r.trim(),r},hi=(j,r)=>{if(!j||!r.length)return j;const e=r.map(c=>{var f;return(f=c.term)==null?void 0:f.trim()}).filter(c=>!!c);if(e.length===0)return j;const t=c=>e.reduce((f,m)=>{const g=new RegExp(`(${ai(m)})`,"gi");return f.replace(g,ci(m))},c);if(typeof window>"u"||typeof window.DOMParser>"u")return t(j);const s=new window.DOMParser().parseFromString(j,"text/html"),n=s.createTreeWalker(s.body,NodeFilter.SHOW_TEXT),o=[];for(;n.nextNode();)o.push(n.currentNode);return o.forEach(c=>{const f=c.nodeValue??"",m=t(f);if(f!==m){const g=s.createElement("span");g.innerHTML=m,c.replaceWith(...Array.from(g.childNodes))}}),s.body.innerHTML},ui=/^(#+)\s+(.*)$/,bn=j=>{const r=j.split(`
`),e=[];return r.forEach((t,i)=>{const s=t.trim().match(ui);s&&e.push({id:`section-${i}`,level:s[1].length,text:s[2],startLine:i,endLine:r.length})}),e.forEach((t,i)=>{const s=e.slice(i+1).find(n=>n.level<=t.level);t.endLine=s?s.startLine:r.length}),e.length===0&&j.trim().length>0&&e.push({id:"section-0",level:1,text:j.trim().split(`
`).slice(0,3).join(" "),startLine:0,endLine:r.length}),e},fi=(j,r,e)=>{if(r===e)return j;const t=j.split(`
`),i=bn(j),s=i.findIndex(b=>b.id===r),n=i.findIndex(b=>b.id===e);if(s===-1||n===-1)return j;const o=i[s],c=i[n],f=o.endLine-o.startLine,m=t.slice(o.startLine,o.endLine);t.splice(o.startLine,f);const g=s<n?Math.max(0,c.startLine-f):c.startLine;return t.splice(g,0,...m),t.join(`
`)};function Ut(j){throw new Error('Could not dynamically require "'+j+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var wn={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(j,r){(function(e){j.exports=e()})(function(){return function e(t,i,s){function n(f,m){if(!i[f]){if(!t[f]){var g=typeof Ut=="function"&&Ut;if(!m&&g)return g(f,!0);if(o)return o(f,!0);var b=new Error("Cannot find module '"+f+"'");throw b.code="MODULE_NOT_FOUND",b}var h=i[f]={exports:{}};t[f][0].call(h.exports,function(y){var u=t[f][1][y];return n(u||y)},h,h.exports,e,t,i,s)}return i[f].exports}for(var o=typeof Ut=="function"&&Ut,c=0;c<s.length;c++)n(s[c]);return n}({1:[function(e,t,i){var s=e("./utils"),n=e("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(c){for(var f,m,g,b,h,y,u,w=[],p=0,v=c.length,S=v,A=s.getTypeOf(c)!=="string";p<c.length;)S=v-p,g=A?(f=c[p++],m=p<v?c[p++]:0,p<v?c[p++]:0):(f=c.charCodeAt(p++),m=p<v?c.charCodeAt(p++):0,p<v?c.charCodeAt(p++):0),b=f>>2,h=(3&f)<<4|m>>4,y=1<S?(15&m)<<2|g>>6:64,u=2<S?63&g:64,w.push(o.charAt(b)+o.charAt(h)+o.charAt(y)+o.charAt(u));return w.join("")},i.decode=function(c){var f,m,g,b,h,y,u=0,w=0,p="data:";if(c.substr(0,p.length)===p)throw new Error("Invalid base64 input, it looks like a data url.");var v,S=3*(c=c.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(c.charAt(c.length-1)===o.charAt(64)&&S--,c.charAt(c.length-2)===o.charAt(64)&&S--,S%1!=0)throw new Error("Invalid base64 input, bad content length.");for(v=n.uint8array?new Uint8Array(0|S):new Array(0|S);u<c.length;)f=o.indexOf(c.charAt(u++))<<2|(b=o.indexOf(c.charAt(u++)))>>4,m=(15&b)<<4|(h=o.indexOf(c.charAt(u++)))>>2,g=(3&h)<<6|(y=o.indexOf(c.charAt(u++))),v[w++]=f,h!==64&&(v[w++]=m),y!==64&&(v[w++]=g);return v}},{"./support":30,"./utils":32}],2:[function(e,t,i){var s=e("./external"),n=e("./stream/DataWorker"),o=e("./stream/Crc32Probe"),c=e("./stream/DataLengthProbe");function f(m,g,b,h,y){this.compressedSize=m,this.uncompressedSize=g,this.crc32=b,this.compression=h,this.compressedContent=y}f.prototype={getContentWorker:function(){var m=new n(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new c("data_length")),g=this;return m.on("end",function(){if(this.streamInfo.data_length!==g.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),m},getCompressedWorker:function(){return new n(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},f.createWorkerFrom=function(m,g,b){return m.pipe(new o).pipe(new c("uncompressedSize")).pipe(g.compressWorker(b)).pipe(new c("compressedSize")).withStreamInfo("compression",g)},t.exports=f},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,t,i){var s=e("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},i.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,t,i){var s=e("./utils"),n=function(){for(var o,c=[],f=0;f<256;f++){o=f;for(var m=0;m<8;m++)o=1&o?3988292384^o>>>1:o>>>1;c[f]=o}return c}();t.exports=function(o,c){return o!==void 0&&o.length?s.getTypeOf(o)!=="string"?function(f,m,g,b){var h=n,y=b+g;f^=-1;for(var u=b;u<y;u++)f=f>>>8^h[255&(f^m[u])];return-1^f}(0|c,o,o.length,0):function(f,m,g,b){var h=n,y=b+g;f^=-1;for(var u=b;u<y;u++)f=f>>>8^h[255&(f^m.charCodeAt(u))];return-1^f}(0|c,o,o.length,0):0}},{"./utils":32}],5:[function(e,t,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(e,t,i){var s=null;s=typeof Promise<"u"?Promise:e("lie"),t.exports={Promise:s}},{lie:37}],7:[function(e,t,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",n=e("pako"),o=e("./utils"),c=e("./stream/GenericWorker"),f=s?"uint8array":"array";function m(g,b){c.call(this,"FlateWorker/"+g),this._pako=null,this._pakoAction=g,this._pakoOptions=b,this.meta={}}i.magic="\b\0",o.inherits(m,c),m.prototype.processChunk=function(g){this.meta=g.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(f,g.data),!1)},m.prototype.flush=function(){c.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},m.prototype.cleanUp=function(){c.prototype.cleanUp.call(this),this._pako=null},m.prototype._createPako=function(){this._pako=new n[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var g=this;this._pako.onData=function(b){g.push({data:b,meta:g.meta})}},i.compressWorker=function(g){return new m("Deflate",g)},i.uncompressWorker=function(){return new m("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,t,i){function s(h,y){var u,w="";for(u=0;u<y;u++)w+=String.fromCharCode(255&h),h>>>=8;return w}function n(h,y,u,w,p,v){var S,A,T=h.file,U=h.compression,M=v!==f.utf8encode,G=o.transformTo("string",v(T.name)),L=o.transformTo("string",f.utf8encode(T.name)),K=T.comment,ee=o.transformTo("string",v(K)),k=o.transformTo("string",f.utf8encode(K)),P=L.length!==T.name.length,d=k.length!==K.length,R="",se="",W="",ce=T.dir,Z=T.date,ie={crc32:0,compressedSize:0,uncompressedSize:0};y&&!u||(ie.crc32=h.crc32,ie.compressedSize=h.compressedSize,ie.uncompressedSize=h.uncompressedSize);var C=0;y&&(C|=8),M||!P&&!d||(C|=2048);var O=0,Q=0;ce&&(O|=16),p==="UNIX"?(Q=798,O|=function(H,be){var Ee=H;return H||(Ee=be?16893:33204),(65535&Ee)<<16}(T.unixPermissions,ce)):(Q=20,O|=function(H){return 63&(H||0)}(T.dosPermissions)),S=Z.getUTCHours(),S<<=6,S|=Z.getUTCMinutes(),S<<=5,S|=Z.getUTCSeconds()/2,A=Z.getUTCFullYear()-1980,A<<=4,A|=Z.getUTCMonth()+1,A<<=5,A|=Z.getUTCDate(),P&&(se=s(1,1)+s(m(G),4)+L,R+="up"+s(se.length,2)+se),d&&(W=s(1,1)+s(m(ee),4)+k,R+="uc"+s(W.length,2)+W);var V="";return V+=`
\0`,V+=s(C,2),V+=U.magic,V+=s(S,2),V+=s(A,2),V+=s(ie.crc32,4),V+=s(ie.compressedSize,4),V+=s(ie.uncompressedSize,4),V+=s(G.length,2),V+=s(R.length,2),{fileRecord:g.LOCAL_FILE_HEADER+V+G+R,dirRecord:g.CENTRAL_FILE_HEADER+s(Q,2)+V+s(ee.length,2)+"\0\0\0\0"+s(O,4)+s(w,4)+G+R+ee}}var o=e("../utils"),c=e("../stream/GenericWorker"),f=e("../utf8"),m=e("../crc32"),g=e("../signature");function b(h,y,u,w){c.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=y,this.zipPlatform=u,this.encodeFileName=w,this.streamFiles=h,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(b,c),b.prototype.push=function(h){var y=h.meta.percent||0,u=this.entriesCount,w=this._sources.length;this.accumulate?this.contentBuffer.push(h):(this.bytesWritten+=h.data.length,c.prototype.push.call(this,{data:h.data,meta:{currentFile:this.currentFile,percent:u?(y+100*(u-w-1))/u:100}}))},b.prototype.openedSource=function(h){this.currentSourceOffset=this.bytesWritten,this.currentFile=h.file.name;var y=this.streamFiles&&!h.file.dir;if(y){var u=n(h,y,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:u.fileRecord,meta:{percent:0}})}else this.accumulate=!0},b.prototype.closedSource=function(h){this.accumulate=!1;var y=this.streamFiles&&!h.file.dir,u=n(h,y,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(u.dirRecord),y)this.push({data:function(w){return g.DATA_DESCRIPTOR+s(w.crc32,4)+s(w.compressedSize,4)+s(w.uncompressedSize,4)}(h),meta:{percent:100}});else for(this.push({data:u.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},b.prototype.flush=function(){for(var h=this.bytesWritten,y=0;y<this.dirRecords.length;y++)this.push({data:this.dirRecords[y],meta:{percent:100}});var u=this.bytesWritten-h,w=function(p,v,S,A,T){var U=o.transformTo("string",T(A));return g.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(p,2)+s(p,2)+s(v,4)+s(S,4)+s(U.length,2)+U}(this.dirRecords.length,u,h,this.zipComment,this.encodeFileName);this.push({data:w,meta:{percent:100}})},b.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},b.prototype.registerPrevious=function(h){this._sources.push(h);var y=this;return h.on("data",function(u){y.processChunk(u)}),h.on("end",function(){y.closedSource(y.previous.streamInfo),y._sources.length?y.prepareNextSource():y.end()}),h.on("error",function(u){y.error(u)}),this},b.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},b.prototype.error=function(h){var y=this._sources;if(!c.prototype.error.call(this,h))return!1;for(var u=0;u<y.length;u++)try{y[u].error(h)}catch{}return!0},b.prototype.lock=function(){c.prototype.lock.call(this);for(var h=this._sources,y=0;y<h.length;y++)h[y].lock()},t.exports=b},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,t,i){var s=e("../compressions"),n=e("./ZipFileWorker");i.generateWorker=function(o,c,f){var m=new n(c.streamFiles,f,c.platform,c.encodeFileName),g=0;try{o.forEach(function(b,h){g++;var y=function(v,S){var A=v||S,T=s[A];if(!T)throw new Error(A+" is not a valid compression method !");return T}(h.options.compression,c.compression),u=h.options.compressionOptions||c.compressionOptions||{},w=h.dir,p=h.date;h._compressWorker(y,u).withStreamInfo("file",{name:b,dir:w,date:p,comment:h.comment||"",unixPermissions:h.unixPermissions,dosPermissions:h.dosPermissions}).pipe(m)}),m.entriesCount=g}catch(b){m.error(b)}return m}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,t,i){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var n=new s;for(var o in this)typeof this[o]!="function"&&(n[o]=this[o]);return n}}(s.prototype=e("./object")).loadAsync=e("./load"),s.support=e("./support"),s.defaults=e("./defaults"),s.version="3.10.1",s.loadAsync=function(n,o){return new s().loadAsync(n,o)},s.external=e("./external"),t.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,t,i){var s=e("./utils"),n=e("./external"),o=e("./utf8"),c=e("./zipEntries"),f=e("./stream/Crc32Probe"),m=e("./nodejsUtils");function g(b){return new n.Promise(function(h,y){var u=b.decompressed.getContentWorker().pipe(new f);u.on("error",function(w){y(w)}).on("end",function(){u.streamInfo.crc32!==b.decompressed.crc32?y(new Error("Corrupted zip : CRC32 mismatch")):h()}).resume()})}t.exports=function(b,h){var y=this;return h=s.extend(h||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),m.isNode&&m.isStream(b)?n.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",b,!0,h.optimizedBinaryString,h.base64).then(function(u){var w=new c(h);return w.load(u),w}).then(function(u){var w=[n.Promise.resolve(u)],p=u.files;if(h.checkCRC32)for(var v=0;v<p.length;v++)w.push(g(p[v]));return n.Promise.all(w)}).then(function(u){for(var w=u.shift(),p=w.files,v=0;v<p.length;v++){var S=p[v],A=S.fileNameStr,T=s.resolve(S.fileNameStr);y.file(T,S.decompressed,{binary:!0,optimizedBinaryString:!0,date:S.date,dir:S.dir,comment:S.fileCommentStr.length?S.fileCommentStr:null,unixPermissions:S.unixPermissions,dosPermissions:S.dosPermissions,createFolders:h.createFolders}),S.dir||(y.file(T).unsafeOriginalName=A)}return w.zipComment.length&&(y.comment=w.zipComment),y})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,t,i){var s=e("../utils"),n=e("../stream/GenericWorker");function o(c,f){n.call(this,"Nodejs stream input adapter for "+c),this._upstreamEnded=!1,this._bindStream(f)}s.inherits(o,n),o.prototype._bindStream=function(c){var f=this;(this._stream=c).pause(),c.on("data",function(m){f.push({data:m,meta:{percent:0}})}).on("error",function(m){f.isPaused?this.generatedError=m:f.error(m)}).on("end",function(){f.isPaused?f._upstreamEnded=!0:f.end()})},o.prototype.pause=function(){return!!n.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!n.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},t.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,t,i){var s=e("readable-stream").Readable;function n(o,c,f){s.call(this,c),this._helper=o;var m=this;o.on("data",function(g,b){m.push(g)||m._helper.pause(),f&&f(b)}).on("error",function(g){m.emit("error",g)}).on("end",function(){m.push(null)})}e("../utils").inherits(n,s),n.prototype._read=function(){this._helper.resume()},t.exports=n},{"../utils":32,"readable-stream":16}],14:[function(e,t,i){t.exports={isNode:typeof Buffer<"u",newBufferFrom:function(s,n){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,n);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,n)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var n=new Buffer(s);return n.fill(0),n},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(e,t,i){function s(T,U,M){var G,L=o.getTypeOf(U),K=o.extend(M||{},m);K.date=K.date||new Date,K.compression!==null&&(K.compression=K.compression.toUpperCase()),typeof K.unixPermissions=="string"&&(K.unixPermissions=parseInt(K.unixPermissions,8)),K.unixPermissions&&16384&K.unixPermissions&&(K.dir=!0),K.dosPermissions&&16&K.dosPermissions&&(K.dir=!0),K.dir&&(T=p(T)),K.createFolders&&(G=w(T))&&v.call(this,G,!0);var ee=L==="string"&&K.binary===!1&&K.base64===!1;M&&M.binary!==void 0||(K.binary=!ee),(U instanceof g&&U.uncompressedSize===0||K.dir||!U||U.length===0)&&(K.base64=!1,K.binary=!0,U="",K.compression="STORE",L="string");var k=null;k=U instanceof g||U instanceof c?U:y.isNode&&y.isStream(U)?new u(T,U):o.prepareContent(T,U,K.binary,K.optimizedBinaryString,K.base64);var P=new b(T,k,K);this.files[T]=P}var n=e("./utf8"),o=e("./utils"),c=e("./stream/GenericWorker"),f=e("./stream/StreamHelper"),m=e("./defaults"),g=e("./compressedObject"),b=e("./zipObject"),h=e("./generate"),y=e("./nodejsUtils"),u=e("./nodejs/NodejsStreamInputAdapter"),w=function(T){T.slice(-1)==="/"&&(T=T.substring(0,T.length-1));var U=T.lastIndexOf("/");return 0<U?T.substring(0,U):""},p=function(T){return T.slice(-1)!=="/"&&(T+="/"),T},v=function(T,U){return U=U!==void 0?U:m.createFolders,T=p(T),this.files[T]||s.call(this,T,null,{dir:!0,createFolders:U}),this.files[T]};function S(T){return Object.prototype.toString.call(T)==="[object RegExp]"}var A={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(T){var U,M,G;for(U in this.files)G=this.files[U],(M=U.slice(this.root.length,U.length))&&U.slice(0,this.root.length)===this.root&&T(M,G)},filter:function(T){var U=[];return this.forEach(function(M,G){T(M,G)&&U.push(G)}),U},file:function(T,U,M){if(arguments.length!==1)return T=this.root+T,s.call(this,T,U,M),this;if(S(T)){var G=T;return this.filter(function(K,ee){return!ee.dir&&G.test(K)})}var L=this.files[this.root+T];return L&&!L.dir?L:null},folder:function(T){if(!T)return this;if(S(T))return this.filter(function(L,K){return K.dir&&T.test(L)});var U=this.root+T,M=v.call(this,U),G=this.clone();return G.root=M.name,G},remove:function(T){T=this.root+T;var U=this.files[T];if(U||(T.slice(-1)!=="/"&&(T+="/"),U=this.files[T]),U&&!U.dir)delete this.files[T];else for(var M=this.filter(function(L,K){return K.name.slice(0,T.length)===T}),G=0;G<M.length;G++)delete this.files[M[G].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(T){var U,M={};try{if((M=o.extend(T||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:n.utf8encode})).type=M.type.toLowerCase(),M.compression=M.compression.toUpperCase(),M.type==="binarystring"&&(M.type="string"),!M.type)throw new Error("No output type specified.");o.checkSupport(M.type),M.platform!=="darwin"&&M.platform!=="freebsd"&&M.platform!=="linux"&&M.platform!=="sunos"||(M.platform="UNIX"),M.platform==="win32"&&(M.platform="DOS");var G=M.comment||this.comment||"";U=h.generateWorker(this,M,G)}catch(L){(U=new c("error")).error(L)}return new f(U,M.type||"string",M.mimeType)},generateAsync:function(T,U){return this.generateInternalStream(T).accumulate(U)},generateNodeStream:function(T,U){return(T=T||{}).type||(T.type="nodebuffer"),this.generateInternalStream(T).toNodejsStream(U)}};t.exports=A},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,t,i){t.exports=e("stream")},{stream:void 0}],17:[function(e,t,i){var s=e("./DataReader");function n(o){s.call(this,o);for(var c=0;c<this.data.length;c++)o[c]=255&o[c]}e("../utils").inherits(n,s),n.prototype.byteAt=function(o){return this.data[this.zero+o]},n.prototype.lastIndexOfSignature=function(o){for(var c=o.charCodeAt(0),f=o.charCodeAt(1),m=o.charCodeAt(2),g=o.charCodeAt(3),b=this.length-4;0<=b;--b)if(this.data[b]===c&&this.data[b+1]===f&&this.data[b+2]===m&&this.data[b+3]===g)return b-this.zero;return-1},n.prototype.readAndCheckSignature=function(o){var c=o.charCodeAt(0),f=o.charCodeAt(1),m=o.charCodeAt(2),g=o.charCodeAt(3),b=this.readData(4);return c===b[0]&&f===b[1]&&m===b[2]&&g===b[3]},n.prototype.readData=function(o){if(this.checkOffset(o),o===0)return[];var c=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,c},t.exports=n},{"../utils":32,"./DataReader":18}],18:[function(e,t,i){var s=e("../utils");function n(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}n.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var c,f=0;for(this.checkOffset(o),c=this.index+o-1;c>=this.index;c--)f=(f<<8)+this.byteAt(c);return this.index+=o,f},readString:function(o){return s.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC(1980+(o>>25&127),(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(31&o)<<1))}},t.exports=n},{"../utils":32}],19:[function(e,t,i){var s=e("./Uint8ArrayReader");function n(o){s.call(this,o)}e("../utils").inherits(n,s),n.prototype.readData=function(o){this.checkOffset(o);var c=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,c},t.exports=n},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,t,i){var s=e("./DataReader");function n(o){s.call(this,o)}e("../utils").inherits(n,s),n.prototype.byteAt=function(o){return this.data.charCodeAt(this.zero+o)},n.prototype.lastIndexOfSignature=function(o){return this.data.lastIndexOf(o)-this.zero},n.prototype.readAndCheckSignature=function(o){return o===this.readData(4)},n.prototype.readData=function(o){this.checkOffset(o);var c=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,c},t.exports=n},{"../utils":32,"./DataReader":18}],21:[function(e,t,i){var s=e("./ArrayReader");function n(o){s.call(this,o)}e("../utils").inherits(n,s),n.prototype.readData=function(o){if(this.checkOffset(o),o===0)return new Uint8Array(0);var c=this.data.subarray(this.zero+this.index,this.zero+this.index+o);return this.index+=o,c},t.exports=n},{"../utils":32,"./ArrayReader":17}],22:[function(e,t,i){var s=e("../utils"),n=e("../support"),o=e("./ArrayReader"),c=e("./StringReader"),f=e("./NodeBufferReader"),m=e("./Uint8ArrayReader");t.exports=function(g){var b=s.getTypeOf(g);return s.checkSupport(b),b!=="string"||n.uint8array?b==="nodebuffer"?new f(g):n.uint8array?new m(s.transformTo("uint8array",g)):new o(s.transformTo("array",g)):new c(g)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,t,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(e,t,i){var s=e("./GenericWorker"),n=e("../utils");function o(c){s.call(this,"ConvertWorker to "+c),this.destType=c}n.inherits(o,s),o.prototype.processChunk=function(c){this.push({data:n.transformTo(this.destType,c.data),meta:c.meta})},t.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(e,t,i){var s=e("./GenericWorker"),n=e("../crc32");function o(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(o,s),o.prototype.processChunk=function(c){this.streamInfo.crc32=n(c.data,this.streamInfo.crc32||0),this.push(c)},t.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,t,i){var s=e("../utils"),n=e("./GenericWorker");function o(c){n.call(this,"DataLengthProbe for "+c),this.propName=c,this.withStreamInfo(c,0)}s.inherits(o,n),o.prototype.processChunk=function(c){if(c){var f=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=f+c.data.length}n.prototype.processChunk.call(this,c)},t.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(e,t,i){var s=e("../utils"),n=e("./GenericWorker");function o(c){n.call(this,"DataWorker");var f=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,c.then(function(m){f.dataIsReady=!0,f.data=m,f.max=m&&m.length||0,f.type=s.getTypeOf(m),f.isPaused||f._tickAndRepeat()},function(m){f.error(m)})}s.inherits(o,n),o.prototype.cleanUp=function(){n.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!n.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var c=null,f=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":c=this.data.substring(this.index,f);break;case"uint8array":c=this.data.subarray(this.index,f);break;case"array":case"nodebuffer":c=this.data.slice(this.index,f)}return this.index=f,this.push({data:c,meta:{percent:this.max?this.index/this.max*100:0}})},t.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(e,t,i){function s(n){this.name=n||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(n){this.emit("data",n)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(n){this.emit("error",n)}return!0},error:function(n){return!this.isFinished&&(this.isPaused?this.generatedError=n:(this.isFinished=!0,this.emit("error",n),this.previous&&this.previous.error(n),this.cleanUp()),!0)},on:function(n,o){return this._listeners[n].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(n,o){if(this._listeners[n])for(var c=0;c<this._listeners[n].length;c++)this._listeners[n][c].call(this,o)},pipe:function(n){return n.registerPrevious(this)},registerPrevious:function(n){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=n.streamInfo,this.mergeStreamInfo(),this.previous=n;var o=this;return n.on("data",function(c){o.processChunk(c)}),n.on("end",function(){o.end()}),n.on("error",function(c){o.error(c)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var n=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),n=!0),this.previous&&this.previous.resume(),!n},flush:function(){},processChunk:function(n){this.push(n)},withStreamInfo:function(n,o){return this.extraStreamInfo[n]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var n in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,n)&&(this.streamInfo[n]=this.extraStreamInfo[n])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var n="Worker "+this.name;return this.previous?this.previous+" -> "+n:n}},t.exports=s},{}],29:[function(e,t,i){var s=e("../utils"),n=e("./ConvertWorker"),o=e("./GenericWorker"),c=e("../base64"),f=e("../support"),m=e("../external"),g=null;if(f.nodestream)try{g=e("../nodejs/NodejsStreamOutputAdapter")}catch{}function b(y,u){return new m.Promise(function(w,p){var v=[],S=y._internalType,A=y._outputType,T=y._mimeType;y.on("data",function(U,M){v.push(U),u&&u(M)}).on("error",function(U){v=[],p(U)}).on("end",function(){try{var U=function(M,G,L){switch(M){case"blob":return s.newBlob(s.transformTo("arraybuffer",G),L);case"base64":return c.encode(G);default:return s.transformTo(M,G)}}(A,function(M,G){var L,K=0,ee=null,k=0;for(L=0;L<G.length;L++)k+=G[L].length;switch(M){case"string":return G.join("");case"array":return Array.prototype.concat.apply([],G);case"uint8array":for(ee=new Uint8Array(k),L=0;L<G.length;L++)ee.set(G[L],K),K+=G[L].length;return ee;case"nodebuffer":return Buffer.concat(G);default:throw new Error("concat : unsupported type '"+M+"'")}}(S,v),T);w(U)}catch(M){p(M)}v=[]}).resume()})}function h(y,u,w){var p=u;switch(u){case"blob":case"arraybuffer":p="uint8array";break;case"base64":p="string"}try{this._internalType=p,this._outputType=u,this._mimeType=w,s.checkSupport(p),this._worker=y.pipe(new n(p)),y.lock()}catch(v){this._worker=new o("error"),this._worker.error(v)}}h.prototype={accumulate:function(y){return b(this,y)},on:function(y,u){var w=this;return y==="data"?this._worker.on(y,function(p){u.call(w,p.data,p.meta)}):this._worker.on(y,function(){s.delay(u,arguments,w)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(y){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new g(this,{objectMode:this._outputType!=="nodebuffer"},y)}},t.exports=h},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,t,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var s=new ArrayBuffer(0);try{i.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var n=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);n.append(s),i.blob=n.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!e("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(e,t,i){for(var s=e("./utils"),n=e("./support"),o=e("./nodejsUtils"),c=e("./stream/GenericWorker"),f=new Array(256),m=0;m<256;m++)f[m]=252<=m?6:248<=m?5:240<=m?4:224<=m?3:192<=m?2:1;f[254]=f[254]=1;function g(){c.call(this,"utf-8 decode"),this.leftOver=null}function b(){c.call(this,"utf-8 encode")}i.utf8encode=function(h){return n.nodebuffer?o.newBufferFrom(h,"utf-8"):function(y){var u,w,p,v,S,A=y.length,T=0;for(v=0;v<A;v++)(64512&(w=y.charCodeAt(v)))==55296&&v+1<A&&(64512&(p=y.charCodeAt(v+1)))==56320&&(w=65536+(w-55296<<10)+(p-56320),v++),T+=w<128?1:w<2048?2:w<65536?3:4;for(u=n.uint8array?new Uint8Array(T):new Array(T),v=S=0;S<T;v++)(64512&(w=y.charCodeAt(v)))==55296&&v+1<A&&(64512&(p=y.charCodeAt(v+1)))==56320&&(w=65536+(w-55296<<10)+(p-56320),v++),w<128?u[S++]=w:(w<2048?u[S++]=192|w>>>6:(w<65536?u[S++]=224|w>>>12:(u[S++]=240|w>>>18,u[S++]=128|w>>>12&63),u[S++]=128|w>>>6&63),u[S++]=128|63&w);return u}(h)},i.utf8decode=function(h){return n.nodebuffer?s.transformTo("nodebuffer",h).toString("utf-8"):function(y){var u,w,p,v,S=y.length,A=new Array(2*S);for(u=w=0;u<S;)if((p=y[u++])<128)A[w++]=p;else if(4<(v=f[p]))A[w++]=65533,u+=v-1;else{for(p&=v===2?31:v===3?15:7;1<v&&u<S;)p=p<<6|63&y[u++],v--;1<v?A[w++]=65533:p<65536?A[w++]=p:(p-=65536,A[w++]=55296|p>>10&1023,A[w++]=56320|1023&p)}return A.length!==w&&(A.subarray?A=A.subarray(0,w):A.length=w),s.applyFromCharCode(A)}(h=s.transformTo(n.uint8array?"uint8array":"array",h))},s.inherits(g,c),g.prototype.processChunk=function(h){var y=s.transformTo(n.uint8array?"uint8array":"array",h.data);if(this.leftOver&&this.leftOver.length){if(n.uint8array){var u=y;(y=new Uint8Array(u.length+this.leftOver.length)).set(this.leftOver,0),y.set(u,this.leftOver.length)}else y=this.leftOver.concat(y);this.leftOver=null}var w=function(v,S){var A;for((S=S||v.length)>v.length&&(S=v.length),A=S-1;0<=A&&(192&v[A])==128;)A--;return A<0||A===0?S:A+f[v[A]]>S?A:S}(y),p=y;w!==y.length&&(n.uint8array?(p=y.subarray(0,w),this.leftOver=y.subarray(w,y.length)):(p=y.slice(0,w),this.leftOver=y.slice(w,y.length))),this.push({data:i.utf8decode(p),meta:h.meta})},g.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=g,s.inherits(b,c),b.prototype.processChunk=function(h){this.push({data:i.utf8encode(h.data),meta:h.meta})},i.Utf8EncodeWorker=b},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,t,i){var s=e("./support"),n=e("./base64"),o=e("./nodejsUtils"),c=e("./external");function f(u){return u}function m(u,w){for(var p=0;p<u.length;++p)w[p]=255&u.charCodeAt(p);return w}e("setimmediate"),i.newBlob=function(u,w){i.checkSupport("blob");try{return new Blob([u],{type:w})}catch{try{var p=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return p.append(u),p.getBlob(w)}catch{throw new Error("Bug : can't construct the Blob.")}}};var g={stringifyByChunk:function(u,w,p){var v=[],S=0,A=u.length;if(A<=p)return String.fromCharCode.apply(null,u);for(;S<A;)w==="array"||w==="nodebuffer"?v.push(String.fromCharCode.apply(null,u.slice(S,Math.min(S+p,A)))):v.push(String.fromCharCode.apply(null,u.subarray(S,Math.min(S+p,A)))),S+=p;return v.join("")},stringifyByChar:function(u){for(var w="",p=0;p<u.length;p++)w+=String.fromCharCode(u[p]);return w},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}}()}};function b(u){var w=65536,p=i.getTypeOf(u),v=!0;if(p==="uint8array"?v=g.applyCanBeUsed.uint8array:p==="nodebuffer"&&(v=g.applyCanBeUsed.nodebuffer),v)for(;1<w;)try{return g.stringifyByChunk(u,p,w)}catch{w=Math.floor(w/2)}return g.stringifyByChar(u)}function h(u,w){for(var p=0;p<u.length;p++)w[p]=u[p];return w}i.applyFromCharCode=b;var y={};y.string={string:f,array:function(u){return m(u,new Array(u.length))},arraybuffer:function(u){return y.string.uint8array(u).buffer},uint8array:function(u){return m(u,new Uint8Array(u.length))},nodebuffer:function(u){return m(u,o.allocBuffer(u.length))}},y.array={string:b,array:f,arraybuffer:function(u){return new Uint8Array(u).buffer},uint8array:function(u){return new Uint8Array(u)},nodebuffer:function(u){return o.newBufferFrom(u)}},y.arraybuffer={string:function(u){return b(new Uint8Array(u))},array:function(u){return h(new Uint8Array(u),new Array(u.byteLength))},arraybuffer:f,uint8array:function(u){return new Uint8Array(u)},nodebuffer:function(u){return o.newBufferFrom(new Uint8Array(u))}},y.uint8array={string:b,array:function(u){return h(u,new Array(u.length))},arraybuffer:function(u){return u.buffer},uint8array:f,nodebuffer:function(u){return o.newBufferFrom(u)}},y.nodebuffer={string:b,array:function(u){return h(u,new Array(u.length))},arraybuffer:function(u){return y.nodebuffer.uint8array(u).buffer},uint8array:function(u){return h(u,new Uint8Array(u.length))},nodebuffer:f},i.transformTo=function(u,w){if(w=w||"",!u)return w;i.checkSupport(u);var p=i.getTypeOf(w);return y[p][u](w)},i.resolve=function(u){for(var w=u.split("/"),p=[],v=0;v<w.length;v++){var S=w[v];S==="."||S===""&&v!==0&&v!==w.length-1||(S===".."?p.pop():p.push(S))}return p.join("/")},i.getTypeOf=function(u){return typeof u=="string"?"string":Object.prototype.toString.call(u)==="[object Array]"?"array":s.nodebuffer&&o.isBuffer(u)?"nodebuffer":s.uint8array&&u instanceof Uint8Array?"uint8array":s.arraybuffer&&u instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(u){if(!s[u.toLowerCase()])throw new Error(u+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(u){var w,p,v="";for(p=0;p<(u||"").length;p++)v+="\\x"+((w=u.charCodeAt(p))<16?"0":"")+w.toString(16).toUpperCase();return v},i.delay=function(u,w,p){setImmediate(function(){u.apply(p||null,w||[])})},i.inherits=function(u,w){function p(){}p.prototype=w.prototype,u.prototype=new p},i.extend=function(){var u,w,p={};for(u=0;u<arguments.length;u++)for(w in arguments[u])Object.prototype.hasOwnProperty.call(arguments[u],w)&&p[w]===void 0&&(p[w]=arguments[u][w]);return p},i.prepareContent=function(u,w,p,v,S){return c.Promise.resolve(w).then(function(A){return s.blob&&(A instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(A))!==-1)&&typeof FileReader<"u"?new c.Promise(function(T,U){var M=new FileReader;M.onload=function(G){T(G.target.result)},M.onerror=function(G){U(G.target.error)},M.readAsArrayBuffer(A)}):A}).then(function(A){var T=i.getTypeOf(A);return T?(T==="arraybuffer"?A=i.transformTo("uint8array",A):T==="string"&&(S?A=n.decode(A):p&&v!==!0&&(A=function(U){return m(U,s.uint8array?new Uint8Array(U.length):new Array(U.length))}(A))),A):c.Promise.reject(new Error("Can't read the data of '"+u+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,t,i){var s=e("./reader/readerFor"),n=e("./utils"),o=e("./signature"),c=e("./zipEntry"),f=e("./support");function m(g){this.files=[],this.loadOptions=g}m.prototype={checkSignature:function(g){if(!this.reader.readAndCheckSignature(g)){this.reader.index-=4;var b=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+n.pretty(b)+", expected "+n.pretty(g)+")")}},isSignature:function(g,b){var h=this.reader.index;this.reader.setIndex(g);var y=this.reader.readString(4)===b;return this.reader.setIndex(h),y},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var g=this.reader.readData(this.zipCommentLength),b=f.uint8array?"uint8array":"array",h=n.transformTo(b,g);this.zipComment=this.loadOptions.decodeFileName(h)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var g,b,h,y=this.zip64EndOfCentralSize-44;0<y;)g=this.reader.readInt(2),b=this.reader.readInt(4),h=this.reader.readData(b),this.zip64ExtensibleData[g]={id:g,length:b,value:h}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var g,b;for(g=0;g<this.files.length;g++)b=this.files[g],this.reader.setIndex(b.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),b.readLocalPart(this.reader),b.handleUTF8(),b.processAttributes()},readCentralDir:function(){var g;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(g=new c({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(g);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var g=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(g<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(g);var b=g;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===n.MAX_VALUE_16BITS||this.diskWithCentralDirStart===n.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===n.MAX_VALUE_16BITS||this.centralDirRecords===n.MAX_VALUE_16BITS||this.centralDirSize===n.MAX_VALUE_32BITS||this.centralDirOffset===n.MAX_VALUE_32BITS){if(this.zip64=!0,(g=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(g),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var h=this.centralDirOffset+this.centralDirSize;this.zip64&&(h+=20,h+=12+this.zip64EndOfCentralSize);var y=b-h;if(0<y)this.isSignature(b,o.CENTRAL_FILE_HEADER)||(this.reader.zero=y);else if(y<0)throw new Error("Corrupted zip: missing "+Math.abs(y)+" bytes.")},prepareReader:function(g){this.reader=s(g)},load:function(g){this.prepareReader(g),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=m},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,t,i){var s=e("./reader/readerFor"),n=e("./utils"),o=e("./compressedObject"),c=e("./crc32"),f=e("./utf8"),m=e("./compressions"),g=e("./support");function b(h,y){this.options=h,this.loadOptions=y}b.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(h){var y,u;if(h.skip(22),this.fileNameLength=h.readInt(2),u=h.readInt(2),this.fileName=h.readData(this.fileNameLength),h.skip(u),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((y=function(w){for(var p in m)if(Object.prototype.hasOwnProperty.call(m,p)&&m[p].magic===w)return m[p];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+n.pretty(this.compressionMethod)+" unknown (inner file : "+n.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,y,h.readData(this.compressedSize))},readCentralPart:function(h){this.versionMadeBy=h.readInt(2),h.skip(2),this.bitFlag=h.readInt(2),this.compressionMethod=h.readString(2),this.date=h.readDate(),this.crc32=h.readInt(4),this.compressedSize=h.readInt(4),this.uncompressedSize=h.readInt(4);var y=h.readInt(2);if(this.extraFieldsLength=h.readInt(2),this.fileCommentLength=h.readInt(2),this.diskNumberStart=h.readInt(2),this.internalFileAttributes=h.readInt(2),this.externalFileAttributes=h.readInt(4),this.localHeaderOffset=h.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");h.skip(y),this.readExtraFields(h),this.parseZIP64ExtraField(h),this.fileComment=h.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var h=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),h==0&&(this.dosPermissions=63&this.externalFileAttributes),h==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var h=s(this.extraFields[1].value);this.uncompressedSize===n.MAX_VALUE_32BITS&&(this.uncompressedSize=h.readInt(8)),this.compressedSize===n.MAX_VALUE_32BITS&&(this.compressedSize=h.readInt(8)),this.localHeaderOffset===n.MAX_VALUE_32BITS&&(this.localHeaderOffset=h.readInt(8)),this.diskNumberStart===n.MAX_VALUE_32BITS&&(this.diskNumberStart=h.readInt(4))}},readExtraFields:function(h){var y,u,w,p=h.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});h.index+4<p;)y=h.readInt(2),u=h.readInt(2),w=h.readData(u),this.extraFields[y]={id:y,length:u,value:w};h.setIndex(p)},handleUTF8:function(){var h=g.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=f.utf8decode(this.fileName),this.fileCommentStr=f.utf8decode(this.fileComment);else{var y=this.findExtraFieldUnicodePath();if(y!==null)this.fileNameStr=y;else{var u=n.transformTo(h,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(u)}var w=this.findExtraFieldUnicodeComment();if(w!==null)this.fileCommentStr=w;else{var p=n.transformTo(h,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(p)}}},findExtraFieldUnicodePath:function(){var h=this.extraFields[28789];if(h){var y=s(h.value);return y.readInt(1)!==1||c(this.fileName)!==y.readInt(4)?null:f.utf8decode(y.readData(h.length-5))}return null},findExtraFieldUnicodeComment:function(){var h=this.extraFields[25461];if(h){var y=s(h.value);return y.readInt(1)!==1||c(this.fileComment)!==y.readInt(4)?null:f.utf8decode(y.readData(h.length-5))}return null}},t.exports=b},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,t,i){function s(y,u,w){this.name=y,this.dir=w.dir,this.date=w.date,this.comment=w.comment,this.unixPermissions=w.unixPermissions,this.dosPermissions=w.dosPermissions,this._data=u,this._dataBinary=w.binary,this.options={compression:w.compression,compressionOptions:w.compressionOptions}}var n=e("./stream/StreamHelper"),o=e("./stream/DataWorker"),c=e("./utf8"),f=e("./compressedObject"),m=e("./stream/GenericWorker");s.prototype={internalStream:function(y){var u=null,w="string";try{if(!y)throw new Error("No output type specified.");var p=(w=y.toLowerCase())==="string"||w==="text";w!=="binarystring"&&w!=="text"||(w="string"),u=this._decompressWorker();var v=!this._dataBinary;v&&!p&&(u=u.pipe(new c.Utf8EncodeWorker)),!v&&p&&(u=u.pipe(new c.Utf8DecodeWorker))}catch(S){(u=new m("error")).error(S)}return new n(u,w,"")},async:function(y,u){return this.internalStream(y).accumulate(u)},nodeStream:function(y,u){return this.internalStream(y||"nodebuffer").toNodejsStream(u)},_compressWorker:function(y,u){if(this._data instanceof f&&this._data.compression.magic===y.magic)return this._data.getCompressedWorker();var w=this._decompressWorker();return this._dataBinary||(w=w.pipe(new c.Utf8EncodeWorker)),f.createWorkerFrom(w,y,u)},_decompressWorker:function(){return this._data instanceof f?this._data.getContentWorker():this._data instanceof m?this._data:new o(this._data)}};for(var g=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],b=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},h=0;h<g.length;h++)s.prototype[g[h]]=b;t.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,t,i){(function(s){var n,o,c=s.MutationObserver||s.WebKitMutationObserver;if(c){var f=0,m=new c(y),g=s.document.createTextNode("");m.observe(g,{characterData:!0}),n=function(){g.data=f=++f%2}}else if(s.setImmediate||s.MessageChannel===void 0)n="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var u=s.document.createElement("script");u.onreadystatechange=function(){y(),u.onreadystatechange=null,u.parentNode.removeChild(u),u=null},s.document.documentElement.appendChild(u)}:function(){setTimeout(y,0)};else{var b=new s.MessageChannel;b.port1.onmessage=y,n=function(){b.port2.postMessage(0)}}var h=[];function y(){var u,w;o=!0;for(var p=h.length;p;){for(w=h,h=[],u=-1;++u<p;)w[u]();p=h.length}o=!1}t.exports=function(u){h.push(u)!==1||o||n()}}).call(this,typeof Ot<"u"?Ot:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(e,t,i){var s=e("immediate");function n(){}var o={},c=["REJECTED"],f=["FULFILLED"],m=["PENDING"];function g(p){if(typeof p!="function")throw new TypeError("resolver must be a function");this.state=m,this.queue=[],this.outcome=void 0,p!==n&&u(this,p)}function b(p,v,S){this.promise=p,typeof v=="function"&&(this.onFulfilled=v,this.callFulfilled=this.otherCallFulfilled),typeof S=="function"&&(this.onRejected=S,this.callRejected=this.otherCallRejected)}function h(p,v,S){s(function(){var A;try{A=v(S)}catch(T){return o.reject(p,T)}A===p?o.reject(p,new TypeError("Cannot resolve promise with itself")):o.resolve(p,A)})}function y(p){var v=p&&p.then;if(p&&(typeof p=="object"||typeof p=="function")&&typeof v=="function")return function(){v.apply(p,arguments)}}function u(p,v){var S=!1;function A(M){S||(S=!0,o.reject(p,M))}function T(M){S||(S=!0,o.resolve(p,M))}var U=w(function(){v(T,A)});U.status==="error"&&A(U.value)}function w(p,v){var S={};try{S.value=p(v),S.status="success"}catch(A){S.status="error",S.value=A}return S}(t.exports=g).prototype.finally=function(p){if(typeof p!="function")return this;var v=this.constructor;return this.then(function(S){return v.resolve(p()).then(function(){return S})},function(S){return v.resolve(p()).then(function(){throw S})})},g.prototype.catch=function(p){return this.then(null,p)},g.prototype.then=function(p,v){if(typeof p!="function"&&this.state===f||typeof v!="function"&&this.state===c)return this;var S=new this.constructor(n);return this.state!==m?h(S,this.state===f?p:v,this.outcome):this.queue.push(new b(S,p,v)),S},b.prototype.callFulfilled=function(p){o.resolve(this.promise,p)},b.prototype.otherCallFulfilled=function(p){h(this.promise,this.onFulfilled,p)},b.prototype.callRejected=function(p){o.reject(this.promise,p)},b.prototype.otherCallRejected=function(p){h(this.promise,this.onRejected,p)},o.resolve=function(p,v){var S=w(y,v);if(S.status==="error")return o.reject(p,S.value);var A=S.value;if(A)u(p,A);else{p.state=f,p.outcome=v;for(var T=-1,U=p.queue.length;++T<U;)p.queue[T].callFulfilled(v)}return p},o.reject=function(p,v){p.state=c,p.outcome=v;for(var S=-1,A=p.queue.length;++S<A;)p.queue[S].callRejected(v);return p},g.resolve=function(p){return p instanceof this?p:o.resolve(new this(n),p)},g.reject=function(p){var v=new this(n);return o.reject(v,p)},g.all=function(p){var v=this;if(Object.prototype.toString.call(p)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=p.length,A=!1;if(!S)return this.resolve([]);for(var T=new Array(S),U=0,M=-1,G=new this(n);++M<S;)L(p[M],M);return G;function L(K,ee){v.resolve(K).then(function(k){T[ee]=k,++U!==S||A||(A=!0,o.resolve(G,T))},function(k){A||(A=!0,o.reject(G,k))})}},g.race=function(p){var v=this;if(Object.prototype.toString.call(p)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=p.length,A=!1;if(!S)return this.resolve([]);for(var T=-1,U=new this(n);++T<S;)M=p[T],v.resolve(M).then(function(G){A||(A=!0,o.resolve(U,G))},function(G){A||(A=!0,o.reject(U,G))});var M;return U}},{immediate:36}],38:[function(e,t,i){var s={};(0,e("./lib/utils/common").assign)(s,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),t.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,t,i){var s=e("./zlib/deflate"),n=e("./utils/common"),o=e("./utils/strings"),c=e("./zlib/messages"),f=e("./zlib/zstream"),m=Object.prototype.toString,g=0,b=-1,h=0,y=8;function u(p){if(!(this instanceof u))return new u(p);this.options=n.assign({level:b,method:y,chunkSize:16384,windowBits:15,memLevel:8,strategy:h,to:""},p||{});var v=this.options;v.raw&&0<v.windowBits?v.windowBits=-v.windowBits:v.gzip&&0<v.windowBits&&v.windowBits<16&&(v.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var S=s.deflateInit2(this.strm,v.level,v.method,v.windowBits,v.memLevel,v.strategy);if(S!==g)throw new Error(c[S]);if(v.header&&s.deflateSetHeader(this.strm,v.header),v.dictionary){var A;if(A=typeof v.dictionary=="string"?o.string2buf(v.dictionary):m.call(v.dictionary)==="[object ArrayBuffer]"?new Uint8Array(v.dictionary):v.dictionary,(S=s.deflateSetDictionary(this.strm,A))!==g)throw new Error(c[S]);this._dict_set=!0}}function w(p,v){var S=new u(v);if(S.push(p,!0),S.err)throw S.msg||c[S.err];return S.result}u.prototype.push=function(p,v){var S,A,T=this.strm,U=this.options.chunkSize;if(this.ended)return!1;A=v===~~v?v:v===!0?4:0,typeof p=="string"?T.input=o.string2buf(p):m.call(p)==="[object ArrayBuffer]"?T.input=new Uint8Array(p):T.input=p,T.next_in=0,T.avail_in=T.input.length;do{if(T.avail_out===0&&(T.output=new n.Buf8(U),T.next_out=0,T.avail_out=U),(S=s.deflate(T,A))!==1&&S!==g)return this.onEnd(S),!(this.ended=!0);T.avail_out!==0&&(T.avail_in!==0||A!==4&&A!==2)||(this.options.to==="string"?this.onData(o.buf2binstring(n.shrinkBuf(T.output,T.next_out))):this.onData(n.shrinkBuf(T.output,T.next_out)))}while((0<T.avail_in||T.avail_out===0)&&S!==1);return A===4?(S=s.deflateEnd(this.strm),this.onEnd(S),this.ended=!0,S===g):A!==2||(this.onEnd(g),!(T.avail_out=0))},u.prototype.onData=function(p){this.chunks.push(p)},u.prototype.onEnd=function(p){p===g&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=n.flattenChunks(this.chunks)),this.chunks=[],this.err=p,this.msg=this.strm.msg},i.Deflate=u,i.deflate=w,i.deflateRaw=function(p,v){return(v=v||{}).raw=!0,w(p,v)},i.gzip=function(p,v){return(v=v||{}).gzip=!0,w(p,v)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,t,i){var s=e("./zlib/inflate"),n=e("./utils/common"),o=e("./utils/strings"),c=e("./zlib/constants"),f=e("./zlib/messages"),m=e("./zlib/zstream"),g=e("./zlib/gzheader"),b=Object.prototype.toString;function h(u){if(!(this instanceof h))return new h(u);this.options=n.assign({chunkSize:16384,windowBits:0,to:""},u||{});var w=this.options;w.raw&&0<=w.windowBits&&w.windowBits<16&&(w.windowBits=-w.windowBits,w.windowBits===0&&(w.windowBits=-15)),!(0<=w.windowBits&&w.windowBits<16)||u&&u.windowBits||(w.windowBits+=32),15<w.windowBits&&w.windowBits<48&&!(15&w.windowBits)&&(w.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new m,this.strm.avail_out=0;var p=s.inflateInit2(this.strm,w.windowBits);if(p!==c.Z_OK)throw new Error(f[p]);this.header=new g,s.inflateGetHeader(this.strm,this.header)}function y(u,w){var p=new h(w);if(p.push(u,!0),p.err)throw p.msg||f[p.err];return p.result}h.prototype.push=function(u,w){var p,v,S,A,T,U,M=this.strm,G=this.options.chunkSize,L=this.options.dictionary,K=!1;if(this.ended)return!1;v=w===~~w?w:w===!0?c.Z_FINISH:c.Z_NO_FLUSH,typeof u=="string"?M.input=o.binstring2buf(u):b.call(u)==="[object ArrayBuffer]"?M.input=new Uint8Array(u):M.input=u,M.next_in=0,M.avail_in=M.input.length;do{if(M.avail_out===0&&(M.output=new n.Buf8(G),M.next_out=0,M.avail_out=G),(p=s.inflate(M,c.Z_NO_FLUSH))===c.Z_NEED_DICT&&L&&(U=typeof L=="string"?o.string2buf(L):b.call(L)==="[object ArrayBuffer]"?new Uint8Array(L):L,p=s.inflateSetDictionary(this.strm,U)),p===c.Z_BUF_ERROR&&K===!0&&(p=c.Z_OK,K=!1),p!==c.Z_STREAM_END&&p!==c.Z_OK)return this.onEnd(p),!(this.ended=!0);M.next_out&&(M.avail_out!==0&&p!==c.Z_STREAM_END&&(M.avail_in!==0||v!==c.Z_FINISH&&v!==c.Z_SYNC_FLUSH)||(this.options.to==="string"?(S=o.utf8border(M.output,M.next_out),A=M.next_out-S,T=o.buf2string(M.output,S),M.next_out=A,M.avail_out=G-A,A&&n.arraySet(M.output,M.output,S,A,0),this.onData(T)):this.onData(n.shrinkBuf(M.output,M.next_out)))),M.avail_in===0&&M.avail_out===0&&(K=!0)}while((0<M.avail_in||M.avail_out===0)&&p!==c.Z_STREAM_END);return p===c.Z_STREAM_END&&(v=c.Z_FINISH),v===c.Z_FINISH?(p=s.inflateEnd(this.strm),this.onEnd(p),this.ended=!0,p===c.Z_OK):v!==c.Z_SYNC_FLUSH||(this.onEnd(c.Z_OK),!(M.avail_out=0))},h.prototype.onData=function(u){this.chunks.push(u)},h.prototype.onEnd=function(u){u===c.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=n.flattenChunks(this.chunks)),this.chunks=[],this.err=u,this.msg=this.strm.msg},i.Inflate=h,i.inflate=y,i.inflateRaw=function(u,w){return(w=w||{}).raw=!0,y(u,w)},i.ungzip=y},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,t,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(c){for(var f=Array.prototype.slice.call(arguments,1);f.length;){var m=f.shift();if(m){if(typeof m!="object")throw new TypeError(m+"must be non-object");for(var g in m)m.hasOwnProperty(g)&&(c[g]=m[g])}}return c},i.shrinkBuf=function(c,f){return c.length===f?c:c.subarray?c.subarray(0,f):(c.length=f,c)};var n={arraySet:function(c,f,m,g,b){if(f.subarray&&c.subarray)c.set(f.subarray(m,m+g),b);else for(var h=0;h<g;h++)c[b+h]=f[m+h]},flattenChunks:function(c){var f,m,g,b,h,y;for(f=g=0,m=c.length;f<m;f++)g+=c[f].length;for(y=new Uint8Array(g),f=b=0,m=c.length;f<m;f++)h=c[f],y.set(h,b),b+=h.length;return y}},o={arraySet:function(c,f,m,g,b){for(var h=0;h<g;h++)c[b+h]=f[m+h]},flattenChunks:function(c){return[].concat.apply([],c)}};i.setTyped=function(c){c?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,n)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,o))},i.setTyped(s)},{}],42:[function(e,t,i){var s=e("./common"),n=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{n=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var c=new s.Buf8(256),f=0;f<256;f++)c[f]=252<=f?6:248<=f?5:240<=f?4:224<=f?3:192<=f?2:1;function m(g,b){if(b<65537&&(g.subarray&&o||!g.subarray&&n))return String.fromCharCode.apply(null,s.shrinkBuf(g,b));for(var h="",y=0;y<b;y++)h+=String.fromCharCode(g[y]);return h}c[254]=c[254]=1,i.string2buf=function(g){var b,h,y,u,w,p=g.length,v=0;for(u=0;u<p;u++)(64512&(h=g.charCodeAt(u)))==55296&&u+1<p&&(64512&(y=g.charCodeAt(u+1)))==56320&&(h=65536+(h-55296<<10)+(y-56320),u++),v+=h<128?1:h<2048?2:h<65536?3:4;for(b=new s.Buf8(v),u=w=0;w<v;u++)(64512&(h=g.charCodeAt(u)))==55296&&u+1<p&&(64512&(y=g.charCodeAt(u+1)))==56320&&(h=65536+(h-55296<<10)+(y-56320),u++),h<128?b[w++]=h:(h<2048?b[w++]=192|h>>>6:(h<65536?b[w++]=224|h>>>12:(b[w++]=240|h>>>18,b[w++]=128|h>>>12&63),b[w++]=128|h>>>6&63),b[w++]=128|63&h);return b},i.buf2binstring=function(g){return m(g,g.length)},i.binstring2buf=function(g){for(var b=new s.Buf8(g.length),h=0,y=b.length;h<y;h++)b[h]=g.charCodeAt(h);return b},i.buf2string=function(g,b){var h,y,u,w,p=b||g.length,v=new Array(2*p);for(h=y=0;h<p;)if((u=g[h++])<128)v[y++]=u;else if(4<(w=c[u]))v[y++]=65533,h+=w-1;else{for(u&=w===2?31:w===3?15:7;1<w&&h<p;)u=u<<6|63&g[h++],w--;1<w?v[y++]=65533:u<65536?v[y++]=u:(u-=65536,v[y++]=55296|u>>10&1023,v[y++]=56320|1023&u)}return m(v,y)},i.utf8border=function(g,b){var h;for((b=b||g.length)>g.length&&(b=g.length),h=b-1;0<=h&&(192&g[h])==128;)h--;return h<0||h===0?b:h+c[g[h]]>b?h:b}},{"./common":41}],43:[function(e,t,i){t.exports=function(s,n,o,c){for(var f=65535&s|0,m=s>>>16&65535|0,g=0;o!==0;){for(o-=g=2e3<o?2e3:o;m=m+(f=f+n[c++]|0)|0,--g;);f%=65521,m%=65521}return f|m<<16|0}},{}],44:[function(e,t,i){t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,t,i){var s=function(){for(var n,o=[],c=0;c<256;c++){n=c;for(var f=0;f<8;f++)n=1&n?3988292384^n>>>1:n>>>1;o[c]=n}return o}();t.exports=function(n,o,c,f){var m=s,g=f+c;n^=-1;for(var b=f;b<g;b++)n=n>>>8^m[255&(n^o[b])];return-1^n}},{}],46:[function(e,t,i){var s,n=e("../utils/common"),o=e("./trees"),c=e("./adler32"),f=e("./crc32"),m=e("./messages"),g=0,b=4,h=0,y=-2,u=-1,w=4,p=2,v=8,S=9,A=286,T=30,U=19,M=2*A+1,G=15,L=3,K=258,ee=K+L+1,k=42,P=113,d=1,R=2,se=3,W=4;function ce(l,B){return l.msg=m[B],B}function Z(l){return(l<<1)-(4<l?9:0)}function ie(l){for(var B=l.length;0<=--B;)l[B]=0}function C(l){var B=l.state,D=B.pending;D>l.avail_out&&(D=l.avail_out),D!==0&&(n.arraySet(l.output,B.pending_buf,B.pending_out,D,l.next_out),l.next_out+=D,B.pending_out+=D,l.total_out+=D,l.avail_out-=D,B.pending-=D,B.pending===0&&(B.pending_out=0))}function O(l,B){o._tr_flush_block(l,0<=l.block_start?l.block_start:-1,l.strstart-l.block_start,B),l.block_start=l.strstart,C(l.strm)}function Q(l,B){l.pending_buf[l.pending++]=B}function V(l,B){l.pending_buf[l.pending++]=B>>>8&255,l.pending_buf[l.pending++]=255&B}function H(l,B){var D,_,x=l.max_chain_length,E=l.strstart,F=l.prev_length,$=l.nice_match,I=l.strstart>l.w_size-ee?l.strstart-(l.w_size-ee):0,q=l.window,J=l.w_mask,Y=l.prev,re=l.strstart+K,me=q[E+F-1],he=q[E+F];l.prev_length>=l.good_match&&(x>>=2),$>l.lookahead&&($=l.lookahead);do if(q[(D=B)+F]===he&&q[D+F-1]===me&&q[D]===q[E]&&q[++D]===q[E+1]){E+=2,D++;do;while(q[++E]===q[++D]&&q[++E]===q[++D]&&q[++E]===q[++D]&&q[++E]===q[++D]&&q[++E]===q[++D]&&q[++E]===q[++D]&&q[++E]===q[++D]&&q[++E]===q[++D]&&E<re);if(_=K-(re-E),E=re-K,F<_){if(l.match_start=B,$<=(F=_))break;me=q[E+F-1],he=q[E+F]}}while((B=Y[B&J])>I&&--x!=0);return F<=l.lookahead?F:l.lookahead}function be(l){var B,D,_,x,E,F,$,I,q,J,Y=l.w_size;do{if(x=l.window_size-l.lookahead-l.strstart,l.strstart>=Y+(Y-ee)){for(n.arraySet(l.window,l.window,Y,Y,0),l.match_start-=Y,l.strstart-=Y,l.block_start-=Y,B=D=l.hash_size;_=l.head[--B],l.head[B]=Y<=_?_-Y:0,--D;);for(B=D=Y;_=l.prev[--B],l.prev[B]=Y<=_?_-Y:0,--D;);x+=Y}if(l.strm.avail_in===0)break;if(F=l.strm,$=l.window,I=l.strstart+l.lookahead,q=x,J=void 0,J=F.avail_in,q<J&&(J=q),D=J===0?0:(F.avail_in-=J,n.arraySet($,F.input,F.next_in,J,I),F.state.wrap===1?F.adler=c(F.adler,$,J,I):F.state.wrap===2&&(F.adler=f(F.adler,$,J,I)),F.next_in+=J,F.total_in+=J,J),l.lookahead+=D,l.lookahead+l.insert>=L)for(E=l.strstart-l.insert,l.ins_h=l.window[E],l.ins_h=(l.ins_h<<l.hash_shift^l.window[E+1])&l.hash_mask;l.insert&&(l.ins_h=(l.ins_h<<l.hash_shift^l.window[E+L-1])&l.hash_mask,l.prev[E&l.w_mask]=l.head[l.ins_h],l.head[l.ins_h]=E,E++,l.insert--,!(l.lookahead+l.insert<L)););}while(l.lookahead<ee&&l.strm.avail_in!==0)}function Ee(l,B){for(var D,_;;){if(l.lookahead<ee){if(be(l),l.lookahead<ee&&B===g)return d;if(l.lookahead===0)break}if(D=0,l.lookahead>=L&&(l.ins_h=(l.ins_h<<l.hash_shift^l.window[l.strstart+L-1])&l.hash_mask,D=l.prev[l.strstart&l.w_mask]=l.head[l.ins_h],l.head[l.ins_h]=l.strstart),D!==0&&l.strstart-D<=l.w_size-ee&&(l.match_length=H(l,D)),l.match_length>=L)if(_=o._tr_tally(l,l.strstart-l.match_start,l.match_length-L),l.lookahead-=l.match_length,l.match_length<=l.max_lazy_match&&l.lookahead>=L){for(l.match_length--;l.strstart++,l.ins_h=(l.ins_h<<l.hash_shift^l.window[l.strstart+L-1])&l.hash_mask,D=l.prev[l.strstart&l.w_mask]=l.head[l.ins_h],l.head[l.ins_h]=l.strstart,--l.match_length!=0;);l.strstart++}else l.strstart+=l.match_length,l.match_length=0,l.ins_h=l.window[l.strstart],l.ins_h=(l.ins_h<<l.hash_shift^l.window[l.strstart+1])&l.hash_mask;else _=o._tr_tally(l,0,l.window[l.strstart]),l.lookahead--,l.strstart++;if(_&&(O(l,!1),l.strm.avail_out===0))return d}return l.insert=l.strstart<L-1?l.strstart:L-1,B===b?(O(l,!0),l.strm.avail_out===0?se:W):l.last_lit&&(O(l,!1),l.strm.avail_out===0)?d:R}function le(l,B){for(var D,_,x;;){if(l.lookahead<ee){if(be(l),l.lookahead<ee&&B===g)return d;if(l.lookahead===0)break}if(D=0,l.lookahead>=L&&(l.ins_h=(l.ins_h<<l.hash_shift^l.window[l.strstart+L-1])&l.hash_mask,D=l.prev[l.strstart&l.w_mask]=l.head[l.ins_h],l.head[l.ins_h]=l.strstart),l.prev_length=l.match_length,l.prev_match=l.match_start,l.match_length=L-1,D!==0&&l.prev_length<l.max_lazy_match&&l.strstart-D<=l.w_size-ee&&(l.match_length=H(l,D),l.match_length<=5&&(l.strategy===1||l.match_length===L&&4096<l.strstart-l.match_start)&&(l.match_length=L-1)),l.prev_length>=L&&l.match_length<=l.prev_length){for(x=l.strstart+l.lookahead-L,_=o._tr_tally(l,l.strstart-1-l.prev_match,l.prev_length-L),l.lookahead-=l.prev_length-1,l.prev_length-=2;++l.strstart<=x&&(l.ins_h=(l.ins_h<<l.hash_shift^l.window[l.strstart+L-1])&l.hash_mask,D=l.prev[l.strstart&l.w_mask]=l.head[l.ins_h],l.head[l.ins_h]=l.strstart),--l.prev_length!=0;);if(l.match_available=0,l.match_length=L-1,l.strstart++,_&&(O(l,!1),l.strm.avail_out===0))return d}else if(l.match_available){if((_=o._tr_tally(l,0,l.window[l.strstart-1]))&&O(l,!1),l.strstart++,l.lookahead--,l.strm.avail_out===0)return d}else l.match_available=1,l.strstart++,l.lookahead--}return l.match_available&&(_=o._tr_tally(l,0,l.window[l.strstart-1]),l.match_available=0),l.insert=l.strstart<L-1?l.strstart:L-1,B===b?(O(l,!0),l.strm.avail_out===0?se:W):l.last_lit&&(O(l,!1),l.strm.avail_out===0)?d:R}function de(l,B,D,_,x){this.good_length=l,this.max_lazy=B,this.nice_length=D,this.max_chain=_,this.func=x}function _e(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=v,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new n.Buf16(2*M),this.dyn_dtree=new n.Buf16(2*(2*T+1)),this.bl_tree=new n.Buf16(2*(2*U+1)),ie(this.dyn_ltree),ie(this.dyn_dtree),ie(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new n.Buf16(G+1),this.heap=new n.Buf16(2*A+1),ie(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new n.Buf16(2*A+1),ie(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function xe(l){var B;return l&&l.state?(l.total_in=l.total_out=0,l.data_type=p,(B=l.state).pending=0,B.pending_out=0,B.wrap<0&&(B.wrap=-B.wrap),B.status=B.wrap?k:P,l.adler=B.wrap===2?0:1,B.last_flush=g,o._tr_init(B),h):ce(l,y)}function ue(l){var B=xe(l);return B===h&&function(D){D.window_size=2*D.w_size,ie(D.head),D.max_lazy_match=s[D.level].max_lazy,D.good_match=s[D.level].good_length,D.nice_match=s[D.level].nice_length,D.max_chain_length=s[D.level].max_chain,D.strstart=0,D.block_start=0,D.lookahead=0,D.insert=0,D.match_length=D.prev_length=L-1,D.match_available=0,D.ins_h=0}(l.state),B}function Ae(l,B,D,_,x,E){if(!l)return y;var F=1;if(B===u&&(B=6),_<0?(F=0,_=-_):15<_&&(F=2,_-=16),x<1||S<x||D!==v||_<8||15<_||B<0||9<B||E<0||w<E)return ce(l,y);_===8&&(_=9);var $=new _e;return(l.state=$).strm=l,$.wrap=F,$.gzhead=null,$.w_bits=_,$.w_size=1<<$.w_bits,$.w_mask=$.w_size-1,$.hash_bits=x+7,$.hash_size=1<<$.hash_bits,$.hash_mask=$.hash_size-1,$.hash_shift=~~(($.hash_bits+L-1)/L),$.window=new n.Buf8(2*$.w_size),$.head=new n.Buf16($.hash_size),$.prev=new n.Buf16($.w_size),$.lit_bufsize=1<<x+6,$.pending_buf_size=4*$.lit_bufsize,$.pending_buf=new n.Buf8($.pending_buf_size),$.d_buf=1*$.lit_bufsize,$.l_buf=3*$.lit_bufsize,$.level=B,$.strategy=E,$.method=D,ue(l)}s=[new de(0,0,0,0,function(l,B){var D=65535;for(D>l.pending_buf_size-5&&(D=l.pending_buf_size-5);;){if(l.lookahead<=1){if(be(l),l.lookahead===0&&B===g)return d;if(l.lookahead===0)break}l.strstart+=l.lookahead,l.lookahead=0;var _=l.block_start+D;if((l.strstart===0||l.strstart>=_)&&(l.lookahead=l.strstart-_,l.strstart=_,O(l,!1),l.strm.avail_out===0)||l.strstart-l.block_start>=l.w_size-ee&&(O(l,!1),l.strm.avail_out===0))return d}return l.insert=0,B===b?(O(l,!0),l.strm.avail_out===0?se:W):(l.strstart>l.block_start&&(O(l,!1),l.strm.avail_out),d)}),new de(4,4,8,4,Ee),new de(4,5,16,8,Ee),new de(4,6,32,32,Ee),new de(4,4,16,16,le),new de(8,16,32,32,le),new de(8,16,128,128,le),new de(8,32,128,256,le),new de(32,128,258,1024,le),new de(32,258,258,4096,le)],i.deflateInit=function(l,B){return Ae(l,B,v,15,8,0)},i.deflateInit2=Ae,i.deflateReset=ue,i.deflateResetKeep=xe,i.deflateSetHeader=function(l,B){return l&&l.state?l.state.wrap!==2?y:(l.state.gzhead=B,h):y},i.deflate=function(l,B){var D,_,x,E;if(!l||!l.state||5<B||B<0)return l?ce(l,y):y;if(_=l.state,!l.output||!l.input&&l.avail_in!==0||_.status===666&&B!==b)return ce(l,l.avail_out===0?-5:y);if(_.strm=l,D=_.last_flush,_.last_flush=B,_.status===k)if(_.wrap===2)l.adler=0,Q(_,31),Q(_,139),Q(_,8),_.gzhead?(Q(_,(_.gzhead.text?1:0)+(_.gzhead.hcrc?2:0)+(_.gzhead.extra?4:0)+(_.gzhead.name?8:0)+(_.gzhead.comment?16:0)),Q(_,255&_.gzhead.time),Q(_,_.gzhead.time>>8&255),Q(_,_.gzhead.time>>16&255),Q(_,_.gzhead.time>>24&255),Q(_,_.level===9?2:2<=_.strategy||_.level<2?4:0),Q(_,255&_.gzhead.os),_.gzhead.extra&&_.gzhead.extra.length&&(Q(_,255&_.gzhead.extra.length),Q(_,_.gzhead.extra.length>>8&255)),_.gzhead.hcrc&&(l.adler=f(l.adler,_.pending_buf,_.pending,0)),_.gzindex=0,_.status=69):(Q(_,0),Q(_,0),Q(_,0),Q(_,0),Q(_,0),Q(_,_.level===9?2:2<=_.strategy||_.level<2?4:0),Q(_,3),_.status=P);else{var F=v+(_.w_bits-8<<4)<<8;F|=(2<=_.strategy||_.level<2?0:_.level<6?1:_.level===6?2:3)<<6,_.strstart!==0&&(F|=32),F+=31-F%31,_.status=P,V(_,F),_.strstart!==0&&(V(_,l.adler>>>16),V(_,65535&l.adler)),l.adler=1}if(_.status===69)if(_.gzhead.extra){for(x=_.pending;_.gzindex<(65535&_.gzhead.extra.length)&&(_.pending!==_.pending_buf_size||(_.gzhead.hcrc&&_.pending>x&&(l.adler=f(l.adler,_.pending_buf,_.pending-x,x)),C(l),x=_.pending,_.pending!==_.pending_buf_size));)Q(_,255&_.gzhead.extra[_.gzindex]),_.gzindex++;_.gzhead.hcrc&&_.pending>x&&(l.adler=f(l.adler,_.pending_buf,_.pending-x,x)),_.gzindex===_.gzhead.extra.length&&(_.gzindex=0,_.status=73)}else _.status=73;if(_.status===73)if(_.gzhead.name){x=_.pending;do{if(_.pending===_.pending_buf_size&&(_.gzhead.hcrc&&_.pending>x&&(l.adler=f(l.adler,_.pending_buf,_.pending-x,x)),C(l),x=_.pending,_.pending===_.pending_buf_size)){E=1;break}E=_.gzindex<_.gzhead.name.length?255&_.gzhead.name.charCodeAt(_.gzindex++):0,Q(_,E)}while(E!==0);_.gzhead.hcrc&&_.pending>x&&(l.adler=f(l.adler,_.pending_buf,_.pending-x,x)),E===0&&(_.gzindex=0,_.status=91)}else _.status=91;if(_.status===91)if(_.gzhead.comment){x=_.pending;do{if(_.pending===_.pending_buf_size&&(_.gzhead.hcrc&&_.pending>x&&(l.adler=f(l.adler,_.pending_buf,_.pending-x,x)),C(l),x=_.pending,_.pending===_.pending_buf_size)){E=1;break}E=_.gzindex<_.gzhead.comment.length?255&_.gzhead.comment.charCodeAt(_.gzindex++):0,Q(_,E)}while(E!==0);_.gzhead.hcrc&&_.pending>x&&(l.adler=f(l.adler,_.pending_buf,_.pending-x,x)),E===0&&(_.status=103)}else _.status=103;if(_.status===103&&(_.gzhead.hcrc?(_.pending+2>_.pending_buf_size&&C(l),_.pending+2<=_.pending_buf_size&&(Q(_,255&l.adler),Q(_,l.adler>>8&255),l.adler=0,_.status=P)):_.status=P),_.pending!==0){if(C(l),l.avail_out===0)return _.last_flush=-1,h}else if(l.avail_in===0&&Z(B)<=Z(D)&&B!==b)return ce(l,-5);if(_.status===666&&l.avail_in!==0)return ce(l,-5);if(l.avail_in!==0||_.lookahead!==0||B!==g&&_.status!==666){var $=_.strategy===2?function(I,q){for(var J;;){if(I.lookahead===0&&(be(I),I.lookahead===0)){if(q===g)return d;break}if(I.match_length=0,J=o._tr_tally(I,0,I.window[I.strstart]),I.lookahead--,I.strstart++,J&&(O(I,!1),I.strm.avail_out===0))return d}return I.insert=0,q===b?(O(I,!0),I.strm.avail_out===0?se:W):I.last_lit&&(O(I,!1),I.strm.avail_out===0)?d:R}(_,B):_.strategy===3?function(I,q){for(var J,Y,re,me,he=I.window;;){if(I.lookahead<=K){if(be(I),I.lookahead<=K&&q===g)return d;if(I.lookahead===0)break}if(I.match_length=0,I.lookahead>=L&&0<I.strstart&&(Y=he[re=I.strstart-1])===he[++re]&&Y===he[++re]&&Y===he[++re]){me=I.strstart+K;do;while(Y===he[++re]&&Y===he[++re]&&Y===he[++re]&&Y===he[++re]&&Y===he[++re]&&Y===he[++re]&&Y===he[++re]&&Y===he[++re]&&re<me);I.match_length=K-(me-re),I.match_length>I.lookahead&&(I.match_length=I.lookahead)}if(I.match_length>=L?(J=o._tr_tally(I,1,I.match_length-L),I.lookahead-=I.match_length,I.strstart+=I.match_length,I.match_length=0):(J=o._tr_tally(I,0,I.window[I.strstart]),I.lookahead--,I.strstart++),J&&(O(I,!1),I.strm.avail_out===0))return d}return I.insert=0,q===b?(O(I,!0),I.strm.avail_out===0?se:W):I.last_lit&&(O(I,!1),I.strm.avail_out===0)?d:R}(_,B):s[_.level].func(_,B);if($!==se&&$!==W||(_.status=666),$===d||$===se)return l.avail_out===0&&(_.last_flush=-1),h;if($===R&&(B===1?o._tr_align(_):B!==5&&(o._tr_stored_block(_,0,0,!1),B===3&&(ie(_.head),_.lookahead===0&&(_.strstart=0,_.block_start=0,_.insert=0))),C(l),l.avail_out===0))return _.last_flush=-1,h}return B!==b?h:_.wrap<=0?1:(_.wrap===2?(Q(_,255&l.adler),Q(_,l.adler>>8&255),Q(_,l.adler>>16&255),Q(_,l.adler>>24&255),Q(_,255&l.total_in),Q(_,l.total_in>>8&255),Q(_,l.total_in>>16&255),Q(_,l.total_in>>24&255)):(V(_,l.adler>>>16),V(_,65535&l.adler)),C(l),0<_.wrap&&(_.wrap=-_.wrap),_.pending!==0?h:1)},i.deflateEnd=function(l){var B;return l&&l.state?(B=l.state.status)!==k&&B!==69&&B!==73&&B!==91&&B!==103&&B!==P&&B!==666?ce(l,y):(l.state=null,B===P?ce(l,-3):h):y},i.deflateSetDictionary=function(l,B){var D,_,x,E,F,$,I,q,J=B.length;if(!l||!l.state||(E=(D=l.state).wrap)===2||E===1&&D.status!==k||D.lookahead)return y;for(E===1&&(l.adler=c(l.adler,B,J,0)),D.wrap=0,J>=D.w_size&&(E===0&&(ie(D.head),D.strstart=0,D.block_start=0,D.insert=0),q=new n.Buf8(D.w_size),n.arraySet(q,B,J-D.w_size,D.w_size,0),B=q,J=D.w_size),F=l.avail_in,$=l.next_in,I=l.input,l.avail_in=J,l.next_in=0,l.input=B,be(D);D.lookahead>=L;){for(_=D.strstart,x=D.lookahead-(L-1);D.ins_h=(D.ins_h<<D.hash_shift^D.window[_+L-1])&D.hash_mask,D.prev[_&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=_,_++,--x;);D.strstart=_,D.lookahead=L-1,be(D)}return D.strstart+=D.lookahead,D.block_start=D.strstart,D.insert=D.lookahead,D.lookahead=0,D.match_length=D.prev_length=L-1,D.match_available=0,l.next_in=$,l.input=I,l.avail_in=F,D.wrap=E,h},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,t,i){t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,t,i){t.exports=function(s,n){var o,c,f,m,g,b,h,y,u,w,p,v,S,A,T,U,M,G,L,K,ee,k,P,d,R;o=s.state,c=s.next_in,d=s.input,f=c+(s.avail_in-5),m=s.next_out,R=s.output,g=m-(n-s.avail_out),b=m+(s.avail_out-257),h=o.dmax,y=o.wsize,u=o.whave,w=o.wnext,p=o.window,v=o.hold,S=o.bits,A=o.lencode,T=o.distcode,U=(1<<o.lenbits)-1,M=(1<<o.distbits)-1;e:do{S<15&&(v+=d[c++]<<S,S+=8,v+=d[c++]<<S,S+=8),G=A[v&U];t:for(;;){if(v>>>=L=G>>>24,S-=L,(L=G>>>16&255)===0)R[m++]=65535&G;else{if(!(16&L)){if(!(64&L)){G=A[(65535&G)+(v&(1<<L)-1)];continue t}if(32&L){o.mode=12;break e}s.msg="invalid literal/length code",o.mode=30;break e}K=65535&G,(L&=15)&&(S<L&&(v+=d[c++]<<S,S+=8),K+=v&(1<<L)-1,v>>>=L,S-=L),S<15&&(v+=d[c++]<<S,S+=8,v+=d[c++]<<S,S+=8),G=T[v&M];r:for(;;){if(v>>>=L=G>>>24,S-=L,!(16&(L=G>>>16&255))){if(!(64&L)){G=T[(65535&G)+(v&(1<<L)-1)];continue r}s.msg="invalid distance code",o.mode=30;break e}if(ee=65535&G,S<(L&=15)&&(v+=d[c++]<<S,(S+=8)<L&&(v+=d[c++]<<S,S+=8)),h<(ee+=v&(1<<L)-1)){s.msg="invalid distance too far back",o.mode=30;break e}if(v>>>=L,S-=L,(L=m-g)<ee){if(u<(L=ee-L)&&o.sane){s.msg="invalid distance too far back",o.mode=30;break e}if(P=p,(k=0)===w){if(k+=y-L,L<K){for(K-=L;R[m++]=p[k++],--L;);k=m-ee,P=R}}else if(w<L){if(k+=y+w-L,(L-=w)<K){for(K-=L;R[m++]=p[k++],--L;);if(k=0,w<K){for(K-=L=w;R[m++]=p[k++],--L;);k=m-ee,P=R}}}else if(k+=w-L,L<K){for(K-=L;R[m++]=p[k++],--L;);k=m-ee,P=R}for(;2<K;)R[m++]=P[k++],R[m++]=P[k++],R[m++]=P[k++],K-=3;K&&(R[m++]=P[k++],1<K&&(R[m++]=P[k++]))}else{for(k=m-ee;R[m++]=R[k++],R[m++]=R[k++],R[m++]=R[k++],2<(K-=3););K&&(R[m++]=R[k++],1<K&&(R[m++]=R[k++]))}break}}break}}while(c<f&&m<b);c-=K=S>>3,v&=(1<<(S-=K<<3))-1,s.next_in=c,s.next_out=m,s.avail_in=c<f?f-c+5:5-(c-f),s.avail_out=m<b?b-m+257:257-(m-b),o.hold=v,o.bits=S}},{}],49:[function(e,t,i){var s=e("../utils/common"),n=e("./adler32"),o=e("./crc32"),c=e("./inffast"),f=e("./inftrees"),m=1,g=2,b=0,h=-2,y=1,u=852,w=592;function p(k){return(k>>>24&255)+(k>>>8&65280)+((65280&k)<<8)+((255&k)<<24)}function v(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function S(k){var P;return k&&k.state?(P=k.state,k.total_in=k.total_out=P.total=0,k.msg="",P.wrap&&(k.adler=1&P.wrap),P.mode=y,P.last=0,P.havedict=0,P.dmax=32768,P.head=null,P.hold=0,P.bits=0,P.lencode=P.lendyn=new s.Buf32(u),P.distcode=P.distdyn=new s.Buf32(w),P.sane=1,P.back=-1,b):h}function A(k){var P;return k&&k.state?((P=k.state).wsize=0,P.whave=0,P.wnext=0,S(k)):h}function T(k,P){var d,R;return k&&k.state?(R=k.state,P<0?(d=0,P=-P):(d=1+(P>>4),P<48&&(P&=15)),P&&(P<8||15<P)?h:(R.window!==null&&R.wbits!==P&&(R.window=null),R.wrap=d,R.wbits=P,A(k))):h}function U(k,P){var d,R;return k?(R=new v,(k.state=R).window=null,(d=T(k,P))!==b&&(k.state=null),d):h}var M,G,L=!0;function K(k){if(L){var P;for(M=new s.Buf32(512),G=new s.Buf32(32),P=0;P<144;)k.lens[P++]=8;for(;P<256;)k.lens[P++]=9;for(;P<280;)k.lens[P++]=7;for(;P<288;)k.lens[P++]=8;for(f(m,k.lens,0,288,M,0,k.work,{bits:9}),P=0;P<32;)k.lens[P++]=5;f(g,k.lens,0,32,G,0,k.work,{bits:5}),L=!1}k.lencode=M,k.lenbits=9,k.distcode=G,k.distbits=5}function ee(k,P,d,R){var se,W=k.state;return W.window===null&&(W.wsize=1<<W.wbits,W.wnext=0,W.whave=0,W.window=new s.Buf8(W.wsize)),R>=W.wsize?(s.arraySet(W.window,P,d-W.wsize,W.wsize,0),W.wnext=0,W.whave=W.wsize):(R<(se=W.wsize-W.wnext)&&(se=R),s.arraySet(W.window,P,d-R,se,W.wnext),(R-=se)?(s.arraySet(W.window,P,d-R,R,0),W.wnext=R,W.whave=W.wsize):(W.wnext+=se,W.wnext===W.wsize&&(W.wnext=0),W.whave<W.wsize&&(W.whave+=se))),0}i.inflateReset=A,i.inflateReset2=T,i.inflateResetKeep=S,i.inflateInit=function(k){return U(k,15)},i.inflateInit2=U,i.inflate=function(k,P){var d,R,se,W,ce,Z,ie,C,O,Q,V,H,be,Ee,le,de,_e,xe,ue,Ae,l,B,D,_,x=0,E=new s.Buf8(4),F=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!k||!k.state||!k.output||!k.input&&k.avail_in!==0)return h;(d=k.state).mode===12&&(d.mode=13),ce=k.next_out,se=k.output,ie=k.avail_out,W=k.next_in,R=k.input,Z=k.avail_in,C=d.hold,O=d.bits,Q=Z,V=ie,B=b;e:for(;;)switch(d.mode){case y:if(d.wrap===0){d.mode=13;break}for(;O<16;){if(Z===0)break e;Z--,C+=R[W++]<<O,O+=8}if(2&d.wrap&&C===35615){E[d.check=0]=255&C,E[1]=C>>>8&255,d.check=o(d.check,E,2,0),O=C=0,d.mode=2;break}if(d.flags=0,d.head&&(d.head.done=!1),!(1&d.wrap)||(((255&C)<<8)+(C>>8))%31){k.msg="incorrect header check",d.mode=30;break}if((15&C)!=8){k.msg="unknown compression method",d.mode=30;break}if(O-=4,l=8+(15&(C>>>=4)),d.wbits===0)d.wbits=l;else if(l>d.wbits){k.msg="invalid window size",d.mode=30;break}d.dmax=1<<l,k.adler=d.check=1,d.mode=512&C?10:12,O=C=0;break;case 2:for(;O<16;){if(Z===0)break e;Z--,C+=R[W++]<<O,O+=8}if(d.flags=C,(255&d.flags)!=8){k.msg="unknown compression method",d.mode=30;break}if(57344&d.flags){k.msg="unknown header flags set",d.mode=30;break}d.head&&(d.head.text=C>>8&1),512&d.flags&&(E[0]=255&C,E[1]=C>>>8&255,d.check=o(d.check,E,2,0)),O=C=0,d.mode=3;case 3:for(;O<32;){if(Z===0)break e;Z--,C+=R[W++]<<O,O+=8}d.head&&(d.head.time=C),512&d.flags&&(E[0]=255&C,E[1]=C>>>8&255,E[2]=C>>>16&255,E[3]=C>>>24&255,d.check=o(d.check,E,4,0)),O=C=0,d.mode=4;case 4:for(;O<16;){if(Z===0)break e;Z--,C+=R[W++]<<O,O+=8}d.head&&(d.head.xflags=255&C,d.head.os=C>>8),512&d.flags&&(E[0]=255&C,E[1]=C>>>8&255,d.check=o(d.check,E,2,0)),O=C=0,d.mode=5;case 5:if(1024&d.flags){for(;O<16;){if(Z===0)break e;Z--,C+=R[W++]<<O,O+=8}d.length=C,d.head&&(d.head.extra_len=C),512&d.flags&&(E[0]=255&C,E[1]=C>>>8&255,d.check=o(d.check,E,2,0)),O=C=0}else d.head&&(d.head.extra=null);d.mode=6;case 6:if(1024&d.flags&&(Z<(H=d.length)&&(H=Z),H&&(d.head&&(l=d.head.extra_len-d.length,d.head.extra||(d.head.extra=new Array(d.head.extra_len)),s.arraySet(d.head.extra,R,W,H,l)),512&d.flags&&(d.check=o(d.check,R,H,W)),Z-=H,W+=H,d.length-=H),d.length))break e;d.length=0,d.mode=7;case 7:if(2048&d.flags){if(Z===0)break e;for(H=0;l=R[W+H++],d.head&&l&&d.length<65536&&(d.head.name+=String.fromCharCode(l)),l&&H<Z;);if(512&d.flags&&(d.check=o(d.check,R,H,W)),Z-=H,W+=H,l)break e}else d.head&&(d.head.name=null);d.length=0,d.mode=8;case 8:if(4096&d.flags){if(Z===0)break e;for(H=0;l=R[W+H++],d.head&&l&&d.length<65536&&(d.head.comment+=String.fromCharCode(l)),l&&H<Z;);if(512&d.flags&&(d.check=o(d.check,R,H,W)),Z-=H,W+=H,l)break e}else d.head&&(d.head.comment=null);d.mode=9;case 9:if(512&d.flags){for(;O<16;){if(Z===0)break e;Z--,C+=R[W++]<<O,O+=8}if(C!==(65535&d.check)){k.msg="header crc mismatch",d.mode=30;break}O=C=0}d.head&&(d.head.hcrc=d.flags>>9&1,d.head.done=!0),k.adler=d.check=0,d.mode=12;break;case 10:for(;O<32;){if(Z===0)break e;Z--,C+=R[W++]<<O,O+=8}k.adler=d.check=p(C),O=C=0,d.mode=11;case 11:if(d.havedict===0)return k.next_out=ce,k.avail_out=ie,k.next_in=W,k.avail_in=Z,d.hold=C,d.bits=O,2;k.adler=d.check=1,d.mode=12;case 12:if(P===5||P===6)break e;case 13:if(d.last){C>>>=7&O,O-=7&O,d.mode=27;break}for(;O<3;){if(Z===0)break e;Z--,C+=R[W++]<<O,O+=8}switch(d.last=1&C,O-=1,3&(C>>>=1)){case 0:d.mode=14;break;case 1:if(K(d),d.mode=20,P!==6)break;C>>>=2,O-=2;break e;case 2:d.mode=17;break;case 3:k.msg="invalid block type",d.mode=30}C>>>=2,O-=2;break;case 14:for(C>>>=7&O,O-=7&O;O<32;){if(Z===0)break e;Z--,C+=R[W++]<<O,O+=8}if((65535&C)!=(C>>>16^65535)){k.msg="invalid stored block lengths",d.mode=30;break}if(d.length=65535&C,O=C=0,d.mode=15,P===6)break e;case 15:d.mode=16;case 16:if(H=d.length){if(Z<H&&(H=Z),ie<H&&(H=ie),H===0)break e;s.arraySet(se,R,W,H,ce),Z-=H,W+=H,ie-=H,ce+=H,d.length-=H;break}d.mode=12;break;case 17:for(;O<14;){if(Z===0)break e;Z--,C+=R[W++]<<O,O+=8}if(d.nlen=257+(31&C),C>>>=5,O-=5,d.ndist=1+(31&C),C>>>=5,O-=5,d.ncode=4+(15&C),C>>>=4,O-=4,286<d.nlen||30<d.ndist){k.msg="too many length or distance symbols",d.mode=30;break}d.have=0,d.mode=18;case 18:for(;d.have<d.ncode;){for(;O<3;){if(Z===0)break e;Z--,C+=R[W++]<<O,O+=8}d.lens[F[d.have++]]=7&C,C>>>=3,O-=3}for(;d.have<19;)d.lens[F[d.have++]]=0;if(d.lencode=d.lendyn,d.lenbits=7,D={bits:d.lenbits},B=f(0,d.lens,0,19,d.lencode,0,d.work,D),d.lenbits=D.bits,B){k.msg="invalid code lengths set",d.mode=30;break}d.have=0,d.mode=19;case 19:for(;d.have<d.nlen+d.ndist;){for(;de=(x=d.lencode[C&(1<<d.lenbits)-1])>>>16&255,_e=65535&x,!((le=x>>>24)<=O);){if(Z===0)break e;Z--,C+=R[W++]<<O,O+=8}if(_e<16)C>>>=le,O-=le,d.lens[d.have++]=_e;else{if(_e===16){for(_=le+2;O<_;){if(Z===0)break e;Z--,C+=R[W++]<<O,O+=8}if(C>>>=le,O-=le,d.have===0){k.msg="invalid bit length repeat",d.mode=30;break}l=d.lens[d.have-1],H=3+(3&C),C>>>=2,O-=2}else if(_e===17){for(_=le+3;O<_;){if(Z===0)break e;Z--,C+=R[W++]<<O,O+=8}O-=le,l=0,H=3+(7&(C>>>=le)),C>>>=3,O-=3}else{for(_=le+7;O<_;){if(Z===0)break e;Z--,C+=R[W++]<<O,O+=8}O-=le,l=0,H=11+(127&(C>>>=le)),C>>>=7,O-=7}if(d.have+H>d.nlen+d.ndist){k.msg="invalid bit length repeat",d.mode=30;break}for(;H--;)d.lens[d.have++]=l}}if(d.mode===30)break;if(d.lens[256]===0){k.msg="invalid code -- missing end-of-block",d.mode=30;break}if(d.lenbits=9,D={bits:d.lenbits},B=f(m,d.lens,0,d.nlen,d.lencode,0,d.work,D),d.lenbits=D.bits,B){k.msg="invalid literal/lengths set",d.mode=30;break}if(d.distbits=6,d.distcode=d.distdyn,D={bits:d.distbits},B=f(g,d.lens,d.nlen,d.ndist,d.distcode,0,d.work,D),d.distbits=D.bits,B){k.msg="invalid distances set",d.mode=30;break}if(d.mode=20,P===6)break e;case 20:d.mode=21;case 21:if(6<=Z&&258<=ie){k.next_out=ce,k.avail_out=ie,k.next_in=W,k.avail_in=Z,d.hold=C,d.bits=O,c(k,V),ce=k.next_out,se=k.output,ie=k.avail_out,W=k.next_in,R=k.input,Z=k.avail_in,C=d.hold,O=d.bits,d.mode===12&&(d.back=-1);break}for(d.back=0;de=(x=d.lencode[C&(1<<d.lenbits)-1])>>>16&255,_e=65535&x,!((le=x>>>24)<=O);){if(Z===0)break e;Z--,C+=R[W++]<<O,O+=8}if(de&&!(240&de)){for(xe=le,ue=de,Ae=_e;de=(x=d.lencode[Ae+((C&(1<<xe+ue)-1)>>xe)])>>>16&255,_e=65535&x,!(xe+(le=x>>>24)<=O);){if(Z===0)break e;Z--,C+=R[W++]<<O,O+=8}C>>>=xe,O-=xe,d.back+=xe}if(C>>>=le,O-=le,d.back+=le,d.length=_e,de===0){d.mode=26;break}if(32&de){d.back=-1,d.mode=12;break}if(64&de){k.msg="invalid literal/length code",d.mode=30;break}d.extra=15&de,d.mode=22;case 22:if(d.extra){for(_=d.extra;O<_;){if(Z===0)break e;Z--,C+=R[W++]<<O,O+=8}d.length+=C&(1<<d.extra)-1,C>>>=d.extra,O-=d.extra,d.back+=d.extra}d.was=d.length,d.mode=23;case 23:for(;de=(x=d.distcode[C&(1<<d.distbits)-1])>>>16&255,_e=65535&x,!((le=x>>>24)<=O);){if(Z===0)break e;Z--,C+=R[W++]<<O,O+=8}if(!(240&de)){for(xe=le,ue=de,Ae=_e;de=(x=d.distcode[Ae+((C&(1<<xe+ue)-1)>>xe)])>>>16&255,_e=65535&x,!(xe+(le=x>>>24)<=O);){if(Z===0)break e;Z--,C+=R[W++]<<O,O+=8}C>>>=xe,O-=xe,d.back+=xe}if(C>>>=le,O-=le,d.back+=le,64&de){k.msg="invalid distance code",d.mode=30;break}d.offset=_e,d.extra=15&de,d.mode=24;case 24:if(d.extra){for(_=d.extra;O<_;){if(Z===0)break e;Z--,C+=R[W++]<<O,O+=8}d.offset+=C&(1<<d.extra)-1,C>>>=d.extra,O-=d.extra,d.back+=d.extra}if(d.offset>d.dmax){k.msg="invalid distance too far back",d.mode=30;break}d.mode=25;case 25:if(ie===0)break e;if(H=V-ie,d.offset>H){if((H=d.offset-H)>d.whave&&d.sane){k.msg="invalid distance too far back",d.mode=30;break}be=H>d.wnext?(H-=d.wnext,d.wsize-H):d.wnext-H,H>d.length&&(H=d.length),Ee=d.window}else Ee=se,be=ce-d.offset,H=d.length;for(ie<H&&(H=ie),ie-=H,d.length-=H;se[ce++]=Ee[be++],--H;);d.length===0&&(d.mode=21);break;case 26:if(ie===0)break e;se[ce++]=d.length,ie--,d.mode=21;break;case 27:if(d.wrap){for(;O<32;){if(Z===0)break e;Z--,C|=R[W++]<<O,O+=8}if(V-=ie,k.total_out+=V,d.total+=V,V&&(k.adler=d.check=d.flags?o(d.check,se,V,ce-V):n(d.check,se,V,ce-V)),V=ie,(d.flags?C:p(C))!==d.check){k.msg="incorrect data check",d.mode=30;break}O=C=0}d.mode=28;case 28:if(d.wrap&&d.flags){for(;O<32;){if(Z===0)break e;Z--,C+=R[W++]<<O,O+=8}if(C!==(4294967295&d.total)){k.msg="incorrect length check",d.mode=30;break}O=C=0}d.mode=29;case 29:B=1;break e;case 30:B=-3;break e;case 31:return-4;case 32:default:return h}return k.next_out=ce,k.avail_out=ie,k.next_in=W,k.avail_in=Z,d.hold=C,d.bits=O,(d.wsize||V!==k.avail_out&&d.mode<30&&(d.mode<27||P!==4))&&ee(k,k.output,k.next_out,V-k.avail_out)?(d.mode=31,-4):(Q-=k.avail_in,V-=k.avail_out,k.total_in+=Q,k.total_out+=V,d.total+=V,d.wrap&&V&&(k.adler=d.check=d.flags?o(d.check,se,V,k.next_out-V):n(d.check,se,V,k.next_out-V)),k.data_type=d.bits+(d.last?64:0)+(d.mode===12?128:0)+(d.mode===20||d.mode===15?256:0),(Q==0&&V===0||P===4)&&B===b&&(B=-5),B)},i.inflateEnd=function(k){if(!k||!k.state)return h;var P=k.state;return P.window&&(P.window=null),k.state=null,b},i.inflateGetHeader=function(k,P){var d;return k&&k.state&&2&(d=k.state).wrap?((d.head=P).done=!1,b):h},i.inflateSetDictionary=function(k,P){var d,R=P.length;return k&&k.state?(d=k.state).wrap!==0&&d.mode!==11?h:d.mode===11&&n(1,P,R,0)!==d.check?-3:ee(k,P,R,R)?(d.mode=31,-4):(d.havedict=1,b):h},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,t,i){var s=e("../utils/common"),n=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],f=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(m,g,b,h,y,u,w,p){var v,S,A,T,U,M,G,L,K,ee=p.bits,k=0,P=0,d=0,R=0,se=0,W=0,ce=0,Z=0,ie=0,C=0,O=null,Q=0,V=new s.Buf16(16),H=new s.Buf16(16),be=null,Ee=0;for(k=0;k<=15;k++)V[k]=0;for(P=0;P<h;P++)V[g[b+P]]++;for(se=ee,R=15;1<=R&&V[R]===0;R--);if(R<se&&(se=R),R===0)return y[u++]=20971520,y[u++]=20971520,p.bits=1,0;for(d=1;d<R&&V[d]===0;d++);for(se<d&&(se=d),k=Z=1;k<=15;k++)if(Z<<=1,(Z-=V[k])<0)return-1;if(0<Z&&(m===0||R!==1))return-1;for(H[1]=0,k=1;k<15;k++)H[k+1]=H[k]+V[k];for(P=0;P<h;P++)g[b+P]!==0&&(w[H[g[b+P]]++]=P);if(M=m===0?(O=be=w,19):m===1?(O=n,Q-=257,be=o,Ee-=257,256):(O=c,be=f,-1),k=d,U=u,ce=P=C=0,A=-1,T=(ie=1<<(W=se))-1,m===1&&852<ie||m===2&&592<ie)return 1;for(;;){for(G=k-ce,K=w[P]<M?(L=0,w[P]):w[P]>M?(L=be[Ee+w[P]],O[Q+w[P]]):(L=96,0),v=1<<k-ce,d=S=1<<W;y[U+(C>>ce)+(S-=v)]=G<<24|L<<16|K|0,S!==0;);for(v=1<<k-1;C&v;)v>>=1;if(v!==0?(C&=v-1,C+=v):C=0,P++,--V[k]==0){if(k===R)break;k=g[b+w[P]]}if(se<k&&(C&T)!==A){for(ce===0&&(ce=se),U+=d,Z=1<<(W=k-ce);W+ce<R&&!((Z-=V[W+ce])<=0);)W++,Z<<=1;if(ie+=1<<W,m===1&&852<ie||m===2&&592<ie)return 1;y[A=C&T]=se<<24|W<<16|U-u|0}}return C!==0&&(y[U+C]=k-ce<<24|64<<16|0),p.bits=se,0}},{"../utils/common":41}],51:[function(e,t,i){t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,t,i){var s=e("../utils/common"),n=0,o=1;function c(x){for(var E=x.length;0<=--E;)x[E]=0}var f=0,m=29,g=256,b=g+1+m,h=30,y=19,u=2*b+1,w=15,p=16,v=7,S=256,A=16,T=17,U=18,M=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],G=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],L=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],K=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ee=new Array(2*(b+2));c(ee);var k=new Array(2*h);c(k);var P=new Array(512);c(P);var d=new Array(256);c(d);var R=new Array(m);c(R);var se,W,ce,Z=new Array(h);function ie(x,E,F,$,I){this.static_tree=x,this.extra_bits=E,this.extra_base=F,this.elems=$,this.max_length=I,this.has_stree=x&&x.length}function C(x,E){this.dyn_tree=x,this.max_code=0,this.stat_desc=E}function O(x){return x<256?P[x]:P[256+(x>>>7)]}function Q(x,E){x.pending_buf[x.pending++]=255&E,x.pending_buf[x.pending++]=E>>>8&255}function V(x,E,F){x.bi_valid>p-F?(x.bi_buf|=E<<x.bi_valid&65535,Q(x,x.bi_buf),x.bi_buf=E>>p-x.bi_valid,x.bi_valid+=F-p):(x.bi_buf|=E<<x.bi_valid&65535,x.bi_valid+=F)}function H(x,E,F){V(x,F[2*E],F[2*E+1])}function be(x,E){for(var F=0;F|=1&x,x>>>=1,F<<=1,0<--E;);return F>>>1}function Ee(x,E,F){var $,I,q=new Array(w+1),J=0;for($=1;$<=w;$++)q[$]=J=J+F[$-1]<<1;for(I=0;I<=E;I++){var Y=x[2*I+1];Y!==0&&(x[2*I]=be(q[Y]++,Y))}}function le(x){var E;for(E=0;E<b;E++)x.dyn_ltree[2*E]=0;for(E=0;E<h;E++)x.dyn_dtree[2*E]=0;for(E=0;E<y;E++)x.bl_tree[2*E]=0;x.dyn_ltree[2*S]=1,x.opt_len=x.static_len=0,x.last_lit=x.matches=0}function de(x){8<x.bi_valid?Q(x,x.bi_buf):0<x.bi_valid&&(x.pending_buf[x.pending++]=x.bi_buf),x.bi_buf=0,x.bi_valid=0}function _e(x,E,F,$){var I=2*E,q=2*F;return x[I]<x[q]||x[I]===x[q]&&$[E]<=$[F]}function xe(x,E,F){for(var $=x.heap[F],I=F<<1;I<=x.heap_len&&(I<x.heap_len&&_e(E,x.heap[I+1],x.heap[I],x.depth)&&I++,!_e(E,$,x.heap[I],x.depth));)x.heap[F]=x.heap[I],F=I,I<<=1;x.heap[F]=$}function ue(x,E,F){var $,I,q,J,Y=0;if(x.last_lit!==0)for(;$=x.pending_buf[x.d_buf+2*Y]<<8|x.pending_buf[x.d_buf+2*Y+1],I=x.pending_buf[x.l_buf+Y],Y++,$===0?H(x,I,E):(H(x,(q=d[I])+g+1,E),(J=M[q])!==0&&V(x,I-=R[q],J),H(x,q=O(--$),F),(J=G[q])!==0&&V(x,$-=Z[q],J)),Y<x.last_lit;);H(x,S,E)}function Ae(x,E){var F,$,I,q=E.dyn_tree,J=E.stat_desc.static_tree,Y=E.stat_desc.has_stree,re=E.stat_desc.elems,me=-1;for(x.heap_len=0,x.heap_max=u,F=0;F<re;F++)q[2*F]!==0?(x.heap[++x.heap_len]=me=F,x.depth[F]=0):q[2*F+1]=0;for(;x.heap_len<2;)q[2*(I=x.heap[++x.heap_len]=me<2?++me:0)]=1,x.depth[I]=0,x.opt_len--,Y&&(x.static_len-=J[2*I+1]);for(E.max_code=me,F=x.heap_len>>1;1<=F;F--)xe(x,q,F);for(I=re;F=x.heap[1],x.heap[1]=x.heap[x.heap_len--],xe(x,q,1),$=x.heap[1],x.heap[--x.heap_max]=F,x.heap[--x.heap_max]=$,q[2*I]=q[2*F]+q[2*$],x.depth[I]=(x.depth[F]>=x.depth[$]?x.depth[F]:x.depth[$])+1,q[2*F+1]=q[2*$+1]=I,x.heap[1]=I++,xe(x,q,1),2<=x.heap_len;);x.heap[--x.heap_max]=x.heap[1],function(he,Ce){var Ye,ze,Je,ve,De,Pe,Te=Ce.dyn_tree,st=Ce.max_code,ut=Ce.stat_desc.static_tree,ht=Ce.stat_desc.has_stree,it=Ce.stat_desc.extra_bits,Ke=Ce.stat_desc.extra_base,at=Ce.stat_desc.max_length,We=0;for(ve=0;ve<=w;ve++)he.bl_count[ve]=0;for(Te[2*he.heap[he.heap_max]+1]=0,Ye=he.heap_max+1;Ye<u;Ye++)at<(ve=Te[2*Te[2*(ze=he.heap[Ye])+1]+1]+1)&&(ve=at,We++),Te[2*ze+1]=ve,st<ze||(he.bl_count[ve]++,De=0,Ke<=ze&&(De=it[ze-Ke]),Pe=Te[2*ze],he.opt_len+=Pe*(ve+De),ht&&(he.static_len+=Pe*(ut[2*ze+1]+De)));if(We!==0){do{for(ve=at-1;he.bl_count[ve]===0;)ve--;he.bl_count[ve]--,he.bl_count[ve+1]+=2,he.bl_count[at]--,We-=2}while(0<We);for(ve=at;ve!==0;ve--)for(ze=he.bl_count[ve];ze!==0;)st<(Je=he.heap[--Ye])||(Te[2*Je+1]!==ve&&(he.opt_len+=(ve-Te[2*Je+1])*Te[2*Je],Te[2*Je+1]=ve),ze--)}}(x,E),Ee(q,me,x.bl_count)}function l(x,E,F){var $,I,q=-1,J=E[1],Y=0,re=7,me=4;for(J===0&&(re=138,me=3),E[2*(F+1)+1]=65535,$=0;$<=F;$++)I=J,J=E[2*($+1)+1],++Y<re&&I===J||(Y<me?x.bl_tree[2*I]+=Y:I!==0?(I!==q&&x.bl_tree[2*I]++,x.bl_tree[2*A]++):Y<=10?x.bl_tree[2*T]++:x.bl_tree[2*U]++,q=I,me=(Y=0)===J?(re=138,3):I===J?(re=6,3):(re=7,4))}function B(x,E,F){var $,I,q=-1,J=E[1],Y=0,re=7,me=4;for(J===0&&(re=138,me=3),$=0;$<=F;$++)if(I=J,J=E[2*($+1)+1],!(++Y<re&&I===J)){if(Y<me)for(;H(x,I,x.bl_tree),--Y!=0;);else I!==0?(I!==q&&(H(x,I,x.bl_tree),Y--),H(x,A,x.bl_tree),V(x,Y-3,2)):Y<=10?(H(x,T,x.bl_tree),V(x,Y-3,3)):(H(x,U,x.bl_tree),V(x,Y-11,7));q=I,me=(Y=0)===J?(re=138,3):I===J?(re=6,3):(re=7,4)}}c(Z);var D=!1;function _(x,E,F,$){V(x,(f<<1)+($?1:0),3),function(I,q,J,Y){de(I),Q(I,J),Q(I,~J),s.arraySet(I.pending_buf,I.window,q,J,I.pending),I.pending+=J}(x,E,F)}i._tr_init=function(x){D||(function(){var E,F,$,I,q,J=new Array(w+1);for(I=$=0;I<m-1;I++)for(R[I]=$,E=0;E<1<<M[I];E++)d[$++]=I;for(d[$-1]=I,I=q=0;I<16;I++)for(Z[I]=q,E=0;E<1<<G[I];E++)P[q++]=I;for(q>>=7;I<h;I++)for(Z[I]=q<<7,E=0;E<1<<G[I]-7;E++)P[256+q++]=I;for(F=0;F<=w;F++)J[F]=0;for(E=0;E<=143;)ee[2*E+1]=8,E++,J[8]++;for(;E<=255;)ee[2*E+1]=9,E++,J[9]++;for(;E<=279;)ee[2*E+1]=7,E++,J[7]++;for(;E<=287;)ee[2*E+1]=8,E++,J[8]++;for(Ee(ee,b+1,J),E=0;E<h;E++)k[2*E+1]=5,k[2*E]=be(E,5);se=new ie(ee,M,g+1,b,w),W=new ie(k,G,0,h,w),ce=new ie(new Array(0),L,0,y,v)}(),D=!0),x.l_desc=new C(x.dyn_ltree,se),x.d_desc=new C(x.dyn_dtree,W),x.bl_desc=new C(x.bl_tree,ce),x.bi_buf=0,x.bi_valid=0,le(x)},i._tr_stored_block=_,i._tr_flush_block=function(x,E,F,$){var I,q,J=0;0<x.level?(x.strm.data_type===2&&(x.strm.data_type=function(Y){var re,me=4093624447;for(re=0;re<=31;re++,me>>>=1)if(1&me&&Y.dyn_ltree[2*re]!==0)return n;if(Y.dyn_ltree[18]!==0||Y.dyn_ltree[20]!==0||Y.dyn_ltree[26]!==0)return o;for(re=32;re<g;re++)if(Y.dyn_ltree[2*re]!==0)return o;return n}(x)),Ae(x,x.l_desc),Ae(x,x.d_desc),J=function(Y){var re;for(l(Y,Y.dyn_ltree,Y.l_desc.max_code),l(Y,Y.dyn_dtree,Y.d_desc.max_code),Ae(Y,Y.bl_desc),re=y-1;3<=re&&Y.bl_tree[2*K[re]+1]===0;re--);return Y.opt_len+=3*(re+1)+5+5+4,re}(x),I=x.opt_len+3+7>>>3,(q=x.static_len+3+7>>>3)<=I&&(I=q)):I=q=F+5,F+4<=I&&E!==-1?_(x,E,F,$):x.strategy===4||q===I?(V(x,2+($?1:0),3),ue(x,ee,k)):(V(x,4+($?1:0),3),function(Y,re,me,he){var Ce;for(V(Y,re-257,5),V(Y,me-1,5),V(Y,he-4,4),Ce=0;Ce<he;Ce++)V(Y,Y.bl_tree[2*K[Ce]+1],3);B(Y,Y.dyn_ltree,re-1),B(Y,Y.dyn_dtree,me-1)}(x,x.l_desc.max_code+1,x.d_desc.max_code+1,J+1),ue(x,x.dyn_ltree,x.dyn_dtree)),le(x),$&&de(x)},i._tr_tally=function(x,E,F){return x.pending_buf[x.d_buf+2*x.last_lit]=E>>>8&255,x.pending_buf[x.d_buf+2*x.last_lit+1]=255&E,x.pending_buf[x.l_buf+x.last_lit]=255&F,x.last_lit++,E===0?x.dyn_ltree[2*F]++:(x.matches++,E--,x.dyn_ltree[2*(d[F]+g+1)]++,x.dyn_dtree[2*O(E)]++),x.last_lit===x.lit_bufsize-1},i._tr_align=function(x){V(x,2,3),H(x,S,ee),function(E){E.bi_valid===16?(Q(E,E.bi_buf),E.bi_buf=0,E.bi_valid=0):8<=E.bi_valid&&(E.pending_buf[E.pending++]=255&E.bi_buf,E.bi_buf>>=8,E.bi_valid-=8)}(x)}},{"../utils/common":41}],53:[function(e,t,i){t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,t,i){(function(s){(function(n,o){if(!n.setImmediate){var c,f,m,g,b=1,h={},y=!1,u=n.document,w=Object.getPrototypeOf&&Object.getPrototypeOf(n);w=w&&w.setTimeout?w:n,c={}.toString.call(n.process)==="[object process]"?function(A){process.nextTick(function(){v(A)})}:function(){if(n.postMessage&&!n.importScripts){var A=!0,T=n.onmessage;return n.onmessage=function(){A=!1},n.postMessage("","*"),n.onmessage=T,A}}()?(g="setImmediate$"+Math.random()+"$",n.addEventListener?n.addEventListener("message",S,!1):n.attachEvent("onmessage",S),function(A){n.postMessage(g+A,"*")}):n.MessageChannel?((m=new MessageChannel).port1.onmessage=function(A){v(A.data)},function(A){m.port2.postMessage(A)}):u&&"onreadystatechange"in u.createElement("script")?(f=u.documentElement,function(A){var T=u.createElement("script");T.onreadystatechange=function(){v(A),T.onreadystatechange=null,f.removeChild(T),T=null},f.appendChild(T)}):function(A){setTimeout(v,0,A)},w.setImmediate=function(A){typeof A!="function"&&(A=new Function(""+A));for(var T=new Array(arguments.length-1),U=0;U<T.length;U++)T[U]=arguments[U+1];var M={callback:A,args:T};return h[b]=M,c(b),b++},w.clearImmediate=p}function p(A){delete h[A]}function v(A){if(y)setTimeout(v,0,A);else{var T=h[A];if(T){y=!0;try{(function(U){var M=U.callback,G=U.args;switch(G.length){case 0:M();break;case 1:M(G[0]);break;case 2:M(G[0],G[1]);break;case 3:M(G[0],G[1],G[2]);break;default:M.apply(o,G)}})(T)}finally{p(A),y=!1}}}}function S(A){A.source===n&&typeof A.data=="string"&&A.data.indexOf(g)===0&&v(+A.data.slice(g.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof Ot<"u"?Ot:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(wn);var pi=wn.exports;const mi=jn(pi),gi=["outline","plain","preview","markdown"],xi=["edit","split","preview"],bi=`
### 一章　冷たい朝
窓の外では、灰色の空が静かに澱んでいる。  
雨粒がガラスを伝い、ひとつひとつの呼吸のように流れていく。  
目を覚ましても、世界はまだ眠っているようだった。

### 二章　傘の下の世界
通りには、人の影がぽつぽつと揺れている。  
傘の布地を叩く音が、唯一のリズム。  
すれ違う誰かの温度が、雨に溶けて消えていった。

### 三章　湯気の向こう
喫茶店の扉を開けると、温かな香りが迎えてくれる。  
コーヒーの湯気が曇った眼鏡を曇らせ、世界を少し柔らかくした。
`,wi=`# 雨の日の幸

## 一章　冷たい朝
窓の外では、灰色の空が静かに澱んでいる。
雨粒がガラスを伝い、ひとつひとつの呼吸のように流れていく。
目を覚ましても、世界はまだ眠っているようだった。

## 二章　傘の下の世界
通りには、人の影がぽつぽつと揺れている。
傘の布地を叩く音が、唯一のリズム。
すれ違う誰かの温度が、雨に溶けて消えていった。

## 三章　湯気の向こう
喫茶店の扉を開けると、温かな香りが迎えてくれる。
コーヒーの湯気が曇った眼鏡を曇らせ、世界を少し柔らかくした。
`,yi=()=>{const{user:j,signOut:r}=qt(),e=dr(),[t,i]=ge.useState([]),[s,n]=ge.useState(!0),[o,c]=ge.useState(null),[f,m]=ge.useState("plain"),[g,b]=ge.useState("edit"),h=ge.useRef("edit"),[y,u]=ge.useState(!1),[w,p]=ge.useState(!1),[v,S]=ge.useState(wi),[A,T]=ge.useState(""),[U,M]=ge.useState(""),[G,L]=ge.useState(!1),[K,ee]=ge.useState(!1),[k,P]=ge.useState(""),[d,R]=ge.useState(!1),[se,W]=ge.useState(!1),[ce,Z]=ge.useState([]),[ie,C]=ge.useState(null),[O,Q]=ge.useState(!1),[V,H]=ge.useState([{id:"summary",title:"あらすじ",content:""},{id:"note",title:"Note",content:""},{id:"vocabulary",title:"単語帳",content:""},{id:"memo",title:"メモ",content:""}]),[be,Ee]=ge.useState(new Set),[le,de]=ge.useState(null),[_e,xe]=ge.useState(null);ge.useEffect(()=>{j||e("/login")},[j,e]),ge.useEffect(()=>{j&&l()},[j]),ge.useEffect(()=>{t.length>0&&!o&&c(t[0].id)},[t,o]);const ue=t.find(z=>z.id===o)||null;ge.useEffect(()=>{ue?(S(ue.content),T(ue.title),Z(ue.dictionaryEntries??[])):(S(""),T(""),Z([]))},[ue]),ge.useEffect(()=>{f==="preview"&&g!=="preview"?b("preview"):f==="markdown"&&g!==h.current&&b(h.current)},[f,g]);const Ae=z=>{T(z),ue&&j&&(Be.updateScenario(ue.id,{title:z}),l())},l=async()=>{try{if(j){const z=Be.getUserScenarios(j.uid);i(z)}}catch(z){console.error("Error loading scenarios:",z)}finally{n(!1)}},B=async()=>{try{await r(),e("/login")}catch(z){console.error("Sign out error:",z)}},D=()=>{if(!j)return;const z=Be.createScenario({title:"新しいプロジェクト",content:"ここに新しいシナリオを作成してください。",tags:[],isPublic:!1,authorId:j.uid});l(),c(z)},_=z=>{console.log("Settings saved:",z)},x=async z=>{const ae=Be.getProject(z.id);if(!ae){const Se=`${z.title||"project"}.md`,je=`texts/${Se}`,He={read:"allow",quote:"internal",write:"deny",scope:["local"],until:null},ot={id:`proj-${z.id}`,name:z.title||"無題プロジェクト",main:Se,ai_policy:He,texts:[{id:"t-main",path:je,tags:z.tags||[]}],tags:Array.from(new Set(z.tags||[])),tag_docs:{},libraly:z.dictionaryEntries&&z.dictionaryEntries.length>0?["辞書"]:void 0,lib_docs:z.dictionaryEntries&&z.dictionaryEntries.length>0?{辞書:{path:"tags/辞書.md"}}:void 0},Qe={[je]:v};if(z.dictionaryEntries&&z.dictionaryEntries.length>0){const xt=z.dictionaryEntries.map(It=>`### ${It.term}
${It.description}`).join(`

`);Qe["tags/辞書.md"]=xt}return{project:ot,files:Qe}}const te={};for(const Se of ae.texts){const je=Be.getProjectTextContent(ae.id,Se.id);je&&(te[Se.path]=je)}for(const[Se,je]of Object.entries(ae.tag_docs||{}))je.path&&!te[je.path]&&(te[je.path]=`# ${Se}

タグ「${Se}」の説明`);if(ae.lib_docs){for(const[Se,je]of Object.entries(ae.lib_docs))if(je.path&&!te[je.path])if(Se==="辞書"){const He=Be.getProjectDictionary(ae.id);if(He.length>0){const ot=He.map(Qe=>`### ${Qe.term}
${Qe.description}`).join(`

`);te[je.path]=ot}else te[je.path]=`# 辞書

プロジェクト「${ae.name}」の辞書`}else te[je.path]=`# ${Se}

ライブラリ「${Se}」の内容`}return{project:ae,files:te}},E=async()=>{if(!ue){alert("エクスポートするプロジェクトを選択してください。");return}try{const{project:z,files:ae}=await x(ue),te=new mi;te.file("project.json",JSON.stringify(z,null,2));for(const[Qe,xt]of Object.entries(ae))te.file(Qe,xt);const Se=await te.generateAsync({type:"blob"}),je=URL.createObjectURL(Se),He=document.createElement("a"),ot=ue.title||"project";He.href=je,He.download=`${ot}-export.zip`,document.body.appendChild(He),He.click(),document.body.removeChild(He),URL.revokeObjectURL(je),alert("プロジェクトのエクスポートが完了しました。")}catch(z){console.error("Export error:",z),alert("プロジェクトのエクスポートに失敗しました。")}},F=z=>{S(z),ue&&j&&Be.updateScenario(ue.id,{content:z})},$=z=>{if(f==="markdown"){h.current=z,b(z);return}if(f==="preview"){z==="preview"?b("preview"):(h.current=z,m("markdown"),b(z));return}m("markdown"),h.current=z,b(z)},I=()=>{F(oi),m("markdown")},q=()=>{p(!0)},J=z=>{M(z)},Y=async z=>{L(!0);try{await new Promise(te=>setTimeout(te,1500));const ae=`【生成されたテキスト】

${z}に基づいて生成されたテキストがここに表示されます。

実際の実装では、AI API（ChatGPTまたはClaude）から取得したテキストが表示されます。`;M(ae)}catch(ae){console.error("Text generation error:",ae),M("テキストの生成中にエラーが発生しました。")}finally{L(!1)}},re=()=>{if(ee(!0),ue){const z=ue.tags||[],ae=z.length>0?z.map(te=>`# ${te}`).join(`

`):"# main";P(ae||"# main")}else P("# main")},me=()=>{ee(!1)},he=()=>{const z=prompt("タグ名を入力してください:");if(z&&ue){const ae=ue.tags||[];if(!ae.includes(z)){Be.updateScenario(ue.id,{tags:[...ae,z]}),l();const Se=[...ae,z].map(je=>`# ${je}`).join(`

`);P(Se)}}},Ce=()=>{d||R(!0),C(null),W(!0)},Ye=({term:z,description:ae})=>{if(!ue)return;const te=Be.addDictionaryEntry(ue.id,{term:z,description:ae});te&&(Z(Se=>[...Se,te]),R(!0),l(),C(null))},ze=z=>{ue&&(Be.removeDictionaryEntry(ue.id,z),Z(ae=>ae.filter(te=>te.id!==z)),l())},Je=({term:z,description:ae})=>{if(ue){if(ie){const te=Be.updateDictionaryEntry(ue.id,ie.id,{term:z,description:ae});te&&(Z(Se=>Se.map(je=>je.id===te.id?te:je)),C(null),R(!0),l());return}Ye({term:z,description:ae})}},ve=z=>{C(z),W(!0)},De=()=>{R(!1)},Pe=()=>{alert("資料の検索機能は今後実装予定です")},Te=()=>{Q(!0)},st=(z,ae)=>{H(V.map(te=>te.id===z?{...te,title:ae}:te))},ut=z=>{H(V.filter(ae=>ae.id!==z))},ht=ge.useMemo(()=>bn(v),[v]),it=ge.useMemo(()=>li(v||bi),[v]),Ke=ge.useMemo(()=>hi(it,ce),[it,ce]),at=z=>{const ae=new Set(be);ae.has(z)?ae.delete(z):ae.add(z),Ee(ae)},We=(z,ae)=>{if(!z||!ae||z===ae)return;const te=fi(v,z,ae);te!==v&&F(te)};return s?a.jsx("div",{className:"h-screen w-screen flex items-center justify-center bg-gradient-to-br from-slate-50 via-blue-50/30 to-indigo-50/20",children:a.jsxs("div",{className:"flex flex-col items-center gap-4",children:[a.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-slate-200 border-t-blue-500"}),a.jsx("p",{className:"text-sm font-semibold text-slate-600",children:"読み込み中..."})]})}):j?a.jsxs("div",{className:"h-screen w-screen overflow-hidden bg-gradient-to-br from-slate-50 via-blue-50/30 to-indigo-50/20",children:[a.jsxs("div",{className:"h-full w-full flex flex-col px-6 py-5",children:[a.jsx("div",{className:"mb-5 flex-shrink-0",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[a.jsxs("div",{className:"flex-1 max-w-md",children:[a.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1.5 tracking-wide uppercase",children:"プロジェクトの名前"}),a.jsx("input",{type:"text",value:A,onChange:z=>Ae(z.target.value),placeholder:"プロジェクト名を入力",className:"w-full px-4 py-2.5 bg-white border border-slate-200 rounded-xl text-sm text-slate-800 placeholder-slate-400 shadow-sm hover:shadow-md focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-400 transition-all duration-200"})]}),a.jsxs("div",{className:"flex items-center space-x-2.5",children:[a.jsxs(Re,{variant:"outline",className:"px-5 py-2.5 bg-white/80 backdrop-blur-sm border-slate-200 rounded-xl text-sm font-medium text-slate-700 hover:bg-white hover:shadow-md hover:border-slate-300 transition-all duration-200",onClick:()=>u(!0),children:[a.jsx(zn,{className:"h-4 w-4 mr-2"}),"設定"]}),a.jsxs(Re,{variant:"outline",className:"px-5 py-2.5 bg-white/80 backdrop-blur-sm border-slate-200 rounded-xl text-sm font-medium text-slate-700 hover:bg-white hover:shadow-md hover:border-slate-300 transition-all duration-200",onClick:E,children:[a.jsx(Yr,{className:"h-4 w-4 mr-2"}),"エクスポート"]}),a.jsxs(Re,{variant:"outline",className:"px-5 py-2.5 bg-white/80 backdrop-blur-sm border-slate-200 rounded-xl text-sm font-medium text-slate-700 hover:bg-white hover:shadow-md hover:border-slate-300 transition-all duration-200",onClick:B,children:[a.jsx(Dn,{className:"h-4 w-4 mr-2"}),"ログアウト"]})]})]})}),a.jsxs("div",{className:"flex-1 grid grid-cols-1 gap-5 xl:grid-cols-[clamp(240px,18vw,280px)_minmax(0,1fr)_clamp(260px,21vw,380px)] min-h-0",children:[a.jsxs("aside",{className:"bg-white/90 backdrop-blur-md border border-slate-200/60 rounded-2xl p-5 flex flex-col shadow-lg shadow-slate-200/50 min-h-0",children:[a.jsx("h2",{className:"text-xs font-bold text-slate-600 mb-4 tracking-wider uppercase",children:"プロジェクト一覧"}),a.jsx("div",{className:"space-y-2 flex-1 overflow-y-auto scrollable pr-1 min-h-0",children:t.length===0?a.jsx("p",{className:"text-sm text-slate-400 italic py-8 text-center",children:"まだプロジェクトがありません"}):t.map(z=>a.jsx("button",{onClick:()=>c(z.id),className:`w-full text-left px-4 py-3 rounded-xl border-2 transition-all duration-200 ${o===z.id?"border-blue-500 bg-gradient-to-r from-blue-500 to-indigo-500 text-white shadow-lg shadow-blue-500/30 scale-[1.02]":"border-slate-200 bg-white/60 hover:bg-white hover:border-slate-300 hover:shadow-md text-slate-700"}`,children:a.jsx("p",{className:"text-sm font-semibold truncate",children:z.title})},z.id))}),a.jsxs(Re,{variant:"outline",onClick:D,className:"mt-4 w-full justify-center py-3 bg-gradient-to-r from-blue-500 to-indigo-500 text-white border-0 rounded-xl font-semibold shadow-md shadow-blue-500/30 hover:shadow-lg hover:shadow-blue-500/40 hover:scale-[1.02] transition-all duration-200",children:[a.jsx(Kr,{className:"h-4 w-4 mr-2"}),"新規作成"]})]}),a.jsxs("section",{className:"bg-white/90 backdrop-blur-md border border-slate-200/60 rounded-2xl p-5 flex flex-col shadow-lg shadow-slate-200/50 min-h-0",children:[a.jsxs("div",{className:"flex items-center flex-wrap gap-3 mb-4 flex-shrink-0",children:[a.jsx("span",{className:"text-xs font-bold text-slate-600 tracking-wider uppercase",children:"ViewMode"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:gi.map(z=>a.jsx("button",{onClick:()=>m(z),className:`px-4 py-2 rounded-xl border-2 text-sm font-semibold capitalize transition-all duration-200 ${f===z?z==="plain"||z==="outline"||z==="preview"||z==="markdown"?"border-emerald-500 bg-gradient-to-r from-emerald-500 to-teal-500 text-white shadow-md shadow-emerald-500/30 scale-105":"border-slate-800 bg-slate-800 text-white shadow-md":"border-slate-200 bg-white/80 text-slate-600 hover:bg-white hover:border-slate-300 hover:shadow-sm"}`,children:z},z))}),(f==="markdown"||f==="preview")&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"表示"}),a.jsx("div",{className:"inline-flex rounded-xl border-2 border-slate-200 overflow-hidden bg-white/80",children:xi.map(z=>a.jsx("button",{type:"button",onClick:()=>$(z),className:`px-3 py-1.5 text-xs font-semibold capitalize transition-all duration-200 ${g===z?"bg-gradient-to-r from-slate-700 to-slate-800 text-white shadow-inner":"bg-transparent text-slate-600 hover:bg-slate-50"}`,children:z==="edit"?"編集":z==="split"?"分割":"プレビュー"},z))})]}),a.jsx("button",{type:"button",onClick:I,className:"text-xs font-semibold border-2 border-dashed border-slate-300 rounded-xl px-3 py-1.5 text-slate-500 hover:bg-slate-50 hover:border-slate-400 transition-all duration-200",children:"Markdownテスト挿入"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-[240px_minmax(0,1fr)] gap-4 flex-1 min-h-0",children:[(f==="outline"||f==="plain"||f==="preview"||f==="markdown"||f===null)&&a.jsxs("div",{className:"border-2 border-slate-200/60 rounded-xl p-4 bg-gradient-to-br from-slate-50/80 to-blue-50/30 overflow-y-auto scrollable min-h-0",children:[a.jsx("h3",{className:"text-xs font-bold text-slate-600 mb-3 tracking-wider uppercase",children:"Outline"}),a.jsx("div",{className:"space-y-1 text-sm text-gray-600",children:ht.length>0?ht.map(z=>{const ae=be.has(z.id);return a.jsx("div",{className:`flex items-center gap-1 group ${_e===z.id?"bg-blue-50 rounded":""}`,children:a.jsxs("div",{className:`flex-1 flex items-center gap-2 cursor-move hover:bg-white/60 px-3 py-2 rounded-lg transition-all duration-200 ${z.level<=1?"pl-0":z.level===2?"pl-6":"pl-12"} ${_e===z.id?"bg-blue-100/50 border-2 border-blue-300":""}`,draggable:!0,onDragStart:te=>{de(z.id),te.dataTransfer.effectAllowed="move"},onDragOver:te=>{te.preventDefault(),te.dataTransfer.dropEffect="move",le&&le!==z.id&&xe(z.id)},onDrop:te=>{te.preventDefault(),le&&le!==z.id&&We(le,z.id),xe(null),de(null)},onDragEnd:()=>{xe(null),de(null)},onDragLeave:()=>{_e===z.id&&xe(null)},onClick:()=>{le||at(z.id)},children:[a.jsx("span",{className:"text-sm font-medium text-slate-700",children:z.text}),ae&&a.jsx("span",{className:"text-xs text-slate-400 ml-1",children:"▼"}),!ae&&a.jsx("span",{className:"text-xs text-slate-400 ml-1",children:"▶"})]})},z.id)}):a.jsx("p",{className:"text-gray-400",children:"アウトラインはまだありません。"})})]}),a.jsx("div",{className:`border-2 border-slate-200/60 rounded-xl p-5 overflow-y-auto scrollable bg-white/80 backdrop-blur-sm min-h-0 ${f==="outline"||f==="plain"||f==="preview"||f==="markdown"||f===null?"":"md:col-span-2"}`,children:ue?f===null?a.jsxs("div",{className:"relative h-full min-h-[400px] flex items-center justify-center bg-white",children:[a.jsx("div",{className:"absolute left-6 bottom-16 w-2/3 border-t border-dashed border-gray-300 rotate-[-12deg]"}),a.jsx("span",{className:"text-lg font-semibold text-gray-600 bg-white px-3 py-1 shadow-sm rounded",children:"Main Editor"})]}):f==="outline"?a.jsxs("div",{className:"h-full min-h-[400px] flex flex-col",children:[ht.length>0?a.jsx("div",{className:"flex-1 space-y-3",children:ht.map((z,ae)=>a.jsxs("div",{className:`flex flex-col border-2 rounded-xl p-4 hover:border-slate-300 hover:shadow-md transition-all duration-200 cursor-move bg-white/80 backdrop-blur-sm ${_e===z.id?"border-blue-400 bg-blue-50/80 shadow-lg shadow-blue-400/20 scale-[1.02]":"border-slate-200"}`,draggable:!0,onDragStart:()=>de(z.id),onDragOver:te=>{te.preventDefault(),le&&le!==z.id&&xe(z.id)},onDrop:te=>{te.preventDefault(),le&&le!==z.id&&We(le,z.id),xe(null),de(null)},onDragEnd:()=>{xe(null),de(null)},onDragLeave:()=>{_e===z.id&&xe(null)},children:[a.jsx("div",{className:"flex items-center justify-between gap-2",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("span",{className:"text-xs font-bold text-slate-500 bg-slate-100 px-2 py-1 rounded-lg",children:[ae+1,"章"]}),a.jsx("span",{className:"font-semibold text-slate-800",children:z.text})]})}),a.jsxs("p",{className:"text-xs text-slate-400 mt-2 font-medium",children:["レベル: ",z.level," / 開始行 ",z.startLine+1]})]},`outline-main-${z.id}-${ae}`))}):a.jsx("div",{className:"flex-1 flex items-center justify-center text-sm text-slate-400 italic",children:"アウトラインはまだありません"}),a.jsxs("div",{className:"mt-6 pt-4 border-t-2 border-slate-200/60 text-xs text-slate-500 space-y-1 bg-slate-50/50 rounded-lg p-3",children:[a.jsx("p",{className:"font-semibold",children:"いわゆるアウトラインエディタモード"}),a.jsx("p",{children:"本文は折りたたまれている"}),a.jsx("p",{children:"header要素をドラッグ・アンド・ドロップできる"})]})]}):f==="plain"?a.jsxs("div",{className:"h-full flex flex-col min-h-0",children:[a.jsx("div",{className:"w-full flex-1 text-sm leading-relaxed text-slate-700 font-sans whitespace-pre-wrap overflow-y-auto scrollable border-none outline-none",children:di(v)||a.jsx("span",{className:"text-slate-400 italic",children:"ここにプレーンテキストで内容が表示されます..."})}),a.jsxs("div",{className:"mt-4 pt-4 border-t-2 border-slate-200 text-xs text-slate-500 space-y-1 bg-slate-50/50 rounded-lg p-3",children:[a.jsx("p",{className:"font-semibold",children:"プレーンテキストモード"}),a.jsx("p",{children:"markdownのレンダリングが使用されない"}),a.jsx("p",{children:"読み・書き下ろしのためのモード"}),a.jsx("p",{className:"text-slate-400 mt-2",children:"※ 編集はMarkdownモードで行ってください"})]})]}):f==="preview"?a.jsxs("div",{className:"h-full min-h-0 overflow-y-auto scrollable",children:[a.jsx("div",{className:"markdown-preview",dangerouslySetInnerHTML:{__html:Ke}}),a.jsxs("div",{className:"mt-6 pt-4 border-t-2 border-slate-200 text-xs text-slate-500 space-y-1 bg-slate-50/50 rounded-lg p-3",children:[a.jsx("p",{children:"このツールでは表現できないが、強調表示やリストなど"}),a.jsx("p",{children:"markdownのレンダリング表示モード"}),a.jsx("p",{children:"リンクや辞書などをハイライト表示"})]})]}):f==="markdown"?a.jsxs("div",{className:"h-full flex flex-col min-h-0",children:[g==="split"?a.jsxs("div",{className:"grid md:grid-cols-2 gap-4 flex-1 min-h-0",children:[a.jsx("textarea",{value:v,onChange:z=>F(z.target.value),className:"w-full h-full text-sm leading-relaxed text-slate-700 font-mono resize-none border-2 border-slate-200 rounded-xl p-4 bg-white/90 focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-400 transition-all duration-200 scrollable",placeholder:"ここにMarkdown形式で内容を入力してください..."}),a.jsx("div",{className:"border-2 border-slate-200 rounded-xl p-4 overflow-y-auto scrollable bg-white/90",children:a.jsx("div",{className:"markdown-preview",dangerouslySetInnerHTML:{__html:Ke}})})]}):g==="preview"?a.jsx("div",{className:"flex-1 border-2 border-slate-200 rounded-xl p-4 overflow-y-auto scrollable bg-white/90 min-h-0",children:a.jsx("div",{className:"markdown-preview",dangerouslySetInnerHTML:{__html:Ke}})}):a.jsx("textarea",{value:v,onChange:z=>F(z.target.value),className:"w-full flex-1 text-sm leading-relaxed text-slate-700 font-mono resize-none border-none outline-none bg-transparent scrollable",placeholder:"ここにMarkdown形式で内容を入力してください..."}),a.jsx("div",{className:"mt-4 pt-4 border-t-2 border-slate-200 text-xs text-center text-slate-500 bg-slate-50/50 rounded-lg p-3",children:a.jsx("p",{className:"font-semibold",children:"markdown 編集モード"})})]}):a.jsx("div",{className:"text-sm leading-relaxed whitespace-pre-wrap text-gray-700 font-mono",children:v}):a.jsx("div",{className:"h-full flex items-center justify-center",children:a.jsx("p",{className:"text-sm text-slate-400 italic",children:"プロジェクトを選択すると内容が表示されます"})})})]})]}),O?a.jsxs("aside",{className:"bg-white/90 backdrop-blur-md border border-slate-200/60 rounded-2xl p-5 flex flex-col space-y-3 shadow-lg shadow-slate-200/50 min-h-0",children:[a.jsxs("div",{className:"flex items-center justify-between border-b-2 border-slate-200/60 pb-3 mb-3",children:[a.jsx("h3",{className:"text-xs font-bold text-slate-700 tracking-wider uppercase",children:"校正モード"}),a.jsx("button",{onClick:()=>Q(!1),className:"text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg p-1 transition-all duration-200","aria-label":"校正モードを閉じる",children:a.jsx(Ve,{className:"h-4 w-4"})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto scrollable space-y-3 min-h-0",children:V.map(z=>a.jsxs("div",{className:"border-2 border-slate-200/60 rounded-xl bg-gradient-to-br from-white/90 to-slate-50/50 shadow-md",children:[a.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b-2 border-slate-200/60 bg-slate-50/50 rounded-t-xl",children:[a.jsx("input",{type:"text",value:z.title,onChange:ae=>st(z.id,ae.target.value),className:"text-xs font-bold text-slate-700 bg-transparent border-none outline-none focus:bg-white px-2 py-1 rounded-lg tracking-wider uppercase",onBlur:ae=>{ae.target.value.trim()||st(z.id,"新しいパネル")}}),a.jsx("button",{onClick:()=>ut(z.id),className:"text-slate-400 hover:text-red-500 hover:bg-red-50 rounded-lg p-1 transition-all duration-200","aria-label":"閉じる",children:a.jsx(Ve,{className:"h-4 w-4"})})]}),a.jsx("div",{className:"px-4 py-3 min-h-[80px]",children:a.jsx("textarea",{value:z.content,onChange:ae=>{H(V.map(te=>te.id===z.id?{...te,content:ae.target.value}:te))},className:"w-full text-sm text-slate-700 border-none outline-none resize-none bg-transparent placeholder-slate-400",placeholder:"内容を入力...",rows:3})})]},z.id))}),a.jsxs("div",{className:"grid grid-cols-2 gap-2.5 mt-auto pt-4 border-t-2 border-slate-200/60",children:[a.jsx("button",{onClick:q,className:"border-2 border-slate-200 bg-white/80 rounded-xl px-3 py-2.5 text-sm font-semibold text-left text-slate-700 hover:bg-white hover:border-slate-300 hover:shadow-md transition-all duration-200",children:"＋ 文章の追加"}),a.jsx("button",{onClick:Ce,className:"border-2 border-slate-200 bg-white/80 rounded-xl px-3 py-2.5 text-sm font-semibold text-left text-slate-700 hover:bg-white hover:border-slate-300 hover:shadow-md transition-all duration-200",children:"＋ 辞書の追加"}),a.jsx("button",{onClick:re,className:"border-2 border-slate-200 bg-white/80 rounded-xl px-3 py-2.5 text-sm font-semibold text-left text-slate-700 hover:bg-white hover:border-slate-300 hover:shadow-md transition-all duration-200",children:"＋ タグの追加"}),a.jsxs("button",{onClick:Te,className:"border-2 border-slate-200 bg-white/80 rounded-xl px-3 py-2.5 text-sm font-semibold text-left text-slate-700 hover:bg-white hover:border-slate-300 hover:shadow-md transition-all duration-200 flex items-center justify-between",children:[a.jsx("span",{children:"範囲を校正"}),a.jsx(zt,{className:"h-4 w-4"})]})]})]}):d?a.jsxs("aside",{className:"bg-white/90 backdrop-blur-md border border-slate-200/60 rounded-2xl p-5 flex flex-col space-y-3 shadow-lg shadow-slate-200/50 min-h-0 overflow-y-auto scrollable",children:[a.jsxs("div",{className:"border-2 border-slate-200/60 rounded-xl bg-gradient-to-br from-white/90 to-slate-50/50 shadow-md",children:[a.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b-2 border-slate-200/60 bg-slate-50/50 rounded-t-xl",children:[a.jsx("h3",{className:"text-xs font-bold text-slate-700 tracking-wider uppercase",children:"あらすじ"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:De,className:"text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg p-1 transition-all duration-200","aria-label":"最小化",children:a.jsx(Dt,{className:"h-4 w-4"})}),a.jsx("button",{onClick:De,className:"text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg p-1 transition-all duration-200","aria-label":"閉じる",children:a.jsx(Ve,{className:"h-4 w-4"})})]})]}),a.jsx("div",{className:"px-4 py-3 min-h-[80px]",children:a.jsx("textarea",{className:"w-full text-sm text-slate-700 border-none outline-none resize-none bg-transparent placeholder-slate-400",placeholder:"あらすじを入力...",rows:3})})]}),a.jsxs("div",{className:"border-2 border-slate-200/60 rounded-xl bg-gradient-to-br from-white/90 to-slate-50/50 shadow-md",children:[a.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b-2 border-slate-200/60 bg-slate-50/50 rounded-t-xl",children:[a.jsx("h3",{className:"text-xs font-bold text-slate-700 tracking-wider uppercase",children:"Note"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:De,className:"text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg p-1 transition-all duration-200","aria-label":"最小化",children:a.jsx(Dt,{className:"h-4 w-4"})}),a.jsx("button",{onClick:De,className:"text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg p-1 transition-all duration-200","aria-label":"閉じる",children:a.jsx(Ve,{className:"h-4 w-4"})})]})]}),a.jsx("div",{className:"px-4 py-3 min-h-[80px]",children:a.jsx("textarea",{className:"w-full text-sm text-slate-700 border-none outline-none resize-none bg-transparent placeholder-slate-400",placeholder:"ノートを入力...",rows:3})})]}),a.jsxs("div",{className:"border-2 border-slate-200/60 rounded-xl bg-gradient-to-br from-white/90 to-slate-50/50 shadow-md",children:[a.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b-2 border-slate-200/60 bg-slate-50/50 rounded-t-xl",children:[a.jsx("h3",{className:"text-xs font-bold text-slate-700 tracking-wider uppercase",children:"タグ"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:De,className:"text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg p-1 transition-all duration-200","aria-label":"最小化",children:a.jsx(Dt,{className:"h-4 w-4"})}),a.jsx("button",{onClick:De,className:"text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg p-1 transition-all duration-200","aria-label":"閉じる",children:a.jsx(Ve,{className:"h-4 w-4"})})]})]}),a.jsxs("div",{className:"px-4 py-3 flex items-center gap-2 flex-wrap",children:[a.jsx("span",{className:"text-sm font-semibold text-slate-600",children:"タグ"}),a.jsx("button",{className:"px-3 py-1.5 bg-gradient-to-r from-amber-400 to-orange-400 hover:from-amber-500 hover:to-orange-500 rounded-lg text-sm font-semibold text-white shadow-md hover:shadow-lg transition-all duration-200",children:"Main"}),a.jsx("button",{className:"px-3 py-1.5 border-2 border-slate-200 hover:border-slate-300 hover:bg-slate-50 rounded-lg text-sm font-semibold text-slate-600 transition-all duration-200",children:"+説明を追加"})]})]}),ce.map(z=>a.jsxs("div",{className:"border-2 border-slate-200/60 rounded-xl bg-gradient-to-br from-white/90 to-blue-50/30 shadow-md",children:[a.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b-2 border-slate-200/60 bg-gradient-to-r from-blue-50/50 to-indigo-50/30 rounded-t-xl",children:[a.jsx("h3",{className:"text-sm font-bold text-slate-800",children:z.term}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>ve(z),className:"text-xs font-semibold text-blue-600 hover:text-blue-700 hover:bg-blue-50 px-2 py-1 rounded-lg transition-all duration-200","aria-label":"辞書エントリを編集",children:"編集"}),a.jsx("button",{onClick:()=>ze(z.id),className:"text-slate-400 hover:text-red-500 hover:bg-red-50 rounded-lg p-1 transition-all duration-200","aria-label":"辞書エントリを削除",children:a.jsx(Ve,{className:"h-4 w-4"})})]})]}),a.jsxs("div",{className:"px-4 py-3",children:[a.jsx("p",{className:"text-sm text-slate-700 whitespace-pre-wrap leading-relaxed",children:z.description}),a.jsxs("p",{className:"text-xs text-slate-400 mt-3 font-medium",children:["登録日: ",z.createdAt?new Date(z.createdAt).toLocaleDateString():"-"]})]})]},z.id)),a.jsxs("div",{className:"grid grid-cols-2 gap-2.5 mt-auto pt-4 border-t-2 border-slate-200/60",children:[a.jsx("button",{onClick:q,className:"border-2 border-slate-200 bg-white/80 rounded-xl px-3 py-2.5 text-sm font-semibold text-left text-slate-700 hover:bg-white hover:border-slate-300 hover:shadow-md transition-all duration-200",children:"＋ 文章の追加"}),a.jsx("button",{onClick:Ce,className:"border-2 border-slate-200 bg-white/80 rounded-xl px-3 py-2.5 text-sm font-semibold text-left text-slate-700 hover:bg-white hover:border-slate-300 hover:shadow-md transition-all duration-200",children:"＋ 辞書の追加"}),a.jsx("button",{onClick:re,className:"border-2 border-slate-200 bg-white/80 rounded-xl px-3 py-2.5 text-sm font-semibold text-left text-slate-700 hover:bg-white hover:border-slate-300 hover:shadow-md transition-all duration-200",children:"＋ タグの追加"}),a.jsxs("button",{onClick:Te,className:"border-2 border-slate-200 bg-white/80 rounded-xl px-3 py-2.5 text-sm font-semibold text-left text-slate-700 hover:bg-white hover:border-slate-300 hover:shadow-md transition-all duration-200 flex items-center justify-between",children:[a.jsx("span",{children:"範囲を校正"}),a.jsx(zt,{className:"h-4 w-4"})]})]})]}):K?a.jsxs("aside",{className:"bg-white/90 backdrop-blur-md border border-slate-200/60 rounded-2xl p-5 flex flex-col space-y-3 shadow-lg shadow-slate-200/50 min-h-0 overflow-y-auto scrollable",children:[a.jsxs("div",{className:"border-2 border-slate-200/60 rounded-xl bg-gradient-to-br from-white/90 to-slate-50/50 shadow-md mb-4",children:[a.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b-2 border-slate-200/60 bg-slate-50/50 rounded-t-xl",children:[a.jsx("h3",{className:"text-xs font-bold text-slate-700 tracking-wider uppercase",children:"タグ"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:me,className:"text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg p-1 transition-all duration-200","aria-label":"最小化",children:a.jsx(Dt,{className:"h-4 w-4"})}),a.jsx("button",{onClick:me,className:"text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg p-1 transition-all duration-200","aria-label":"閉じる",children:a.jsx(Ve,{className:"h-4 w-4"})})]})]}),a.jsx("div",{className:"px-4 py-3",children:a.jsx("p",{className:"text-sm font-semibold text-slate-700",children:"main"})})]}),a.jsxs("div",{className:"flex-1 border-2 border-slate-200/60 rounded-xl bg-gradient-to-br from-white/90 to-slate-50/50 p-4 mb-4 overflow-y-auto scrollable shadow-md min-h-0",children:[a.jsx("p",{className:"text-xs text-slate-500 mb-3 font-semibold",children:"追加されたファイルのプレビューが出る"}),a.jsx("div",{className:"min-h-[200px]",children:k?a.jsx("pre",{className:"text-sm text-slate-700 whitespace-pre-wrap font-mono bg-slate-50/50 p-3 rounded-lg",children:k}):a.jsx("p",{className:"text-sm text-slate-400 italic",children:"プレビューがここに表示されます"})})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2.5 pt-4 border-t-2 border-slate-200/60",children:[a.jsx("button",{onClick:q,className:"border-2 border-slate-200 bg-white/80 rounded-xl px-3 py-2.5 text-sm font-semibold text-left text-slate-700 hover:bg-white hover:border-slate-300 hover:shadow-md transition-all duration-200",children:"＋ 文章の追加"}),a.jsx("button",{onClick:Ce,className:"border-2 border-slate-200 bg-white/80 rounded-xl px-3 py-2.5 text-sm font-semibold text-left text-slate-700 hover:bg-white hover:border-slate-300 hover:shadow-md transition-all duration-200",children:"＋ 辞書の追加"}),a.jsx("button",{onClick:he,className:"border-2 border-slate-200 bg-white/80 rounded-xl px-3 py-2.5 text-sm font-semibold text-left text-slate-700 hover:bg-white hover:border-slate-300 hover:shadow-md transition-all duration-200",children:"＋ タグの追加"}),a.jsxs("button",{onClick:Te,className:"border-2 border-slate-200 bg-white/80 rounded-xl px-3 py-2.5 text-sm font-semibold text-left text-slate-700 hover:bg-white hover:border-slate-300 hover:shadow-md transition-all duration-200 flex items-center justify-between",children:[a.jsx("span",{children:"範囲を校正"}),a.jsx(zt,{className:"h-4 w-4"})]})]})]}):a.jsxs("aside",{className:"bg-white/90 backdrop-blur-md border border-slate-200/60 rounded-2xl p-5 flex flex-col space-y-3 shadow-lg shadow-slate-200/50 min-h-0",children:[a.jsxs("div",{className:"border-2 border-slate-200/60 rounded-xl p-4 bg-gradient-to-br from-slate-50/80 to-blue-50/30 mb-2 shadow-sm",children:[a.jsx("h3",{className:"text-xs font-bold text-slate-600 mb-2 tracking-wider uppercase",children:"生成テキスト"}),a.jsx("div",{className:"min-h-[120px] max-h-[200px] overflow-y-auto scrollable",children:G?a.jsxs("div",{className:"flex items-center justify-center h-full",children:[a.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-2 border-slate-300 border-t-blue-500"}),a.jsx("span",{className:"ml-2 text-sm text-slate-500 font-medium",children:"生成中..."})]}):U?a.jsx("p",{className:"text-sm text-slate-700 whitespace-pre-wrap leading-relaxed",children:U}):a.jsx("p",{className:"text-sm text-slate-400 italic",children:"生成されたテキストがここに表示されることになります"})})]}),a.jsx("button",{onClick:q,className:"w-full border-2 border-slate-200 bg-white/80 rounded-xl px-4 py-3 text-sm font-semibold text-left text-slate-700 hover:bg-white hover:border-slate-300 hover:shadow-md transition-all duration-200",children:"＋ 文章の追加"}),a.jsx("button",{onClick:re,className:"w-full border-2 border-slate-200 bg-white/80 rounded-xl px-4 py-3 text-sm font-semibold text-left text-slate-700 hover:bg-white hover:border-slate-300 hover:shadow-md transition-all duration-200",children:"＋ タグの追加"}),a.jsx("button",{onClick:Ce,className:"w-full border-2 border-slate-200 bg-white/80 rounded-xl px-4 py-3 text-sm font-semibold text-left text-slate-700 hover:bg-white hover:border-slate-300 hover:shadow-md transition-all duration-200",children:"＋ 辞書の追加"}),a.jsxs("button",{onClick:Pe,className:"w-full border-2 border-slate-200 bg-white/80 rounded-xl px-4 py-3 text-sm font-semibold text-left text-slate-700 hover:bg-white hover:border-slate-300 hover:shadow-md transition-all duration-200 flex items-center",children:[a.jsx(Ln,{className:"h-4 w-4 mr-2"})," 資料の検索"]}),a.jsxs("button",{onClick:Te,className:"w-full border-2 border-slate-200 bg-white/80 rounded-xl px-4 py-3 text-sm font-semibold text-left text-slate-700 hover:bg-white hover:border-slate-300 hover:shadow-md transition-all duration-200 flex items-center justify-between",children:[a.jsx("span",{children:"範囲を校正"}),a.jsx(zt,{className:"h-4 w-4"})]})]})]})]}),a.jsx(es,{isOpen:y,onClose:()=>u(!1),onSave:_}),a.jsx(ts,{isOpen:w,onClose:()=>p(!1),onSave:J,onNext:Y}),a.jsx(rs,{isOpen:se,onClose:()=>{W(!1),C(null)},onSave:Je,onNext:ie?void 0:Ye,mode:ie?"edit":"create",initialEntry:ie?{term:ie.term,description:ie.description}:void 0})]}):null},_i=({variant:j="info",title:r,message:e,onClose:t,className:i=""})=>{const n={success:{bg:"bg-green-50",border:"border-green-200",text:"text-green-800",icon:Un,iconColor:"text-green-600"},error:{bg:"bg-red-50",border:"border-red-200",text:"text-red-800",icon:Bn,iconColor:"text-red-600"},warning:{bg:"bg-yellow-50",border:"border-yellow-200",text:"text-yellow-800",icon:Mn,iconColor:"text-yellow-600"},info:{bg:"bg-blue-50",border:"border-blue-200",text:"text-blue-800",icon:Pn,iconColor:"text-blue-600"}}[j],o=n.icon;return a.jsx("div",{className:`${n.bg} ${n.border} border rounded-lg p-4 ${i}`,role:"alert",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(o,{className:`${n.iconColor} h-5 w-5 mt-0.5 mr-3 flex-shrink-0`}),a.jsxs("div",{className:"flex-1",children:[r&&a.jsx("h3",{className:`${n.text} font-semibold mb-1`,children:r}),a.jsx("p",{className:`${n.text} text-sm`,children:e})]}),t&&a.jsx("button",{onClick:t,className:`${n.text} ml-4 flex-shrink-0 hover:opacity-75`,"aria-label":"Close",children:a.jsx(Ve,{className:"h-5 w-5"})})]})})},vi=()=>{const[j,r]=pe.useState(""),[e,t]=pe.useState(""),[i,s]=pe.useState(!1),[n,o]=pe.useState(""),{signIn:c}=qt(),f=dr(),m=async g=>{g.preventDefault(),s(!0),o("");try{await c(j,e),f("/dashboard")}catch(b){o(b.message||"ログインに失敗しました")}finally{s(!1)}};return a.jsx("div",{className:"min-h-screen bg-white text-gray-900 flex items-center justify-center",children:a.jsx("div",{className:"w-full max-w-md px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"border border-gray-300 rounded-lg bg-white px-6 py-10 sm:px-12 sm:py-14 shadow-sm",children:[a.jsx("h1",{className:"text-lg font-semibold text-gray-800 mb-12 text-center",children:"あるかなライター"}),a.jsxs("div",{className:"w-full",children:[n&&a.jsx(_i,{variant:"error",message:n,onClose:()=>o(""),className:"mb-6"}),a.jsxs("form",{className:"space-y-6",onSubmit:m,children:[a.jsx(tt,{label:"メールアドレス",type:"email",value:j,onChange:g=>r(g.target.value),placeholder:"pxr@example.com",required:!0}),a.jsx(tt,{label:"パスワード",type:"password",value:e,onChange:g=>t(g.target.value),placeholder:"パスワードを入力",required:!0}),a.jsx(Re,{type:"submit",className:"w-full",disabled:i,children:i?a.jsxs(a.Fragment,{children:[a.jsx(tn,{size:"sm",className:"mr-2"}),"ログイン中..."]}):"ログイン"})]}),a.jsx("div",{className:"mt-4 text-sm text-center",children:a.jsx("a",{href:"#",className:"text-gray-700 underline hover:text-gray-900",children:"パスワード忘れた方はこちら"})})]}),a.jsxs("div",{className:"mt-24 sm:mt-28 flex flex-col items-center space-y-2 text-sm text-gray-600",children:[a.jsx(Ge,{to:"#",className:"underline hover:text-gray-800",children:"アルカナライター テスター希望はこちら"}),a.jsx(Ge,{to:"#",className:"underline hover:text-gray-800",children:"利用規約"}),a.jsx("p",{className:"text-xs uppercase tracking-wide",children:"PxR LLC."})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsx(Ge,{to:"#",className:"text-xs text-gray-500 underline hover:text-gray-700",children:"フォームへリンク"})})]})})})},ki=()=>{const[j,r]=pe.useState(""),[e,t]=pe.useState(""),[i,s]=pe.useState(""),[n,o]=pe.useState(""),[c,f]=pe.useState(!1),[m,g]=pe.useState(!1),[b,h]=pe.useState(!1),[y,u]=pe.useState(""),{signUp:w}=qt(),p=dr(),v=async S=>{if(S.preventDefault(),h(!0),u(""),e!==i){u("パスワードが一致しません"),h(!1);return}if(e.length<6){u("パスワードは6文字以上で入力してください"),h(!1);return}try{await w(j,e,n),p("/dashboard")}catch(A){u(A.message||"アカウント作成に失敗しました")}finally{h(!1)}};return a.jsx("div",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"max-w-md w-full space-y-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"flex justify-center",children:a.jsx(nr,{className:"h-12 w-12 text-primary-600"})}),a.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:"新規アカウント作成"}),a.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["または"," ",a.jsx(Ge,{to:"/login",className:"font-medium text-primary-600 hover:text-primary-500",children:"既存のアカウントでログイン"})]})]}),a.jsxs("form",{className:"mt-8 space-y-6",onSubmit:v,children:[y&&a.jsx("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-md text-sm",children:y}),a.jsxs("div",{className:"space-y-4",children:[a.jsx(tt,{label:"表示名",type:"text",value:n,onChange:S=>o(S.target.value),placeholder:"あなたの名前",required:!0}),a.jsx(tt,{label:"メールアドレス",type:"email",value:j,onChange:S=>r(S.target.value),placeholder:"your@email.com",required:!0}),a.jsxs("div",{className:"relative",children:[a.jsx(tt,{label:"パスワード",type:c?"text":"password",value:e,onChange:S=>t(S.target.value),placeholder:"パスワードを入力（6文字以上）",required:!0}),a.jsx("button",{type:"button",className:"absolute right-3 top-8 text-gray-400 hover:text-gray-600",onClick:()=>f(!c),children:c?a.jsx(Ir,{className:"h-5 w-5"}):a.jsx(Rr,{className:"h-5 w-5"})})]}),a.jsxs("div",{className:"relative",children:[a.jsx(tt,{label:"パスワード確認",type:m?"text":"password",value:i,onChange:S=>s(S.target.value),placeholder:"パスワードを再入力",required:!0}),a.jsx("button",{type:"button",className:"absolute right-3 top-8 text-gray-400 hover:text-gray-600",onClick:()=>g(!m),children:m?a.jsx(Ir,{className:"h-5 w-5"}):a.jsx(Rr,{className:"h-5 w-5"})})]})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{id:"terms",name:"terms",type:"checkbox",required:!0,className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),a.jsxs("label",{htmlFor:"terms",className:"ml-2 block text-sm text-gray-900",children:[a.jsx(Ge,{to:"#",className:"text-primary-600 hover:text-primary-500",children:"利用規約"}),"と",a.jsx(Ge,{to:"#",className:"text-primary-600 hover:text-primary-500",children:"プライバシーポリシー"}),"に同意します"]})]}),a.jsx("div",{children:a.jsx(Re,{type:"submit",className:"w-full",disabled:b,children:b?"アカウント作成中...":"アカウントを作成"})}),a.jsx("div",{className:"text-center",children:a.jsx(Ge,{to:"/",className:"text-sm text-gray-600 hover:text-gray-500",children:"ホームに戻る"})})]})]})})};function Si(){return a.jsx(qn,{children:a.jsx("div",{className:"min-h-screen bg-white",children:a.jsx(Tn,{children:a.jsxs(wt,{path:"/",element:a.jsx(Yn,{}),children:[a.jsx(wt,{index:!0,element:a.jsx(Kn,{})}),a.jsx(wt,{path:"login",element:a.jsx(vi,{})}),a.jsx(wt,{path:"register",element:a.jsx(ki,{})}),a.jsx(wt,{path:"editor",element:a.jsx(Qn,{})}),a.jsx(wt,{path:"dashboard",element:a.jsx(yi,{})})]})})})})}sr.createRoot(document.getElementById("root")).render(a.jsx(ge.StrictMode,{children:a.jsx(An,{children:a.jsx(Si,{})})}));
//# sourceMappingURL=index-BRJTLRlL.js.map
