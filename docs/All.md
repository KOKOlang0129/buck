# ArcanaEditor — 全体要件定義書（Version 1.0）

## 1. 概要
本プロジェクト「ArcanaEditor」は、物語制作を効率化・支援するためのAI連携型エディタを構築することを目的とする。  
物語構造の自動整理、登場人物・世界観の整合性チェック、生成補助を行い、作家の創作過程を支援するツールを目指す。

本要件定義書は、MVP（最小実用化）に留まらず、将来的な拡張を含む全体像を明確化するものである。

---

## 2. プロジェクト目的
- 創作過程の「思考」「編集」「整理」「構築」を支援するAIエディタを開発する。
- 物語構造を視覚的かつ動的に管理できる環境を提供する。
- LLMを活用し、物語の展開・登場人物・設定の一貫性を維持した生成補助を実現する。
- 将来的に複数ユーザーによる共同執筆・レビュー環境を実現可能な基盤を構築する。

---

## 3. 想定ユーザー
| ユーザー層 | 主な利用目的 |
|-------------|----------------|
| 小説・シナリオ作家 | 世界観・構造の整理、創作支援 |
| 編集者 | 構成確認、レビュー、修正提案 |
| AI研究者 / テスター | LLM出力の評価・チューニング |
| 共同制作チーム | 複数人での作品制作管理 |

---

## 4. システム構成
### 4.1 フロントエンド
- フレームワーク: Next.js / React
- デザイン管理: TailwindCSS + Figma連携
- UI要素: Markdownエディタ、AI補助パネル、構造ビュー

### 4.2 バックエンド
- APIレイヤー: Supabase / Edge Functions
- データベース: PostgreSQL (Supabase)
- LLM連携: OpenAI API または Claude API（選択可）
- 認証: Supabase Auth（簡易ログイン機能）
- ストレージ: Supabase Storage（テキスト・構造データ保存）

### 4.3 インフラ / 環境
- 開発環境: GitHub + Vercel デプロイ
- CI/CD: GitHub Actions
- ドメイン: 任意の独自ドメインを設定

---

## 5. コア機能一覧

### 5.1 編集支援
- Markdownベースのテキスト編集機能
- AIによる文脈補完 / リライト / 要約提案
- 登場人物・設定・世界観情報の抽出・整理

### 5.2 構造管理
- 物語構造のツリー化（チャプター／シーン単位）
- タグ・関連情報の付与
- 構造ビューによる俯瞰と再構成

### 5.3 整合性チェック
- 登場人物・用語・設定の整合性をAIが検出
- 時系列の矛盾・再登場タイミングの検証

### 5.4 LLM補助
- LLMによるアイデア生成・文体補完
- 登場人物プロファイルの自動生成
- 物語トーンやテーマの一貫性チェック

### 5.5 コラボレーション
- ログインユーザーによる共同編集
- 権限管理（オーナー／編集者／閲覧者）
- コメント機能・レビュー履歴

### 5.6 管理・設定
- プロジェクト単位での作品管理
- APIキー発行・制限機能（管理者のみ）
- アクセス制御（ホワイトリスト対応）

---

## 6. 開発方針・マイルストーン
| フェーズ | 内容 | 目標期間 |
|-----------|------|-----------|
| フェーズ1 | 要件定義・環境構築 | 2週間 |
| フェーズ2 | コア機能実装（編集・構造・AI補助） | 4週間 |
| フェーズ3 | 整合性チェック・ログイン機能・API管理 | 3週間 |
| フェーズ4 | UI最適化・テスト・ドキュメント整備 | 2週間 |
| フェーズ5 | ベータ公開・初期ユーザーテスト | 2週間 |

---

## 7. 技術的制約
- SupabaseおよびNext.jsを採用（柔軟性と拡張性の両立）
- LLM API利用コストを考慮した設計（回数制限・管理機能）
- メンテナンス容易性を最優先とし、生成コードはリファクタリング前提で運用

---

## 8. セキュリティ・拡張性
- ユーザー認証・API制御をSupabase Authで実装
- 今後のスケールに備えたDBスキーマ設計
- ロールベースアクセス制御（RBAC）の導入を検討

---

## 9. 成果物
- ArcanaEditor Webアプリ（ベータ版）
- 要件定義・設計書・API仕様書
- GitHubリポジトリ・開発ログ
- 開発・運用ドキュメント

---

## 10. 今後の拡張計画
- モバイル対応（PWAまたはReact Native）
- 共同編集のリアルタイム同期（WebSocket）
- AIエージェントによる「編集アシスタント」機能追加
- プラグイン化構想（構文解析・プロット補助）

---

## 11. 補足・備考
- 本要件は初期段階の包括設計であり、MVP段階での検証結果を踏まえ順次更新する。
- 開発途中でのフィードバックはGitHub Issueで管理・反映する。

---

© 2025 ArcanaEditor Development Team
